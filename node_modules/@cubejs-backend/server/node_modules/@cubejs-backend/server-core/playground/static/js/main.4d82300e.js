!function(e){function t(t){for(var r,s,o=t[0],u=t[1],c=t[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);d.length;)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={1:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="./";var o=this["webpackJsonp@cubejs-client/playground"]=this["webpackJsonp@cubejs-client/playground"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;i.push([936,0,2]),n()}({1106:function(e,t){},1351:function(e,t){},1390:function(e,t,n){var r={"./Binary_Property/ASCII.js":1391,"./Binary_Property/ASCII_Hex_Digit.js":1392,"./Binary_Property/Alphabetic.js":1393,"./Binary_Property/Any.js":1394,"./Binary_Property/Assigned.js":1395,"./Binary_Property/Bidi_Control.js":1396,"./Binary_Property/Bidi_Mirrored.js":1397,"./Binary_Property/Case_Ignorable.js":1398,"./Binary_Property/Cased.js":1399,"./Binary_Property/Changes_When_Casefolded.js":1400,"./Binary_Property/Changes_When_Casemapped.js":1401,"./Binary_Property/Changes_When_Lowercased.js":1402,"./Binary_Property/Changes_When_NFKC_Casefolded.js":1403,"./Binary_Property/Changes_When_Titlecased.js":1404,"./Binary_Property/Changes_When_Uppercased.js":1405,"./Binary_Property/Dash.js":1406,"./Binary_Property/Default_Ignorable_Code_Point.js":1407,"./Binary_Property/Deprecated.js":1408,"./Binary_Property/Diacritic.js":1409,"./Binary_Property/Emoji.js":1410,"./Binary_Property/Emoji_Component.js":1411,"./Binary_Property/Emoji_Modifier.js":1412,"./Binary_Property/Emoji_Modifier_Base.js":1413,"./Binary_Property/Emoji_Presentation.js":1414,"./Binary_Property/Extended_Pictographic.js":1415,"./Binary_Property/Extender.js":1416,"./Binary_Property/Grapheme_Base.js":1417,"./Binary_Property/Grapheme_Extend.js":1418,"./Binary_Property/Hex_Digit.js":1419,"./Binary_Property/IDS_Binary_Operator.js":1420,"./Binary_Property/IDS_Trinary_Operator.js":1421,"./Binary_Property/ID_Continue.js":1422,"./Binary_Property/ID_Start.js":1423,"./Binary_Property/Ideographic.js":1424,"./Binary_Property/Join_Control.js":1425,"./Binary_Property/Logical_Order_Exception.js":1426,"./Binary_Property/Lowercase.js":1427,"./Binary_Property/Math.js":1428,"./Binary_Property/Noncharacter_Code_Point.js":1429,"./Binary_Property/Pattern_Syntax.js":1430,"./Binary_Property/Pattern_White_Space.js":1431,"./Binary_Property/Quotation_Mark.js":1432,"./Binary_Property/Radical.js":1433,"./Binary_Property/Regional_Indicator.js":1434,"./Binary_Property/Sentence_Terminal.js":1435,"./Binary_Property/Soft_Dotted.js":1436,"./Binary_Property/Terminal_Punctuation.js":1437,"./Binary_Property/Unified_Ideograph.js":1438,"./Binary_Property/Uppercase.js":1439,"./Binary_Property/Variation_Selector.js":1440,"./Binary_Property/White_Space.js":1441,"./Binary_Property/XID_Continue.js":1442,"./Binary_Property/XID_Start.js":1443,"./General_Category/Cased_Letter.js":1444,"./General_Category/Close_Punctuation.js":1445,"./General_Category/Connector_Punctuation.js":1446,"./General_Category/Control.js":1447,"./General_Category/Currency_Symbol.js":1448,"./General_Category/Dash_Punctuation.js":1449,"./General_Category/Decimal_Number.js":1450,"./General_Category/Enclosing_Mark.js":1451,"./General_Category/Final_Punctuation.js":1452,"./General_Category/Format.js":1453,"./General_Category/Initial_Punctuation.js":1454,"./General_Category/Letter.js":1455,"./General_Category/Letter_Number.js":1456,"./General_Category/Line_Separator.js":1457,"./General_Category/Lowercase_Letter.js":1458,"./General_Category/Mark.js":1459,"./General_Category/Math_Symbol.js":1460,"./General_Category/Modifier_Letter.js":1461,"./General_Category/Modifier_Symbol.js":1462,"./General_Category/Nonspacing_Mark.js":1463,"./General_Category/Number.js":1464,"./General_Category/Open_Punctuation.js":1465,"./General_Category/Other.js":1466,"./General_Category/Other_Letter.js":1467,"./General_Category/Other_Number.js":1468,"./General_Category/Other_Punctuation.js":1469,"./General_Category/Other_Symbol.js":1470,"./General_Category/Paragraph_Separator.js":1471,"./General_Category/Private_Use.js":1472,"./General_Category/Punctuation.js":1473,"./General_Category/Separator.js":1474,"./General_Category/Space_Separator.js":1475,"./General_Category/Spacing_Mark.js":1476,"./General_Category/Surrogate.js":1477,"./General_Category/Symbol.js":1478,"./General_Category/Titlecase_Letter.js":1479,"./General_Category/Unassigned.js":1480,"./General_Category/Uppercase_Letter.js":1481,"./Script/Adlam.js":1482,"./Script/Ahom.js":1483,"./Script/Anatolian_Hieroglyphs.js":1484,"./Script/Arabic.js":1485,"./Script/Armenian.js":1486,"./Script/Avestan.js":1487,"./Script/Balinese.js":1488,"./Script/Bamum.js":1489,"./Script/Bassa_Vah.js":1490,"./Script/Batak.js":1491,"./Script/Bengali.js":1492,"./Script/Bhaiksuki.js":1493,"./Script/Bopomofo.js":1494,"./Script/Brahmi.js":1495,"./Script/Braille.js":1496,"./Script/Buginese.js":1497,"./Script/Buhid.js":1498,"./Script/Canadian_Aboriginal.js":1499,"./Script/Carian.js":1500,"./Script/Caucasian_Albanian.js":1501,"./Script/Chakma.js":1502,"./Script/Cham.js":1503,"./Script/Cherokee.js":1504,"./Script/Chorasmian.js":1505,"./Script/Common.js":1506,"./Script/Coptic.js":1507,"./Script/Cuneiform.js":1508,"./Script/Cypriot.js":1509,"./Script/Cyrillic.js":1510,"./Script/Deseret.js":1511,"./Script/Devanagari.js":1512,"./Script/Dives_Akuru.js":1513,"./Script/Dogra.js":1514,"./Script/Duployan.js":1515,"./Script/Egyptian_Hieroglyphs.js":1516,"./Script/Elbasan.js":1517,"./Script/Elymaic.js":1518,"./Script/Ethiopic.js":1519,"./Script/Georgian.js":1520,"./Script/Glagolitic.js":1521,"./Script/Gothic.js":1522,"./Script/Grantha.js":1523,"./Script/Greek.js":1524,"./Script/Gujarati.js":1525,"./Script/Gunjala_Gondi.js":1526,"./Script/Gurmukhi.js":1527,"./Script/Han.js":1528,"./Script/Hangul.js":1529,"./Script/Hanifi_Rohingya.js":1530,"./Script/Hanunoo.js":1531,"./Script/Hatran.js":1532,"./Script/Hebrew.js":1533,"./Script/Hiragana.js":1534,"./Script/Imperial_Aramaic.js":1535,"./Script/Inherited.js":1536,"./Script/Inscriptional_Pahlavi.js":1537,"./Script/Inscriptional_Parthian.js":1538,"./Script/Javanese.js":1539,"./Script/Kaithi.js":1540,"./Script/Kannada.js":1541,"./Script/Katakana.js":1542,"./Script/Kayah_Li.js":1543,"./Script/Kharoshthi.js":1544,"./Script/Khitan_Small_Script.js":1545,"./Script/Khmer.js":1546,"./Script/Khojki.js":1547,"./Script/Khudawadi.js":1548,"./Script/Lao.js":1549,"./Script/Latin.js":1550,"./Script/Lepcha.js":1551,"./Script/Limbu.js":1552,"./Script/Linear_A.js":1553,"./Script/Linear_B.js":1554,"./Script/Lisu.js":1555,"./Script/Lycian.js":1556,"./Script/Lydian.js":1557,"./Script/Mahajani.js":1558,"./Script/Makasar.js":1559,"./Script/Malayalam.js":1560,"./Script/Mandaic.js":1561,"./Script/Manichaean.js":1562,"./Script/Marchen.js":1563,"./Script/Masaram_Gondi.js":1564,"./Script/Medefaidrin.js":1565,"./Script/Meetei_Mayek.js":1566,"./Script/Mende_Kikakui.js":1567,"./Script/Meroitic_Cursive.js":1568,"./Script/Meroitic_Hieroglyphs.js":1569,"./Script/Miao.js":1570,"./Script/Modi.js":1571,"./Script/Mongolian.js":1572,"./Script/Mro.js":1573,"./Script/Multani.js":1574,"./Script/Myanmar.js":1575,"./Script/Nabataean.js":1576,"./Script/Nandinagari.js":1577,"./Script/New_Tai_Lue.js":1578,"./Script/Newa.js":1579,"./Script/Nko.js":1580,"./Script/Nushu.js":1581,"./Script/Nyiakeng_Puachue_Hmong.js":1582,"./Script/Ogham.js":1583,"./Script/Ol_Chiki.js":1584,"./Script/Old_Hungarian.js":1585,"./Script/Old_Italic.js":1586,"./Script/Old_North_Arabian.js":1587,"./Script/Old_Permic.js":1588,"./Script/Old_Persian.js":1589,"./Script/Old_Sogdian.js":1590,"./Script/Old_South_Arabian.js":1591,"./Script/Old_Turkic.js":1592,"./Script/Oriya.js":1593,"./Script/Osage.js":1594,"./Script/Osmanya.js":1595,"./Script/Pahawh_Hmong.js":1596,"./Script/Palmyrene.js":1597,"./Script/Pau_Cin_Hau.js":1598,"./Script/Phags_Pa.js":1599,"./Script/Phoenician.js":1600,"./Script/Psalter_Pahlavi.js":1601,"./Script/Rejang.js":1602,"./Script/Runic.js":1603,"./Script/Samaritan.js":1604,"./Script/Saurashtra.js":1605,"./Script/Sharada.js":1606,"./Script/Shavian.js":1607,"./Script/Siddham.js":1608,"./Script/SignWriting.js":1609,"./Script/Sinhala.js":1610,"./Script/Sogdian.js":1611,"./Script/Sora_Sompeng.js":1612,"./Script/Soyombo.js":1613,"./Script/Sundanese.js":1614,"./Script/Syloti_Nagri.js":1615,"./Script/Syriac.js":1616,"./Script/Tagalog.js":1617,"./Script/Tagbanwa.js":1618,"./Script/Tai_Le.js":1619,"./Script/Tai_Tham.js":1620,"./Script/Tai_Viet.js":1621,"./Script/Takri.js":1622,"./Script/Tamil.js":1623,"./Script/Tangut.js":1624,"./Script/Telugu.js":1625,"./Script/Thaana.js":1626,"./Script/Thai.js":1627,"./Script/Tibetan.js":1628,"./Script/Tifinagh.js":1629,"./Script/Tirhuta.js":1630,"./Script/Ugaritic.js":1631,"./Script/Vai.js":1632,"./Script/Wancho.js":1633,"./Script/Warang_Citi.js":1634,"./Script/Yezidi.js":1635,"./Script/Yi.js":1636,"./Script/Zanabazar_Square.js":1637,"./Script_Extensions/Adlam.js":1638,"./Script_Extensions/Ahom.js":1639,"./Script_Extensions/Anatolian_Hieroglyphs.js":1640,"./Script_Extensions/Arabic.js":1641,"./Script_Extensions/Armenian.js":1642,"./Script_Extensions/Avestan.js":1643,"./Script_Extensions/Balinese.js":1644,"./Script_Extensions/Bamum.js":1645,"./Script_Extensions/Bassa_Vah.js":1646,"./Script_Extensions/Batak.js":1647,"./Script_Extensions/Bengali.js":1648,"./Script_Extensions/Bhaiksuki.js":1649,"./Script_Extensions/Bopomofo.js":1650,"./Script_Extensions/Brahmi.js":1651,"./Script_Extensions/Braille.js":1652,"./Script_Extensions/Buginese.js":1653,"./Script_Extensions/Buhid.js":1654,"./Script_Extensions/Canadian_Aboriginal.js":1655,"./Script_Extensions/Carian.js":1656,"./Script_Extensions/Caucasian_Albanian.js":1657,"./Script_Extensions/Chakma.js":1658,"./Script_Extensions/Cham.js":1659,"./Script_Extensions/Cherokee.js":1660,"./Script_Extensions/Chorasmian.js":1661,"./Script_Extensions/Common.js":1662,"./Script_Extensions/Coptic.js":1663,"./Script_Extensions/Cuneiform.js":1664,"./Script_Extensions/Cypriot.js":1665,"./Script_Extensions/Cyrillic.js":1666,"./Script_Extensions/Deseret.js":1667,"./Script_Extensions/Devanagari.js":1668,"./Script_Extensions/Dives_Akuru.js":1669,"./Script_Extensions/Dogra.js":1670,"./Script_Extensions/Duployan.js":1671,"./Script_Extensions/Egyptian_Hieroglyphs.js":1672,"./Script_Extensions/Elbasan.js":1673,"./Script_Extensions/Elymaic.js":1674,"./Script_Extensions/Ethiopic.js":1675,"./Script_Extensions/Georgian.js":1676,"./Script_Extensions/Glagolitic.js":1677,"./Script_Extensions/Gothic.js":1678,"./Script_Extensions/Grantha.js":1679,"./Script_Extensions/Greek.js":1680,"./Script_Extensions/Gujarati.js":1681,"./Script_Extensions/Gunjala_Gondi.js":1682,"./Script_Extensions/Gurmukhi.js":1683,"./Script_Extensions/Han.js":1684,"./Script_Extensions/Hangul.js":1685,"./Script_Extensions/Hanifi_Rohingya.js":1686,"./Script_Extensions/Hanunoo.js":1687,"./Script_Extensions/Hatran.js":1688,"./Script_Extensions/Hebrew.js":1689,"./Script_Extensions/Hiragana.js":1690,"./Script_Extensions/Imperial_Aramaic.js":1691,"./Script_Extensions/Inherited.js":1692,"./Script_Extensions/Inscriptional_Pahlavi.js":1693,"./Script_Extensions/Inscriptional_Parthian.js":1694,"./Script_Extensions/Javanese.js":1695,"./Script_Extensions/Kaithi.js":1696,"./Script_Extensions/Kannada.js":1697,"./Script_Extensions/Katakana.js":1698,"./Script_Extensions/Kayah_Li.js":1699,"./Script_Extensions/Kharoshthi.js":1700,"./Script_Extensions/Khitan_Small_Script.js":1701,"./Script_Extensions/Khmer.js":1702,"./Script_Extensions/Khojki.js":1703,"./Script_Extensions/Khudawadi.js":1704,"./Script_Extensions/Lao.js":1705,"./Script_Extensions/Latin.js":1706,"./Script_Extensions/Lepcha.js":1707,"./Script_Extensions/Limbu.js":1708,"./Script_Extensions/Linear_A.js":1709,"./Script_Extensions/Linear_B.js":1710,"./Script_Extensions/Lisu.js":1711,"./Script_Extensions/Lycian.js":1712,"./Script_Extensions/Lydian.js":1713,"./Script_Extensions/Mahajani.js":1714,"./Script_Extensions/Makasar.js":1715,"./Script_Extensions/Malayalam.js":1716,"./Script_Extensions/Mandaic.js":1717,"./Script_Extensions/Manichaean.js":1718,"./Script_Extensions/Marchen.js":1719,"./Script_Extensions/Masaram_Gondi.js":1720,"./Script_Extensions/Medefaidrin.js":1721,"./Script_Extensions/Meetei_Mayek.js":1722,"./Script_Extensions/Mende_Kikakui.js":1723,"./Script_Extensions/Meroitic_Cursive.js":1724,"./Script_Extensions/Meroitic_Hieroglyphs.js":1725,"./Script_Extensions/Miao.js":1726,"./Script_Extensions/Modi.js":1727,"./Script_Extensions/Mongolian.js":1728,"./Script_Extensions/Mro.js":1729,"./Script_Extensions/Multani.js":1730,"./Script_Extensions/Myanmar.js":1731,"./Script_Extensions/Nabataean.js":1732,"./Script_Extensions/Nandinagari.js":1733,"./Script_Extensions/New_Tai_Lue.js":1734,"./Script_Extensions/Newa.js":1735,"./Script_Extensions/Nko.js":1736,"./Script_Extensions/Nushu.js":1737,"./Script_Extensions/Nyiakeng_Puachue_Hmong.js":1738,"./Script_Extensions/Ogham.js":1739,"./Script_Extensions/Ol_Chiki.js":1740,"./Script_Extensions/Old_Hungarian.js":1741,"./Script_Extensions/Old_Italic.js":1742,"./Script_Extensions/Old_North_Arabian.js":1743,"./Script_Extensions/Old_Permic.js":1744,"./Script_Extensions/Old_Persian.js":1745,"./Script_Extensions/Old_Sogdian.js":1746,"./Script_Extensions/Old_South_Arabian.js":1747,"./Script_Extensions/Old_Turkic.js":1748,"./Script_Extensions/Oriya.js":1749,"./Script_Extensions/Osage.js":1750,"./Script_Extensions/Osmanya.js":1751,"./Script_Extensions/Pahawh_Hmong.js":1752,"./Script_Extensions/Palmyrene.js":1753,"./Script_Extensions/Pau_Cin_Hau.js":1754,"./Script_Extensions/Phags_Pa.js":1755,"./Script_Extensions/Phoenician.js":1756,"./Script_Extensions/Psalter_Pahlavi.js":1757,"./Script_Extensions/Rejang.js":1758,"./Script_Extensions/Runic.js":1759,"./Script_Extensions/Samaritan.js":1760,"./Script_Extensions/Saurashtra.js":1761,"./Script_Extensions/Sharada.js":1762,"./Script_Extensions/Shavian.js":1763,"./Script_Extensions/Siddham.js":1764,"./Script_Extensions/SignWriting.js":1765,"./Script_Extensions/Sinhala.js":1766,"./Script_Extensions/Sogdian.js":1767,"./Script_Extensions/Sora_Sompeng.js":1768,"./Script_Extensions/Soyombo.js":1769,"./Script_Extensions/Sundanese.js":1770,"./Script_Extensions/Syloti_Nagri.js":1771,"./Script_Extensions/Syriac.js":1772,"./Script_Extensions/Tagalog.js":1773,"./Script_Extensions/Tagbanwa.js":1774,"./Script_Extensions/Tai_Le.js":1775,"./Script_Extensions/Tai_Tham.js":1776,"./Script_Extensions/Tai_Viet.js":1777,"./Script_Extensions/Takri.js":1778,"./Script_Extensions/Tamil.js":1779,"./Script_Extensions/Tangut.js":1780,"./Script_Extensions/Telugu.js":1781,"./Script_Extensions/Thaana.js":1782,"./Script_Extensions/Thai.js":1783,"./Script_Extensions/Tibetan.js":1784,"./Script_Extensions/Tifinagh.js":1785,"./Script_Extensions/Tirhuta.js":1786,"./Script_Extensions/Ugaritic.js":1787,"./Script_Extensions/Vai.js":1788,"./Script_Extensions/Wancho.js":1789,"./Script_Extensions/Warang_Citi.js":1790,"./Script_Extensions/Yezidi.js":1791,"./Script_Extensions/Yi.js":1792,"./Script_Extensions/Zanabazar_Square.js":1793,"./index.js":1794,"./unicode-version.js":1795};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1390},188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(950),n(958),n(960);var r=n(966);n(635);var a=n(967),i=n(968),s=n(637),o=n(969),u=n(970),c=n(971);n(974),n(975),n(976),n(977),n(490),n(980),n(985),n(987),n(988),n(649),n(991),n(992),n(995),n(996),n(997),n(999),n(1002);var l=n(1003),p=n(636),d=n(1007),m=n(1009),f=n(2211),h=n(658),y=n(1013);n(1014);var b=n(1019);n(1020),n(1021);var g=n(1023),v=n(1024),j=n(660),S=n(1026);function x(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var E=x(r),k=x(a),_=x(i),C=x(s),O=x(o),w=x(u),P=x(c),T=x(l),M=x(p),D=x(d),A=x(m),R=x(h),q=x(y),L=x(b),B=x(g),I=x(v),N=x(j),Q=x(S),F=q.default.extendMoment(R.default),G={day:function(e){return Array.from(e.by("day")).map((function(e){return e.format("YYYY-MM-DDT00:00:00.000")}))},month:function(e){return Array.from(e.snapTo("month").by("month")).map((function(e){return e.format("YYYY-MM-01T00:00:00.000")}))},year:function(e){return Array.from(e.snapTo("year").by("year")).map((function(e){return e.format("YYYY-01-01T00:00:00.000")}))},hour:function(e){return Array.from(e.by("hour")).map((function(e){return e.format("YYYY-MM-DDTHH:00:00.000")}))},minute:function(e){return Array.from(e.by("minute")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:00.000")}))},second:function(e){return Array.from(e.by("second")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:ss.000")}))},week:function(e){return Array.from(e.snapTo("isoweek").by("week")).map((function(e){return e.startOf("isoweek").format("YYYY-MM-DDT00:00:00.000")}))}},V=/^\d\d\d\d-\d\d-\d\d$/,U=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z?$/,K=function(e){var t=new Map;return function(n){return n.forEach((function(n){var r=e(n);t.has(r)||t.set(r,[]),t.get(r).push(n)})),Array.from(t.entries())}},z={REGULAR_QUERY:"regularQuery",COMPARE_DATE_RANGE_QUERY:"compareDateRangeQuery",BLENDING_QUERY:"blendingQuery"},H=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(O.default(this,e),this.loadResponse=t,null!=this.loadResponse.queryType?(this.queryType=t.queryType,this.loadResponses=t.results):(this.queryType=z.REGULAR_QUERY,this.loadResponse.pivotQuery=_.default(_.default({},t.query),{},{queryType:this.queryType}),this.loadResponses=[t]),!Object.values(z).includes(this.queryType))throw new Error("Unknown query type");this.parseDateMeasures=n.parseDateMeasures,this.options=n,this.backwardCompatibleData=[]}return w.default(e,null,[{key:"measureFromAxis",value:function(e){return e[e.length-1]}},{key:"timeDimensionMember",value:function(e){return"".concat(e.dimension,".").concat(e.granularity)}},{key:"deserialize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(t.loadResponse,n)}}]),w.default(e,[{key:"drillDown",value:function(e,t){if(this.queryType===z.COMPARE_DATE_RANGE_QUERY)throw new Error("compareDateRange drillDown query is not currently supported");if(this.queryType===z.BLENDING_QUERY)throw new Error("Data blending drillDown query is not currently supported");var n=e.xValues,r=void 0===n?[]:n,a=e.yValues,i=void 0===a?[]:a,s=this.normalizePivotConfig(t),o=[];s.x.forEach((function(e,t){return o.push([e,r[t]])})),s.y.forEach((function(e,t){return o.push([e,i[t]])}));var u=this.loadResponses[0].annotation.measures,c=o.find((function(e){return"measues"===A.default(e,1)[0]}))||[],l=A.default(c,2)[1];if(void 0===l){var p=Object.keys(u);l=A.default(p,1)[0]}if(!(u[l]&&u[l].drillMembers||[]).length)return null;var d=[{member:l,operator:"measureFilter"}],m=[];return o.filter((function(e){return"measures"!==A.default(e,1)[0]})).forEach((function(e){var t=A.default(e,2),n=t[0],r=t[1],a=n.split("."),i=A.default(a,3),s=i[0],o=i[1],u=i[2];if(void 0!==u){var c=F.range(r,r).snapTo(u);m.push({dimension:[s,o].join("."),dateRange:[c.start,c.end].map((function(e){return e.format(F.HTML5_FMT.DATETIME_LOCAL_MS)}))})}else d.push({member:n,operator:"equals",values:[r.toString()]})})),_.default(_.default({},u[l].drillMembersGrouped),{},{filters:d,timeDimensions:m,timezone:this.loadResponses[0].query.timezone})}},{key:"series",value:function(e){var t=this;return this.seriesNames(e).map((function(n){var r=n.title,a=n.key;return{title:r,key:a,series:t.chartPivot(e).map((function(e){var t=e.category,n=e.x;return{value:D.default(e,["category","x"])[a],category:t,x:n}}))}}))}},{key:"axisValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.loadResponses[t].query;return function(t){var r=function(n){return e.filter((function(e){return"measures"!==e})).map((function(e){return null!=t[e]?t[e]:null})).concat(n?[n]:[])};return e.find((function(e){return"measures"===e}))&&(n.measures||[]).length?n.measures.map(r):[r()]}}},{key:"axisValuesString",value:function(e,t){return e.map((function(e){return null==e?"âˆ…":""===e?"[Empty string]":e})).join(t||", ")}},{key:"normalizePivotConfig",value:function(t){return e.getNormalizedPivotConfig(this.loadResponse.pivotQuery,t)}},{key:"timeSeries",value:function(t){if(!t.granularity)return null;var n=t.dateRange;if(!n){var r=f.pipe(f.map((function(n){return n[e.timeDimensionMember(t)]&&F(n[e.timeDimensionMember(t)])})),f.filter((function(e){return!!e})))(this.timeDimensionBackwardCompatibleData());n=r.length&&[f.reduce(f.minBy((function(e){return e.toDate()})),r[0],r),f.reduce(f.maxBy((function(e){return e.toDate()})),r[0],r)]||null}if(!n)return null;var a=t.dateRange?t.dateRange.find((function(e){return e.match(V)})):!["hour","minute","second"].includes(t.granularity),i=n,s=A.default(i,2),o=s[0],u=s[1],c=F.range(o,u);if(!G[t.granularity])throw new Error("Unsupported time granularity: ".concat(t.granularity));return G[t.granularity](a?c.snapTo("day"):c)}},{key:"pivot",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=this.loadResponse.pivotQuery,a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=K((function(e){var t=e.xValues;return n.axisValuesString(t)})),s=function(e,t){return e[t]};if(t.fillMissingDates&&1===t.x.length&&f.equals(t.x,(r.timeDimensions||[]).filter((function(e){return!!e.granularity})).map((function(t){return e.timeDimensionMember(t)})))){var o=n.loadResponses.map((function(e){return n.timeSeries(e.query.timeDimensions[0])}));o[0]&&(i=function(e){var t=f.groupBy((function(e){var t=e.xValues;return F(t[0]).format(F.HTML5_FMT.DATETIME_LOCAL_MS)}),e);return o[a].map((function(e){return[e,t[e]||[{xValues:[e],row:{}}]]}))},s=function(e,t){return e[t]||0})}var u=f.pipe(f.map((function(e){return n.axisValues(t.x,a)(e).map((function(t){return{xValues:t,row:e}}))})),f.unnest,i)(n.timeDimensionBackwardCompatibleData(a)),c=f.pipe(f.map((function(e){var r=A.default(e,2)[1];return f.unnest(r.filter((function(e){var t=e.row;return Object.keys(t).length>0})).map((function(e){var r=e.row;return n.axisValues(t.y,a)(r)})))})),f.unnest,f.uniq)(u);return u.map((function(r){var i=A.default(r,2)[1],o=i[0].xValues,u=f.pipe(f.map((function(e){var r=e.row;return n.axisValues(t.y,a)(r).map((function(e){return{yValues:e,row:r}}))})),f.unnest,f.groupBy((function(e){var t=e.yValues;return n.axisValuesString(t)})))(i);return{xValues:o,yValuesArray:f.unnest(c.map((function(r){var a=t.x.find((function(e){return"measures"===e}))?e.measureFromAxis(o):e.measureFromAxis(r);return(u[n.axisValuesString(r)]||[{row:{}}]).map((function(e){var t=e.row;return[r,s(t,a)]}))})))}}))},i=this.loadResponses.length>1?this.loadResponses.map((function(e,t){return a(t)})):[];return i.length?this.mergePivots(i,t.joinDateRange):a()}},{key:"mergePivots",value:function(e,t){var n=e.reduce((function(e,t){return null!=e&&t.length>=e.length?e:t}),null);return n.map((function(r,a){return{xValues:t?[e.map((function(e){return e[a]&&e[a].xValues||[]})).join(", ")]:n[a].xValues,yValuesArray:f.unnest(e.map((function(e){return e[a].yValuesArray})))}}))}},{key:"pivotedRows",value:function(e){return this.chartPivot(e)}},{key:"chartPivot",value:function(e){var t=this;return this.pivot(e).map((function(e){var n=e.xValues,r=e.yValuesArray;return _.default({category:t.axisValuesString(n,","),x:t.axisValuesString(n,","),xValues:n},r.map((function(e){var n,r=A.default(e,2),a=r[0],i=r[1];return M.default({},t.axisValuesString(a,","),i&&(n=i,t.parseDateMeasures&&U.test(n)?new Date(n):Number.isNaN(Number.parseFloat(n))?n:Number.parseFloat(n)))})).reduce((function(e,t){return Object.assign(e,t)}),{}))}))}},{key:"tablePivot",value:function(e){var t=this.normalizePivotConfig(e||{}),n=t.x.concat(t.y).includes("measures");return this.pivot(t).map((function(e){var r=e.xValues,a=e.yValuesArray;return f.fromPairs(t.x.map((function(e,t){return[e,r[t]]})).concat(n?a.map((function(e){var t=A.default(e,2),n=t[0],r=t[1];return[n.length?n.join():"value",r]})):[]))}))}},{key:"tableColumns",value:function(e){var t=this.normalizePivotConfig(e||{}),n=A.default(this.loadResponses,1)[0].annotation,r=Object.values(n).reduce((function(e,t){return _.default(_.default({},e),t)}),{}),a={},i=function(e){var t=r[e]||{};return{key:e,title:t.title,shortTitle:t.shortTitle,type:t.type,format:t.format,meta:t.meta}},s=this.pivot(t);(s[0]&&s[0].yValuesArray||[]).forEach((function(e){var n=A.default(e,1)[0];if(n.length>0){var r=a;n.forEach((function(e,n){r[e]={key:e,memberId:"measures"===t.y[n]?e:t.y[n],children:r[e]&&r[e].children||{}},r=r[e].children}))}}));var o=[];return!s.length&&t.y.includes("measures")&&(o=(this.loadResponses[0].query.measures||[]).map((function(e){return _.default(_.default({},i(e)),{},{dataIndex:e})}))),!t.y.length&&t.x.includes("measures")&&o.push({key:"value",dataIndex:"value",title:"Value",shortTitle:"Value",type:"string"}),t.x.map((function(e){return"measures"===e?{key:"measures",dataIndex:"measures",title:"Measures",shortTitle:"Measures",type:"string"}:_.default(_.default({},i(e)),{},{dataIndex:e})})).concat(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0===Object.keys(t).length?[]:Object.values(t).map((function(t){var r=t.key,a=D.default(t,["key"]),s=e(a.children,[].concat(T.default(n),[r])),o=i(a.memberId),u=o.title,c=o.shortTitle,l=D.default(o,["title","shortTitle"]),p=r!==a.memberId||null==u?r:"";return s.length?_.default(_.default({},l),{},{key:r,title:[u,p].join(" ").trim(),shortTitle:p||c,children:s}):_.default(_.default({},l),{},{key:r,dataIndex:[].concat(T.default(n),[r]).join(),title:[u,p].join(" ").trim(),shortTitle:p||c})}))}(a)).concat(o)}},{key:"totalRow",value:function(){return this.chartPivot()[0]}},{key:"categories",value:function(e){return this.chartPivot(e)}},{key:"seriesNames",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=A.default(this.loadResponses,1)[0].annotation,a=f.unnest(this.loadResponses.map((function(e,r){return f.pipe(f.map(n.axisValues(t.y)),f.unnest,f.uniq)(n.timeDimensionBackwardCompatibleData(r))})));return a.map((function(a){return{title:n.axisValuesString(t.y.find((function(e){return"measures"===e}))?f.dropLast(1,a).concat(r.measures[e.measureFromAxis(a)].title):a,", "),key:n.axisValuesString(a,","),yValues:a}}))}},{key:"query",value:function(){if(this.queryType!==z.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].query}},{key:"rawData",value:function(){if(this.queryType!==z.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].data}},{key:"annotation",value:function(){if(this.queryType!==z.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].annotation}},{key:"timeDimensionBackwardCompatibleData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.backwardCompatibleData[t]){var n=this.loadResponses[t],r=n.data,a=n.query,i=(a.timeDimensions||[]).filter((function(e){return!!e.granularity}));this.backwardCompatibleData[t]=r.map((function(t){return _.default(_.default({},t),f.fromPairs(Object.keys(t).filter((function(n){return i.find((function(e){return e.dimension===n}))&&!t[e.timeDimensionMember(i.find((function(e){return e.dimension===n})))]})).map((function(n){return[e.timeDimensionMember(i.find((function(e){return e.dimension===n}))),t[n]]}))))}))}return this.backwardCompatibleData[t]}},{key:"decompose",value:function(){var t=this;return this.loadResponses.map((function(n){return new e({queryType:z.REGULAR_QUERY,pivotQuery:_.default(_.default({},n.query),{},{queryType:z.REGULAR_QUERY}),results:[n]},t.options)}))}},{key:"serialize",value:function(){return{loadResponse:f.clone(this.loadResponse)}}}],[{key:"getNormalizedPivotConfig",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={x:[],y:[],fillMissingDates:!0,joinDateRange:!1},a=t.measures,i=void 0===a?[]:a,s=t.dimensions,o=void 0===s?[]:s,u=(t.timeDimensions||[]).filter((function(e){return!!e.granularity}));n=n||(u.length?{x:u.map((function(t){return e.timeDimensionMember(t)})),y:o}:{x:o,y:[]});var c=function(n){return n.map((function(n){return u.find((function(e){return e.dimension===n}))&&!o.find((function(e){return e===n}))?e.timeDimensionMember(t.timeDimensions.find((function(e){return e.dimension===n}))):n}))};(n=f.mergeDeepLeft(n,r)).x=c(n.x),n.y=c(n.y);var l=n.x.concat(n.y),p=u.map((function(t){return e.timeDimensionMember(t)})).concat(o),d=function(e){return p.includes(e)||"measures"===e};return n.x=n.x.concat(p.filter((function(e){return!l.includes(e)}))).filter(d),n.y=n.y.filter(d),n.x.concat(n.y).find((function(e){return"measures"===e}))||n.y.push("measures"),i.length||(n.x=n.x.filter((function(e){return"measures"!==e})),n.y=n.y.filter((function(e){return"measures"!==e}))),n}}]),e}(),Y=function(){function e(t){O.default(this,e),this.sqlQuery=t}return w.default(e,[{key:"rawQuery",value:function(){return this.sqlQuery.sql}},{key:"sql",value:function(){return this.rawQuery().sql[0]}}]),e}(),W=function(e){return f.fromPairs(e.map((function(e){return[e.name,e]})))},J={string:[{name:"contains",title:"contains"},{name:"notContains",title:"does not contain"},{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"}],number:[{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"},{name:"gt",title:">"},{name:"gte",title:">="},{name:"lt",title:"<"},{name:"lte",title:"<="}]},$=function(){function e(t){O.default(this,e),this.meta=t;var n=this.meta.cubes;this.cubes=n,this.cubesMap=f.fromPairs(n.map((function(e){return[e.name,{measures:W(e.measures),dimensions:W(e.dimensions),segments:W(e.segments)}]})))}return w.default(e,[{key:"membersForQuery",value:function(e,t){return f.unnest(this.cubes.map((function(e){return e[t]})))}},{key:"resolveMember",value:function(e,t){var n=this,r=e.split("."),a=A.default(r,1)[0];if(!this.cubesMap[a])return{title:e,error:"Cube not found ".concat(a," for path '").concat(e,"'")};var i=(Array.isArray(t)?t:[t]).map((function(t){return n.cubesMap[a][t]&&n.cubesMap[a][t][e]})).find((function(e){return e}));return i||{title:e,error:"Path not found '".concat(e,"'")}}},{key:"defaultTimeDimensionNameFor",value:function(e){var t=this,n=e.split("."),r=A.default(n,1)[0];return this.cubesMap[r]?Object.keys(this.cubesMap[r].dimensions||{}).find((function(e){return"time"===t.cubesMap[r].dimensions[e].type})):null}},{key:"filterOperatorsForMember",value:function(e,t){var n=this.resolveMember(e,t);return J[n.type]||J.string}}]),e}(),X=function(){function e(t){O.default(this,e),this.progressResponse=t}return w.default(e,[{key:"stage",value:function(){return this.progressResponse.stage}},{key:"timeElapsed",value:function(){return this.progressResponse.timeElapsed}}]),e}(),Z=function(){function e(t){var n=t.authorization,r=t.apiUrl,a=t.headers,i=void 0===a?{}:a,s=t.credentials;O.default(this,e),this.authorization=n,this.apiUrl=r,this.headers=i,this.credentials=s}return w.default(e,[{key:"request",value:function(e,t){var n=this,r=t.baseRequestId,a=D.default(t,["baseRequestId"]),i=new URLSearchParams(a&&Object.keys(a).map((function(e){return M.default({},e,"object"===C.default(a[e])?JSON.stringify(a[e]):a[e])})).reduce((function(e,t){return _.default(_.default({},e),t)}),{})),s=1;return{subscribe:function(t){var a=this;return k.default(E.default.mark((function o(){var u;return E.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,L.default("".concat(n.apiUrl,"/").concat(e).concat(i.toString().length?"?".concat(i):""),{headers:_.default({Authorization:n.authorization,"x-request-id":r&&"".concat(r,"-span-").concat(s++)},n.headers),credentials:n.credentials});case 2:return u=o.sent,o.abrupt("return",t(u,(function(){return a.subscribe(t)})));case 4:case"end":return o.stop()}}),o)})))()}}}}]),e}();var ee=function(e){B.default(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=N.default(e);if(t()){var a=N.default(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return I.default(this,n)}}(n);function n(e,r){var a;return O.default(this,n),(a=t.call(this,e)).response=r,a}return n}(Q.default(Error)),te=0,ne="Mutex has been changed",re=function(){function e(t,n){O.default(this,e),"object"===C.default(t)&&(n=t,t=void 0),n=n||{},this.apiToken=t,this.apiUrl=n.apiUrl||"https://statsbot.co/cubejs-api/v1",this.headers=n.headers||{},this.credentials=n.credentials,this.transport=n.transport||new Z({authorization:"function"==typeof t?void 0:t,apiUrl:this.apiUrl,headers:this.headers,credentials:this.credentials}),this.pollInterval=n.pollInterval||5,this.parseDateMeasures=n.parseDateMeasures}var t;return w.default(e,[{key:"request",value:function(e,t){return this.transport.request(e,_.default({baseRequestId:P.default()},t))}},{key:"loadMethod",value:function(e,t,n,r){var a=this,i=++te;"function"!=typeof n||r||(r=n,n=void 0);var s=(n=n||{}).mutexKey||"default";n.mutexObj&&(n.mutexObj[s]=i);var o,u=this.updateTransportAuthorization().then((function(){return e()})),c=!1,l=function(){var e=k.default(E.default.mark((function e(){var t;return E.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u;case 2:if(t=e.sent,!n.mutexObj||n.mutexObj[s]===i){e.next=9;break}if(c=!0,!t.unsubscribe){e.next=8;break}return e.next=8,t.unsubscribe();case 8:throw ne;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=k.default(E.default.mark((function e(i,s){var o,p,d,m,f,h;return E.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u;case 2:return o=e.sent,p=function(){var e=k.default(E.default.mark((function e(){return E.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.subscribe||c){e.next=8;break}if(!o.unsubscribe){e.next=5;break}return e.abrupt("return",s());case 5:return e.next=7,new Promise((function(e){return setTimeout((function(){return e()}),1e3*a.pollInterval)}));case 7:return e.abrupt("return",s());case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=k.default(E.default.mark((function e(t){return E.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=5;break}if(!t){e.next=4;break}return e.next=4,new Promise((function(e){return setTimeout((function(){return e()}),1e3*a.pollInterval)}));case 4:return e.abrupt("return",s());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=7,a.updateTransportAuthorization();case 7:if(502!==i.status){e.next=11;break}return e.next=10,l();case 10:return e.abrupt("return",d(!0));case 11:return e.next=13,i.json();case 13:if("Continue wait"!==(m=e.sent).error){e.next=19;break}return e.next=17,l();case 17:return n.progressCallback&&n.progressCallback(new X(m)),e.abrupt("return",d());case 19:if(200===i.status){e.next=32;break}return e.next=22,l();case 22:if(n.subscribe||!o.unsubscribe){e.next=25;break}return e.next=25,o.unsubscribe();case 25:if(f=new ee(m.error,m),!r){e.next=30;break}r(f),e.next=31;break;case 30:throw f;case 31:return e.abrupt("return",p());case 32:return e.next=34,l();case 34:if(n.subscribe||!o.unsubscribe){e.next=37;break}return e.next=37,o.unsubscribe();case 37:if(h=t(m),!r){e.next=42;break}r(null,h),e.next=43;break;case 42:return e.abrupt("return",h);case 43:return e.abrupt("return",p());case 44:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=u.then((function(e){return function(e){return new Promise((function(t,n){e.then((function(e){return t(e)}),(function(e){return e!==ne&&n(e)}))}))}(e.subscribe(p))}));return r?{unsubscribe:(o=k.default(E.default.mark((function e(){var t;return E.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u;case 2:if(t=e.sent,c=!0,!t.unsubscribe){e.next=6;break}return e.abrupt("return",t.unsubscribe());case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}:d}},{key:"updateTransportAuthorization",value:(t=k.default(E.default.mark((function e(){var t;return E.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.apiToken){e.next=5;break}return e.next=3,this.apiToken();case 3:t=e.sent,this.transport.authorization!==t&&(this.transport.authorization=t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"load",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("load",{query:e,queryType:"multi"})}),(function(e){return new H(e,{parseDateMeasures:r.parseDateMeasures})}),t,n)}},{key:"sql",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("sql",{query:e})}),(function(e){return Array.isArray(e)?e.map((function(e){return new Y(e)})):new Y(e)}),t,n)}},{key:"meta",value:function(e,t){var n=this;return this.loadMethod((function(){return n.request("meta")}),(function(e){return new $(e)}),e,t)}},{key:"dryRun",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("dry-run",{query:e})}),(function(e){return e}),t,n)}},{key:"subscribe",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("subscribe",{query:e})}),(function(e){return new H(e,{parseDateMeasures:r.parseDateMeasures})}),_.default(_.default({},t),{},{subscribe:!0}),n)}}]),e}();t.HttpTransport=Z,t.ResultSet=H,t.default=function(e,t){return new re(e,t)}},1908:function(e,t,n){},2136:function(e,t,n){},2137:function(e,t,n){},2212:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"CubeContext",(function(){return je})),n.d(r,"CubeProvider",(function(){return Ce})),n.d(r,"QueryBuilder",(function(){return _e})),n.d(r,"QueryRenderer",(function(){return Se})),n.d(r,"QueryRendererWithTotals",(function(){return xe})),n.d(r,"isQueryPresent",(function(){return ve})),n.d(r,"useCubeQuery",(function(){return we}));var a={};n.r(a),n.d(a,"sourceCodeTemplate",(function(){return xt})),n.d(a,"imports",(function(){return Et}));var i={};n.r(i),n.d(i,"sourceCodeTemplate",(function(){return Ct})),n.d(i,"imports",(function(){return Ot}));var s={};n.r(s),n.d(s,"sourceCodeTemplate",(function(){return Tt})),n.d(s,"imports",(function(){return Mt}));var o={};n.r(o),n.d(o,"sourceCodeTemplate",(function(){return Bt})),n.d(o,"imports",(function(){return It}));var u={};n.r(u),n.d(u,"sourceCodeTemplate",(function(){return Qt})),n.d(u,"imports",(function(){return Ft}));var c=n(0),l=n.n(c),p=n(12),d=n.n(p),m=n(73),f=n(122),h=n(28),y=n.n(h),b=n(52),g=n(91),v=n(92),j=n(102),S=n(101),x=n(145),E=n(210),k=function(e){Object(j.a)(a,e);var t,n,r=Object(S.a)(a);function a(e){var t;return Object(g.a)(this,a),(t=r.call(this,e)).state={},t}return Object(v.a)(a,[{key:"componentDidMount",value:(n=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFiles();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadFiles",value:(t=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return this.state.files?l.a.createElement(m.a,{to:!this.state.files.length||1===this.state.files.length&&"Orders.js"===this.state.files[0].fileName?"/schema":"/build"}):l.a.createElement("div",{style:{textAlign:"center",padding:24}},l.a.createElement(E.a,null))}}]),a}(c.Component),_=n(188),C=n.n(_),O=n(43),w=n(222),P=function e(t,n){var r=n||{},a=r.retries,i=Object(w.a)(r,["retries"]);return a=a||0,Object(x.a)(t,i).then(function(){var e=Object(b.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=6;break}return e.next=3,t.text();case 3:n=e.sent;try{r=JSON.parse(n),n=r.error}catch(e){}throw n;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(r){if("Network request failed"===r.message&&a>0)return e(t,{options:n,retries:a-1});throw r}))},T=function(e,t,n){return P(e,Object(O.a)(Object(O.a)({},t),{},{retries:n}))},M=function(){function e(){Object(g.a)(this,e)}var t,n,r,a,i,s;return Object(v.a)(e,[{key:"load",value:(s=Object(b.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadError=null,e.next=3,T("/playground/dashboard-app-create-status".concat(t?"?instant=true":""),void 0,10);case 3:return n=e.sent,e.next=6,n.json();case 6:(r=e.sent).error?this.loadError=r.error:(this.dashboardCreated="created"===r.status,this.installedTemplates=r.installedTemplates);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"applyTemplatePackages",value:(i=Object(b.a)(y.a.mark((function e(t){var n,r=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:null,this.playgroundContext){e.next=5;break}return e.next=4,this.loadContext();case 4:this.playgroundContext=e.sent;case 5:return e.abrupt("return",T("/playground/apply-template-packages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toApply:t,templateConfig:n||{credentials:this.playgroundContext}})}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"loadContext",value:(a=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",{cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"canAddChart",value:(r=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!this.loadError){e.next=4;break}return e.abrupt("return",this.loadError);case 4:return e.abrupt("return",!!Object.keys(this.installedTemplates).find((function(e){return e.match(/-static$/)})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"addChart",value:(n=Object(b.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!this.loadError){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.applyTemplatePackages(["create-react-app",Object.keys(this.installedTemplates).find((function(e){return e.match(/-static$/)})),"static-chart"],{chartCode:t});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"templates",value:(t=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/playground/manifest");case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,n=t.templates,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"templatePackages",get:function(){return[{name:"react-antd-dynamic",description:"React Antd Dynamic"},{name:"react-antd-static",description:"React Antd Static"},{name:"react-material-static",description:"React Material UI Static"}]}}]),e}(),D=n(224),A=n(136),R=n(862),q=n(841),L=n(417),B=n(62),I=n(2226),N=(n(661),n(1043),n(1044),n(1046),n(1061),n(1063),n(1065),n(162)),Q=n.n(N),F=n(14),G=n.n(F),V=n(604),U=n.n(V),K=n(355),z=n.n(K),H=n(605),Y=n.n(H),W=n(606),J=n.n(W),$=n(356),X=n.n($),Z=n(113),ee=n.n(Z),te=n(931),ne=n(2216),re=n(2217),ae=n(2222),ie=n(2221),se=n(2220),oe=n(864),ue=n.n(oe),ce=n(461),le=n.n(ce),pe=(n(1075),n(1076),n(1077),n(1078),n(1079),n(1081),n(1085),n(345)),de=n.n(pe),me=n(260),fe=n.n(me),he=(n(688),n(462)),ye=n.n(he),be=n(261),ge=n.n(be),ve=function(e){return e.measures&&e.measures.length||e.dimensions&&e.dimensions.length||e.timeDimensions&&e.timeDimensions.length},je=Object(Z.createContext)(null);var Se=function(e){Y()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=X()(e);if(t()){var a=X()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J()(this,n)}}(n);function n(e){var r;return U()(this,n),(r=t.call(this,e)).state={},r.mutexObj={},r}return z()(n,null,[{key:"isQueryPresent",value:function(e){return ve(e)}}]),z()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.query,n=e.queries;t&&this.load(t),n&&this.loadQueries(n)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.query,a=n.queries,i=n.render,s=n.cubejsApi,o=n.loadSql,u=n.updateOnlyOnStateChange;return!u||(!Object(te.a)(e.query,r)||!Object(te.a)(e.queries,a)||(null==e.render||null==i)&&e.render!==i||e.cubejsApi!==s||e.loadSql!==o||!Object(te.a)(t,this.state)||e.updateOnlyOnStateChange!==u)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.query,r=t.queries;Object(te.a)(e.query,n)||this.load(n),Object(te.a)(e.queries,r)||this.loadQueries(r)}},{key:"cubejsApi",value:function(){return this.props.cubejsApi||this.context&&this.context.cubejsApi}},{key:"load",value:function(e){var t=this,r=this.props.resetResultSetOnChange;this.setState(G()({isLoading:!0,error:null,sqlQuery:null},r?{resultSet:null}:{}));var a=this.props.loadSql,i=this.cubejsApi();e&&n.isQueryPresent(e)&&("only"===a?i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}).then((function(e){return t.setState({sqlQuery:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(G()(G()({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):a?Promise.all([i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}),i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"})]).then((function(e){var n=Q()(e,2),r=n[0],a=n[1];return t.setState({sqlQuery:r,resultSet:a,error:null,isLoading:!1})})).catch((function(e){return t.setState(G()(G()({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"}).then((function(e){return t.setState({resultSet:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(G()(G()({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})))}},{key:"loadQueries",value:function(e){var t=this,n=this.cubejsApi(),r=this.props.resetResultSetOnChange;this.setState(G()(G()({isLoading:!0},r?{resultSet:null}:{}),{},{error:null})),Promise.all(Object(ne.a)(e).map((function(e){var r=Q()(e,2),a=r[0],i=r[1];return n.load(i,{mutexObj:t.mutexObj,mutexKey:a}).then((function(e){return[a,e]}))}))).then((function(e){return t.setState({resultSet:Object(re.a)(e),error:null,isLoading:!1})})).catch((function(e){return t.setState(G()(G()({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.queries,r=e.resultSet,a=e.isLoading,i=e.sqlQuery,s=this.props.render;return s?s({error:t,resultSet:n?r||{}:r,loadingState:{isLoading:a},sqlQuery:i}):null}}]),n}(ee.a.Component);Se.contextType=je,Se.defaultProps={cubejsApi:null,query:null,render:null,queries:null,loadSql:null,updateOnlyOnStateChange:!1,resetResultSetOnChange:!0};var xe=function(e){var t=e.query,n=le()(e,["query"]);return ee.a.createElement(Se,ue()({queries:{totals:G()(G()({},t),{},{dimensions:[],timeDimensions:t.timeDimensions?t.timeDimensions.map((function(e){return G()(G()({},e),{},{granularity:null})})):void 0}),main:t}},n))};function Ee(e,t,n){var r=ge()(e),a=r.splice(t,1),i=Q()(a,1)[0];return r.splice(n,0,i),r}xe.defaultProps={query:null,render:null,queries:null,loadSql:null};var ke=[{name:void 0,title:"w/o grouping"},{name:"hour",title:"Hour"},{name:"day",title:"Day"},{name:"week",title:"Week"},{name:"month",title:"Month"},{name:"year",title:"Year"}],_e=function(e){Y()(a,e);var t,n,r=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=X()(e);if(t()){var a=X()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J()(this,n)}}(a);function a(e){var t;return U()(this,a),(t=r.call(this,e)).state=G()({query:e.query,chartType:"line",orderMembers:[],pivotConfig:null},e.vizState),t.mutexObj={},t}return z()(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=G()(G()({},t),e.vizState||{});return G()(G()({},n),{},{query:G()(G()({},n.query),e.query||{})})}},{key:"resolveMember",value:function(e,t){var n=t.meta,r=t.query;return n?"timeDimensions"===e?(r.timeDimensions||[]).map((function(e,t){return G()(G()({},e),{},{dimension:G()(G()({},n.resolveMember(e.dimension,"dimensions")),{},{granularities:ke}),index:t})})):(r[e]||[]).map((function(t,r){return G()({index:r},n.resolveMember(t,e))})):[]}},{key:"getOrderMembers",value:function(e){var t=e.query;if(!e.meta)return[];var n=function(e){return{id:e.name,title:e.title}};return Object(ae.a)(Object(ie.a)("id"),[].concat(ge()(a.resolveMember("measures",e).map(n)),ge()(a.resolveMember("dimensions",e).map(n)),ge()(a.resolveMember("timeDimensions",e).map((function(e){return n(e.dimension)})))).map((function(e){return G()(G()({},e),{},{order:t.order&&t.order[e.id]||"none"})})))}}]),z()(a,[{key:"componentDidMount",value:(n=ye()(fe.a.mark((function e(){var t,n,r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.query,r=t.pivotConfig,e.next=3,this.cubejsApi().meta();case 3:i=e.sent,this.setState({meta:i,orderMembers:a.getOrderMembers({meta:i,query:n}),pivotConfig:_.ResultSet.getNormalizedPivotConfig(n||{},r)});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"cubejsApi",value:function(){var e=this.props.cubejsApi;return e||this.context&&this.context.cubejsApi}},{key:"isQueryPresent",value:function(){var e=this.state.query;return Se.isQueryPresent(e)}},{key:"prepareRenderProps",value:function(e){var t=this,n=function(e){return e.name},r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return{add:function(n){var a=t.state.query;t.updateQuery(de()({},e,(a[e]||[]).concat(r(n))))},remove:function(n){var r=(t.state.query[e]||[]).concat([]);return r.splice(n.index,1),t.updateQuery(de()({},e,r))},update:function(n,a){var i=(t.state.query[e]||[]).concat([]);return i.splice(n.index,1,r(a)),t.updateQuery(de()({},e,i))}}},i=this.state,s=i.meta,o=i.query,u=i.orderMembers,c=void 0===u?[]:u,l=i.chartType,p=i.pivotConfig;return G()({meta:s,query:o,validatedQuery:this.validatedQuery(),isQueryPresent:this.isQueryPresent(),chartType:l,measures:a.resolveMember("measures",this.state),dimensions:a.resolveMember("dimensions",this.state),timeDimensions:a.resolveMember("timeDimensions",this.state),segments:(s&&o.segments||[]).map((function(e,t){return G()({index:t},s.resolveMember(e,"segments"))})),filters:(s&&o.filters||[]).map((function(e,t){return G()(G()({},e),{},{dimension:s.resolveMember(e.dimension,["dimensions","measures"]),operators:s.filterOperatorsForMember(e.dimension,["dimensions","measures"]),index:t})})),orderMembers:c,availableMeasures:s&&s.membersForQuery(o,"measures")||[],availableDimensions:s&&s.membersForQuery(o,"dimensions")||[],availableTimeDimensions:(s&&s.membersForQuery(o,"dimensions")||[]).filter((function(e){return"time"===e.type})),availableSegments:s&&s.membersForQuery(o,"segments")||[],updateQuery:function(e){return t.updateQuery(e)},updateMeasures:r("measures"),updateDimensions:r("dimensions"),updateSegments:r("segments"),updateTimeDimensions:r("timeDimensions",(function(e){return{dimension:e.dimension.name,granularity:e.granularity,dateRange:e.dateRange}})),updateFilters:r("filters",(function(e){return{dimension:e.dimension.name,operator:e.operator,values:e.values}})),updateChartType:function(e){return t.updateVizState({chartType:e})},updateOrder:{set:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";t.updateVizState({orderMembers:c.map((function(t){return G()(G()({},t),{},{order:t.id===e?n:t.order})}))})},update:function(e){t.updateQuery({order:e})},reorder:function(e,n){null!=e&&null!=n&&t.updateVizState({orderMembers:Ee(c,e,n)})}},pivotConfig:p,updatePivotConfig:{moveItem:function(e){var n=e.sourceIndex,r=e.destinationIndex,a=e.sourceAxis,i=e.destinationAxis,s=G()(G()({},p),{},{x:ge()(p.x),y:ge()(p.y)}),o=p[a][n],u=s[i].length-1;"measures"===o?r=u+1:r>=u&&"measures"===s[i][u]&&(r=u-1),s[a].splice(n,1),s[i].splice(r,0,o),t.updateVizState({pivotConfig:s})},update:function(e){var n=e.limit;null==n?t.updateVizState({pivotConfig:G()(G()({},p),e)}):t.updateQuery({limit:n})}}},e)}},{key:"updateQuery",value:function(e){var t=this.state.query;this.updateVizState({query:G()(G()({},t),e)})}},{key:"updateVizState",value:(t=ye()(fe.a.mark((function e(t){var n,r,i,s,o,u,c,l,p,d,m,f,h,y,b,g,v,j,S;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.setQuery,i=n.setVizState,s=this.state,o=s.query,u=s.pivotConfig,c={},l=this.applyStateChangeHeuristics(t),(p=l.query||{}).order,d=le()(p,["order"]),!Se.isQueryPresent(d)){e.next=17;break}return e.prev=6,e.next=9,this.cubejsApi().dryRun(d,{mutexObj:this.mutexObj});case 9:m=e.sent,c=m.pivotQuery,l.shouldApplyHeuristicOrder&&(l.query.order=m.queryOrder),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.error(e.t0);case 17:f=void 0!==l.pivotConfig?l.pivotConfig:u,h=Object(se.a)(Object(ie.a)("id"),a.getOrderMembers(G()(G()({},this.state),l))),y=(l.orderMembers||[]).map((function(e){return e.id})),b=(l.orderMembers||[]).filter((function(e){var t=e.id;return Boolean(h[t])})),Object.entries(h).forEach((function(e){var t=Q()(e,2),n=t[0],r=t[1];y.includes(n)||b.push(r)})),g=Object(re.a)(b.map((function(e){var t=e.id,n=e.order;return"none"!==n&&[t,n]})).filter(Boolean)),v=G()(G()(G()({},o),d),{},{order:g}),l=G()(G()({},l),{},{query:v,orderMembers:b,pivotConfig:_.ResultSet.getNormalizedPivotConfig(c,f)}),this.setState(l),l=G()(G()({},this.state),l),r&&r(l.query),i&&((j=l).meta,S=le()(j,["meta"]),i(S));case 29:case"end":return e.stop()}}),e,this,[[6,14]])}))),function(e){return t.apply(this,arguments)})},{key:"validatedQuery",value:function(){var e=this.state.query;return G()(G()({},e),{},{filters:(e.filters||[]).filter((function(e){return e.operator}))})}},{key:"defaultHeuristics",value:function(e){var t=this.state,n=t.query,r=t.sessionGranularity||"day";if(e.query){var a=n,i=e.query,s=this.state.meta;if(1===(a.timeDimensions||[]).length&&1===(i.timeDimensions||[]).length&&i.timeDimensions[0].granularity&&a.timeDimensions[0].granularity!==i.timeDimensions[0].granularity&&(e=G()(G()({},e),{},{sessionGranularity:i.timeDimensions[0].granularity})),0===(a.measures||[]).length&&(i.measures||[]).length>0||1===(a.measures||[]).length&&1===(i.measures||[]).length&&a.measures[0]!==i.measures[0]){var o=s.defaultTimeDimensionNameFor(i.measures[0]);return i=G()(G()({},i),{},{timeDimensions:o?[{dimension:o,granularity:r}]:[]}),G()(G()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:i,chartType:o?"line":"number"})}return 0===(a.dimensions||[]).length&&(i.dimensions||[]).length>0?(i=G()(G()({},i),{},{timeDimensions:(i.timeDimensions||[]).map((function(e){return G()(G()({},e),{},{granularity:void 0})}))}),G()(G()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:i,chartType:"table"})):(a.dimensions||[]).length>0&&0===(i.dimensions||[]).length?(i=G()(G()({},i),{},{timeDimensions:(i.timeDimensions||[]).map((function(e){return G()(G()({},e),{},{granularity:e.granularity||r})}))}),G()(G()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:i,chartType:(i.timeDimensions||[]).length?"line":"number"})):((a.dimensions||[]).length>0||(a.measures||[]).length>0)&&0===(i.dimensions||[]).length&&0===(i.measures||[]).length?(i=G()(G()({},i),{},{timeDimensions:[],filters:[]}),G()(G()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:i,sessionGranularity:null})):e}if(e.chartType){var u=e.chartType;if(("line"===u||"area"===u)&&1===(n.timeDimensions||[]).length&&!n.timeDimensions[0].granularity){var c=Q()(n.timeDimensions,1)[0];return G()(G()({},e),{},{pivotConfig:null,query:G()(G()({},n),{},{timeDimensions:[G()(G()({},c),{},{granularity:r})]})})}if(("pie"===u||"table"===u||"number"===u)&&1===(n.timeDimensions||[]).length&&n.timeDimensions[0].granularity){var l=Q()(n.timeDimensions,1)[0];return G()(G()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:G()(G()({},n),{},{timeDimensions:[G()(G()({},l),{},{granularity:void 0})]})})}}return e}},{key:"applyStateChangeHeuristics",value:function(e){var t=this.props,n=t.stateChangeHeuristics;return t.disableHeuristics?e:n&&n(this.state,e)||this.defaultHeuristics(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.cubejsApi,r=t.render;return t.wrapWithQueryRenderer?ee.a.createElement(Se,{query:this.validatedQuery(),cubejsApi:n,render:function(t){return r?r(e.prepareRenderProps(t)):null}}):r?r(this.prepareRenderProps()):null}}]),a}(ee.a.Component);_e.contextType=je,_e.defaultProps={cubejsApi:null,query:{},setQuery:null,setVizState:null,stateChangeHeuristics:null,disableHeuristics:!1,render:null,wrapWithQueryRenderer:!0,vizState:{}};var Ce=function(e){var t=e.cubejsApi,n=e.children;return ee.a.createElement(je.Provider,{value:{cubejsApi:t}},n)};function Oe(e){var t=Object(Z.useRef)([]);return Object(te.a)(e,t.current)||(t.current=e),t.current}var we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(Z.useRef)({}),r=Object(Z.useState)(null),a=Q()(r,2),i=a[0],s=a[1],o=Object(Z.useState)(!1),u=Q()(o,2),c=u[0],l=u[1],p=Object(Z.useState)(null),d=Q()(p,2),m=d[0],f=d[1],h=Object(Z.useState)(null),y=Q()(h,2),b=y[0],g=y[1],v=Object(Z.useContext)(je),j=null;return Object(Z.useEffect)((function(){var r=t.skip,a=void 0!==r&&r,o=t.resetResultSetOnChange;function u(){return(u=ye()(fe.a.mark((function r(){var u;return fe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a||!e||!ve(e)){r.next=28;break}if(!!Object(te.a)(Object.keys(i&&i.order||{}),Object.keys(e.order||{}))&&Object(te.a)(i,e)||((null==o||o)&&f(null),g(null),s(e)),l(!0),r.prev=4,!j){r.next=9;break}return r.next=8,j.unsubscribe();case 8:j=null;case 9:if(u=t.cubejsApi||v&&v.cubejsApi){r.next=12;break}throw new Error("Cube.js API client is not provided");case 12:if(!t.subscribe){r.next=16;break}j=u.subscribe(e,{mutexObj:n.current,mutexKey:"query"},(function(e,t){e?g(e):f(t),l(!1)})),r.next=22;break;case 16:return r.t0=f,r.next=19,u.load(e,{mutexObj:n.current,mutexKey:"query"});case 19:r.t1=r.sent,(0,r.t0)(r.t1),l(!1);case 22:r.next=28;break;case 24:r.prev=24,r.t2=r.catch(4),g(r.t2),l(!1);case 28:case"end":return r.stop()}}),r,null,[[4,24]])})))).apply(this,arguments)}return function(){u.apply(this,arguments)}(),function(){j&&(j.unsubscribe(),j=null)}}),Oe([e,Object.keys(e&&e.order||{}),t,v])),{isLoading:c,resultSet:m,error:b}},Pe=n(354),Te=n(933),Me=n(865),De=n.n(Me),Ae=n(868),Re=n.n(Ae),qe=n(61),Le=n(863),Be=n(2235),Ie=n(2236),Ne=n(2237),Qe=n(2238),Fe=n(2239),Ge=n(2240),Ve=n(2241),Ue=n(2242),Ke=n(83),ze=n(858),He=n(212),Ye=n(420),We=n(869),Je=n(2219),$e=n(347),Xe=n.n($e),Ze=n(607),et=n.n(Ze),tt=(n(1908),function(e){Object(j.a)(n,e);var t=Object(S.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"componentDidMount",value:function(){et.a.highlightAll()}},{key:"componentDidUpdate",value:function(){et.a.highlightAll()}},{key:"render",value:function(){return l.a.createElement("pre",{style:this.props.style},l.a.createElement("code",{className:"language-javascript"},this.props.code))}}]),n}(l.a.Component)),nt=n(2234),rt=n(2223),at=n(343),it=n(856),st=function(e){var t=e.query,n=e.cubejsApi;return l.a.createElement(Se,{loadSql:!0,query:Object(O.a)(Object(O.a)({},t),{},{renewQuery:!0}),cubejsApi:n,render:function(e){var t=e.sqlQuery,n=e.resultSet;return l.a.createElement(at.a,{defaultActiveKey:"refreshKeys",tabBarExtraContent:l.a.createElement("span",null,"Last Refresh Time:Â ",l.a.createElement("b",null,n&&n.loadResponse.lastRefreshTime))},l.a.createElement(at.a.TabPane,{tab:"Refresh Keys",key:"refreshKeys"},l.a.createElement(it.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Refresh Key SQL",key:"refreshKey",render:function(e,t){return l.a.createElement(tt,{code:Xe.a.format(t[0])})}},{title:"Value",key:"value",render:function(e,r){return l.a.createElement(tt,{code:n&&n.loadResponse.refreshKeyValues&&JSON.stringify(n.loadResponse.refreshKeyValues[t.sqlQuery.sql.cacheKeyQueries.queries.indexOf(r)],null,2)})}}],dataSource:t&&t.sqlQuery.sql&&t.sqlQuery.sql.cacheKeyQueries.queries})),l.a.createElement(at.a.TabPane,{tab:"Pre-aggregations",key:"preAggregations"},l.a.createElement(it.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Table Name",key:"tableName",dataIndex:"tableName",render:function(e){return l.a.createElement("b",null,e)}},{title:"Refresh Key SQL",key:"refreshKey",dataIndex:"invalidateKeyQueries",render:function(e){return e.map((function(e){return l.a.createElement(tt,{key:e[0],code:Xe.a.format(e[0])})}))}},{title:"Refresh Key Value",key:"value",render:function(e,t){return n&&n.loadResponse.usedPreAggregations&&n.loadResponse.usedPreAggregations[t.tableName].refreshKeyValues&&n.loadResponse.usedPreAggregations[t.tableName].refreshKeyValues.map((function(e){return l.a.createElement(tt,{key:JSON.stringify(e),code:JSON.stringify(e,null,2)})}))}}],dataSource:t&&t.sqlQuery.sql&&t.sqlQuery.sql.preAggregations})),l.a.createElement(at.a.TabPane,{tab:"Rollup Match Results",key:"rollupMatchResults"},l.a.createElement(it.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Rollup Table Name",key:"tableName",dataIndex:"tableName",render:function(e){return l.a.createElement("b",null,e)}},{title:"Rollup Definition",key:"rollup",dataIndex:"references",render:function(e){return l.a.createElement(tt,{code:JSON.stringify(e,null,2)})}},{title:"Can Be Used",key:"canUsePreAggregation",dataIndex:"canUsePreAggregation",render:function(e){return e?l.a.createElement(nt.a,{style:{color:"#52c41a",fontSize:"2em"}}):l.a.createElement(rt.a,{style:{color:"#c2371b",fontSize:"2em"}})}}],dataSource:t&&t.sqlQuery.sql&&t.sqlQuery.sql.rollupMatchResults})))}})},ot=n(463),ut=n.n(ot),ct=n(608),lt=n.n(ct),pt=null,dt=[],mt={},ft=function(){var e=Object(b.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ut()("playground_anonymous")||ut()("playground_anonymous",lt()()),dt.push(Object(O.a)(Object(O.a)(Object(O.a)({},mt),t),{},{id:lt()(),clientAnonymousId:ut()("playground_anonymous"),clientTimestamp:(new Date).toJSON()})),n=function(){var e=Object(b.a)(y.a.mark((function e(t,r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(t=dt,dt=[]),t.length){e.next=3;break}return e.abrupt("return",null);case 3:return null==r&&(r=10),e.prev=4,a=(new Date).toJSON(),e.next=8,Object(x.a)("https://track.cube.dev/track",{method:"post",body:JSON.stringify(t.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{sentAt:a})}))),headers:{"Content-Type":"application/json"}});case 8:if(!(200!==e.sent.status&&r>0)){e.next=11;break}return e.abrupt("return",n(t,r-1));case 11:e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(4),!(r>0)){e.next=17;break}return e.abrupt("return",n(t,r-1));case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}(),r=(pt||Promise.resolve()).then((function(){return n()})).then((function(){r===pt&&(pt=null)})),pt=r,e.abrupt("return",pt);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(e,t){ft(Object(O.a)({event:e},t))},yt=function(e,t){ht("Playground Action",Object(O.a)({name:e},t))},bt=[{id:"vanilla",title:"Vanilla JavaScript",docsLink:"https://cube.dev/docs/@cubejs-client-core"},{id:"react",title:"React"},{id:"angular",title:"Angular",docsLink:"https://cube.dev/docs/@cubejs-client-ngx"},{id:"vue",title:"Vue.js",docsLink:"https://cube.dev/docs/@cubejs-client-vue"}],gt=function(e){Object(j.a)(r,e);var t,n=Object(S.a)(r);function r(e){var t;return Object(g.a)(this,r),(t=n.call(this,e)).state={showCode:!1,framework:"react"},t}return Object(v.a)(r,[{key:"componentDidMount",value:(t=Object(b.a)(y.a.mark((function e(){var t,n,r,a,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.codeSandboxSource,r=t.dependencies,e.next=3,Object(x.a)("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(this.codeSandboxDefinition(n,r))});case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,this.setState({sandboxId:i.sandbox_id});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"codeSandboxDefinition",value:function(e,t){return{files:Object(O.a)(Object(O.a)({},"string"==typeof e?{"index.js":{content:e}}:e),{},{"package.json":{content:{dependencies:Object(O.a)({"react-dom":"latest"},Object(Je.a)((function(){return"latest"}),t))}}}),template:"create-react-app"}}},{key:"render",value:function(){var e=this,t=this.state,n=t.redirectToDashboard,r=t.showCode,a=t.sandboxId,i=t.addingToDashboard,s=t.framework,o=this.props,u=o.resultSet,c=o.error,p=o.codeExample,d=o.render,f=o.codeSandboxSource,h=o.dependencies,g=o.dashboardSource,v=o.hideActions,j=o.query,S=o.cubejsApi,x=o.chartLibrary,E=o.setChartLibrary,k=o.chartLibraries,_=o.history;if(n)return l.a.createElement(m.a,{to:"/dashboard"});var C,O=Object(We.getParameters)(this.codeSandboxDefinition(f,h)),w=l.a.createElement(Ke.a,{onClick:function(e){yt("Set Chart Library",{chartLibrary:e.key}),E(e.key)}},k.map((function(e){return l.a.createElement(Ke.a.Item,{key:e.value},e.title)}))),P=l.a.createElement(Ke.a,{onClick:function(t){yt("Set Framework",{framework:t.key}),e.setState({framework:t.key})}},bt.map((function(e){return l.a.createElement(Ke.a.Item,{key:e.id},e.title)}))),T=k.find((function(e){return e.value===x})),M=bt.find((function(e){return e.id===s})),D=l.a.createElement("form",{action:"https://codesandbox.io/api/v1/sandboxes/define",method:"POST",target:"_blank"},l.a.createElement("input",{type:"hidden",name:"parameters",value:O}),l.a.createElement(B.a.Group,null,g&&l.a.createElement(B.a,{onClick:Object(b.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({addingToDashboard:!0}),t.next=3,g.canAddChart();case 3:if("boolean"!=typeof(n=t.sent)||!n){t.next=11;break}return yt("Add to Dashboard"),t.next=8,g.addChart(p);case 8:e.setState({redirectToDashboard:!0,addingToDashboard:!1}),t.next=12;break;case 11:n?(e.setState({addingToDashboard:!1}),ze.a.error({title:"There is an error loading your dashboard app",content:n,okText:"Fix",okCancel:!0,onOk(){_.push("/dashboard")}})):(e.setState({addingToDashboard:!1}),ze.a.error({title:"Your dashboard app does not support adding of static charts",content:"Please use static dashboard template"}));case 12:case"end":return t.stop()}}),t)}))),icon:l.a.createElement(Be.a,null),size:"small",loading:i,disabled:!!M.docsLink},i?"Preparing dashboard app. It may take a while. Please check console for progress...":"Add to Dashboard"),l.a.createElement(He.a,{overlay:P},l.a.createElement(B.a,{size:"small"},M&&M.title,l.a.createElement(Ie.a,null))),l.a.createElement(He.a,{overlay:w,disabled:!!M.docsLink},l.a.createElement(B.a,{size:"small"},T&&T.title,l.a.createElement(Ie.a,null))),l.a.createElement(B.a,{onClick:function(){yt("Show Query"),e.setState({showCode:"query"===r?null:"query"})},icon:l.a.createElement(Ne.a,null),size:"small",type:"query"===r?"primary":"default",disabled:!!M.docsLink},"JSON Query"),l.a.createElement(B.a,{onClick:function(){yt("Show Code"),e.setState({showCode:"code"===r?null:"code"})},icon:l.a.createElement(Qe.a,null),size:"small",type:"code"===r?"primary":"default",disabled:!!M.docsLink},"Code"),l.a.createElement(B.a,{onClick:function(){yt("Show SQL"),e.setState({showCode:"sql"===r?null:"sql"})},icon:l.a.createElement(Fe.a,null),size:"small",type:"sql"===r?"primary":"default",disabled:!!M.docsLink},"SQL"),l.a.createElement(B.a,{onClick:function(){yt("Show Cache"),e.setState({showCode:"cache"===r?null:"cache"})},icon:l.a.createElement(Ge.a,null),size:"small",type:"cache"===r?"primary":"default",disabled:!!M.docsLink},"Cache"),l.a.createElement(B.a,{icon:l.a.createElement(Ve.a,null),size:"small",onClick:function(){return yt("Open Code Sandbox")},htmlType:"submit",disabled:!!M.docsLink},"Edit"))),A=JSON.stringify(j,null,2),q=function(){var e=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return navigator.clipboard||Ye.a.error({message:"Your browser doesn't support copy to clipboard"}),e.prev=1,e.next=4,navigator.clipboard.writeText("query"===r?A:p);case 4:Ye.a.success({message:"Copied to clipboard"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Ye.a.error({message:"Can't copy to clipboard",description:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return C="code"===r?l.a.createElement(B.a,{icon:l.a.createElement(Ue.a,null),onClick:function(){q(),yt("Copy Code to Clipboard")},type:"primary"},"Copy Code to Clipboard"):"query"===r?l.a.createElement(B.a,{icon:l.a.createElement(Ue.a,null),onClick:function(){q(),yt("Copy Query to Clipboard")},type:"primary"},"Copy Query to Clipboard"):"sql"===r?"SQL":"Chart",v?d({resultSet:u,error:c,sandboxId:a}):l.a.createElement(R.a,{title:C,style:{minHeight:420},extra:D},M&&M.docsLink?l.a.createElement("h2",{style:{padding:24,textAlign:"center"}},"We do not supportÂ ",M.title,"Â code generation here yet.",l.a.createElement("br",null),"Please refer toÂ ",l.a.createElement("a",{href:M.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return yt("Unsupported Framework Docs",{framework:s})}},M.title,"Â docs"),"Â to see on how to use it with Cube.js."):"code"===r?l.a.createElement(tt,{code:p}):"query"===r?l.a.createElement(tt,{code:A}):"sql"===r?l.a.createElement(Se,{loadSql:"only",query:j,cubejsApi:S,render:function(e){var t=e.sqlQuery,n=Array.isArray(t)?t:[t],r=Object(Pe.a)(n,1)[0];return l.a.createElement(tt,{code:r&&Xe.a.format(r.sql())})}}):"cache"===r?l.a.createElement(st,{query:j,cubejsApi:S}):d({resultSet:u,error:c,sandboxId:a}))}}]),r}(l.a.Component);gt.defaultProps={query:{},cubejsApi:null,hideActions:null,dashboardSource:null,codeSandboxSource:null,codeExample:null,error:null,resultSet:null};var vt=Object(m.f)(gt),jt=n(879),St={line:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="line" position={`x*measure`} size={2} color="color" />\n  </Chart>',bar:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip />\n    <Geom type="intervalStack" position={`x*measure`} color="color" />\n  </Chart>',area:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="areaStack" position={`x*measure`} size={2} color="color" />\n  </Chart>',pie:"\n  <Chart height={400} data={resultSet.chartPivot()} forceFit>\n    <Coord type='theta' radius={0.75} />\n    {resultSet.seriesNames().map(s => (<Axis name={s.key} />))}\n    <Legend position='right' />\n    <Tooltip />\n    {resultSet.seriesNames().map(s => (<Geom type=\"intervalStack\" position={s.key} color=\"category\" />))}\n  </Chart>"},xt=function(e){var t=e.chartType,n=e.renderFnName;return"import { Chart, Axis, Tooltip, Geom, Coord, Legend } from 'bizcharts';\n\nconst stackedChartData = (resultSet) => {\n  const data = resultSet.pivot().map(\n    ({ xValues, yValuesArray }) =>\n      yValuesArray.map(([yValues, m]) => ({\n        x: resultSet.axisValuesString(xValues, ', '),\n        color: resultSet.axisValuesString(yValues, ', '),\n        measure: m && Number.parseFloat(m)\n      }))\n  ).reduce((a, b) => a.concat(b), []);\n\n  return data;\n}\n\nconst ".concat(n," = ({ resultSet }) => (").concat(St[t],"\n);")},Et={bizcharts:jt},kt=n(930),_t={line:'\n  <CartesianChart resultSet={resultSet} ChartComponent={LineChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Line\n          key={series.key}\n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n        />\n      ))}\n  </CartesianChart>',bar:'\n  <CartesianChart resultSet={resultSet} ChartComponent={BarChart}>\n    {resultSet.seriesNames().map((series, i) => (\n      <Bar\n        key={series.key}\n        stackId="a"\n        dataKey={series.key}\n        name={series.title}\n        fill={colors[i]}\n      />\n    ))}\n  </CartesianChart>',area:'\n  <CartesianChart resultSet={resultSet} ChartComponent={AreaChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Area\n          key={series.key}  \n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n          fill={colors[i]}\n        />\n      ))}\n  </CartesianChart>',pie:'\n  <ResponsiveContainer width="100%" height={350}>\n    <PieChart>\n      <Pie\n        isAnimationActive={false}\n        data={resultSet.chartPivot()}\n        nameKey="x"\n        dataKey={resultSet.seriesNames()[0].key}\n        fill="#8884d8"\n      >\n      {\n        resultSet.chartPivot().map((e, index) =>\n          <Cell key={index} fill={colors[index % colors.length]}/>\n        )\n      }\n      </Pie>\n      <Legend />\n      <Tooltip />\n    </PieChart>\n  </ResponsiveContainer>'},Ct=function(e){var t=e.chartType,n=e.renderFnName;return"import {\n  CartesianGrid,\n  PieChart,\n  Pie,\n  Cell,\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  Legend,\n  BarChart,\n  Bar,\n  LineChart,\n  Line\n} from \"recharts\";\n\nconst CartesianChart = ({ resultSet, children, ChartComponent }) => (\n  <ResponsiveContainer width=\"100%\" height={350}>\n    <ChartComponent data={resultSet.chartPivot()}>\n      <XAxis dataKey=\"x\" />\n      <YAxis />\n      <CartesianGrid />\n      { children }\n      <Legend />\n      <Tooltip />\n    </ChartComponent>\n  </ResponsiveContainer>\n)\n\nconst colors = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(n," = ({ resultSet }) => (").concat(_t[t],"\n);")},Ot={recharts:kt},wt=n(890),Pt={line:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        borderColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {};\n  return <Line data={data} options={options} />;",bar:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {\n    scales: { xAxes: [{ stacked: true }] }\n  };\n  return <Bar data={data} options={options} />;",area:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index]\n      }\n    )),\n  };\n  const options = {\n    scales: { yAxes: [{ stacked: true }] }\n  };\n  return <Line data={data} options={options} />;",pie:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map(s => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES,\n        hoverBackgroundColor: COLORS_SERIES,\n      }\n    ))\n  };\n  const options = {};\n  return <Pie data={data} options={options} />;"},Tt=function(e){var t=e.chartType,n=e.renderFnName;return"import { Line, Bar, Pie } from 'react-chartjs-2';\n\nconst COLORS_SERIES = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(n," = ({ resultSet }) => {").concat(Pt[t],"\n};")},Mt={"react-chartjs-2":wt},Dt=n(929),At=function(e){return"// Add Y axis\n  const y = d3.scaleLinear()\n    .domain([0, ".concat(e,'])\n    .range([ height, 0 ]);\n  svg.append("g")\n    .call(d3.axisLeft(y));')},Rt='// Add X axis\n  const x = d3.scaleTime()\n    .domain(d3.extent(resultSet.chartPivot(), c => d3.isoParse(c.x)))\n    .range([ 0, width ]);\n  svg.append("g")\n    .attr("transform", "translate(0," + height + ")")\n    .call(d3.axisBottom(x));',qt="// Transform data into D3 format\n  const keys = resultSet.seriesNames().map(s => s.key)\n  const data = d3.stack()\n    .keys(keys)\n    (resultSet.chartPivot())\n\n  // Color palette\n  const color = d3.scaleOrdinal()\n    .domain(keys)\n    .range(COLORS_SERIES)",Lt={line:"\n  // Prepare data in D3 format\n  const data = resultSet.series().map((series) => ({\n    key: series.title, values: series.series\n  }));\n\n  // color palette\n  const color = d3.scaleOrdinal()\n    .domain(data.map(d => d.key ))\n    .range(COLORS_SERIES)\n\n  ".concat(Rt,"\n\n  ").concat(At("d3.max(data.map((s) => d3.max(s.values, (i) => i.value)))"),'\n\n  // Draw the lines\n  svg.selectAll(".line")\n    .data(data)\n    .enter()\n    .append("path")\n      .attr("fill", "none")\n      .attr("stroke", d => color(d.key))\n      .attr("stroke-width", 1.5)\n      .attr("d", (d) => {\n        return d3.line()\n          .x(d => x(d3.isoParse(d.x)))\n          .y(d => y(+d.value))\n          (d.values)\n      })\n  '),bar:"\n  ".concat(qt,'\n\n  // Add X axis\n  const x = d3.scaleBand()\n    .range([ 0, width ])\n    .domain(resultSet.chartPivot().map(c => c.x))\n    .padding(0.3);\n  svg.append("g")\n    .attr("transform", "translate(0," + height + ")")\n    .call(d3.axisBottom(x))\n\n  ').concat(At("d3.max(data.map((s) => d3.max(s, (i) => i[1])))"),'\n\n  // Add the bars\n  svg.append("g")\n    .selectAll("g")\n    // Enter in the stack data = loop key per key = group per group\n    .data(data)\n    .enter().append("g")\n      .attr("fill", d => color(d.key))\n      .selectAll("rect")\n      // enter a second time = loop subgroup per subgroup to add all rectangles\n      .data(d => d)\n      .enter().append("rect")\n        .attr("x", d => x(d.data.x))\n        .attr("y", d => y(d[1]))\n        .attr("height", d => y(d[0]) - y(d[1]))\n        .attr("width",x.bandwidth())\n    '),area:"\n  ".concat(qt,"\n\n  ").concat(Rt,"\n\n  ").concat(At("d3.max(data.map((s) => d3.max(s, (i) => i[1])))"),'\n\n  // Add the areas\n  svg\n  .selectAll("mylayers")\n  .data(data)\n  .enter().append("path")\n    .style("fill", d => color(d.key))\n    .attr("d", d3.area()\n      .x(d => x(d3.isoParse(d.data.x)))\n      .y0(d => y(d[0]))\n      .y1(d => y(d[1]))\n  )\n  '),pie:"const data = resultSet.series()[0].series.map(s => s.value);\n  const data_ready = d3.pie()(data);\n\n  // The radius of the pieplot is half the width or half the height (smallest one).\n  const radius = Math.min(400, 400) / 2 - 40;\n\n  // Seprate container to center align pie chart\n  const pieContainer = svg.attr('height', height)\n      .append('g')\n      .attr('transform', 'translate(' + width/2 +  ',' + height/2 +')');\n\n  pieContainer\n    .selectAll('pieArcs')\n    .data(data_ready)\n    .enter()\n    .append('path')\n    .attr('d', d3.arc()\n      .innerRadius(0)\n      .outerRadius(radius)\n    )\n    .attr('fill', d => COLORS_SERIES[d.index])\n  "},Bt=function(e){var t=e.chartType,n=e.renderFnName;return"\nimport * as d3 from 'd3';\nconst COLORS_SERIES = ['#FF6492', '#141446', '#7A77FF'];\n\nconst draw = (node, resultSet, chartType) => {\n  ".concat('// Set the dimensions and margins of the graph\n  const margin = {top: 10, right: 30, bottom: 30, left: 60},\n    width = node.clientWidth - margin.left - margin.right,\n    height = 400 - margin.top - margin.bottom;\n\n  d3.select(node).html("");\n  const svg = d3.select(node)\n  .append("svg")\n    .attr("width", width + margin.left + margin.right)\n    .attr("height", height + margin.top + margin.bottom)\n  .append("g")\n    .attr("transform",\n          "translate(" + margin.left + "," + margin.top + ")");',"\n  ").concat(Lt[t],"\n}\n\nconst ").concat(n," = ({ resultSet }) => (\n  <div ref={el => el && draw(el, resultSet, '").concat(t,"')} />\n)\n")},It={d3:Dt},Nt={number:'\n  <Row type="flex" justify="center" align="middle" style={{ height: \'100%\' }}>\n    <Col>\n      {resultSet\n        .seriesNames()\n        .map(s => (\n          <Statistic value={resultSet.totalRow()[s.key]} />\n        ))}\n    </Col>\n  </Row>\n  ',table:"  \n  <Table \n    pagination={false}\n    columns={resultSet.tableColumns(pivotConfig)} \n    dataSource={resultSet.tablePivot(pivotConfig)} \n  />\n  "},Qt=function(e){var t=e.chartType,n=e.renderFnName;return"import { Row, Col, Statistic, Table } from 'antd';\n\nconst ".concat(n," = ({ resultSet, pivotConfig }) => (").concat(Nt[t],"\n);")},Ft={},Gt={chartjs:{library:s,title:"Chart.js"},recharts:{library:i,title:"Recharts"},bizcharts:{library:a,title:"Bizcharts"},d3:{library:o,title:"D3"}},Vt={presets:[De.a,Re.a]},Ut=function(e){var t=e;return"object"==typeof e&&(t=JSON.stringify(e,null,2)),t.split("\n").map((function(e,t){return t>0?"  ".concat(e):e})).join("\n")},Kt=function(e){var t=e.chartLibrary,n=e.query,r=e.apiUrl,a=e.cubejsToken,i=e.chartType,s="".concat(i,"Render");return"import React from 'react';\nimport cubejs from '@cubejs-client/core';\nimport { QueryRenderer } from '@cubejs-client/react';\nimport { Spin } from 'antd';\n".concat(t.sourceCodeTemplate(Object(O.a)(Object(O.a)({},e),{},{renderFnName:s})),'\n\nconst API_URL = "').concat(r,'"; // change to your actual endpoint\n\nconst cubejsApi = cubejs(\n  "').concat(a,'",\n  { apiUrl: API_URL + "/cubejs-api/v1" }\n);\n\nconst renderChart = (Component, pivotConfig) => ({ resultSet, error }) => (\n  (resultSet && <Component resultSet={resultSet} pivotConfig={pivotConfig} />) ||\n  (error && error.toString()) || \n  (<Spin />)\n)\n\nconst ChartRenderer = () => <QueryRenderer\n  query={').concat(Ut(n),"}\n  cubejsApi={cubejsApi}\n  render={renderChart(").concat(s,", ").concat(Ut(e.pivotConfig),")}\n/>;\n\nexport default ChartRenderer;\n")},zt=function(e){return"import ReactDOM from 'react-dom';\nimport \"antd/dist/antd.css\";\n".concat(e,'\n\nconst rootElement = document.getElementById("root");\nReactDOM.render(<ChartRenderer />, rootElement);\n')},Ht=Object.keys(Gt).map((function(e){return{value:e,title:Gt[e].title}})),Yt=function(e){var t=Object(c.useState)(null),n=Object(Pe.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)("bizcharts"),o=Object(Pe.a)(s,2),p=o[0],d=o[1],m=e.query,f=e.resultSet,h=e.error,y=e.sqlQuery,b=e.dashboardSource,g=e.cubejsApi,v=e.chartType,j=e.sourceCodeFn,S=e.pivotConfig,x=j||Kt,E=function(e,t){return-1!==["table","number"].indexOf(e)?u:Gt[t].library}(v,p),k=x(Object(O.a)(Object(O.a)({},e),{},{chartLibrary:E,pivotConfig:S})),_=Object(O.a)({"@cubejs-client/core":C.a,"@cubejs-client/react":r,antd:qe,react:l.a},E.imports);return Object(c.useEffect)((function(){a&&i(null)}),[k,v,a]),l.a.createElement(vt,{query:m,resultSet:f,error:h,sqlQuery:y,codeExample:k,codeSandboxSource:zt(k),dependencies:_,dashboardSource:b,chartLibrary:p,setChartLibrary:d,chartLibraries:Ht,cubejsApi:g,render:function(){return a?l.a.createElement(Le.a,{message:"Error occurred while compiling JS",description:l.a.createElement("pre",null,a.toString()),type:"error"}):l.a.createElement(Te.a,{onRender:function(e){e&&i(e)},babelConfig:Vt,resolver:function(e){return _[e]},source:k})}})};Yt.defaultProps={resultSet:null,error:null,sqlQuery:null,dashboardSource:null,cubejsApi:null,chartType:null,sourceCodeFn:null};var Wt=function(e){var t=e.overlay,n=Object(w.a)(e,["overlay"]);return l.a.createElement(He.a,{overlay:t,placement:"bottomLeft",trigger:["click"]},l.a.createElement(B.a,n))},Jt=function(e,t){return l.a.createElement(Ke.a,null,t.length?t.map((function(t){return l.a.createElement(Ke.a.Item,{key:t.name,onClick:function(){return e(t)}},t.title)})):l.a.createElement(Ke.a.Item,{disabled:!0},"No members found"))},$t=function(e){var t=e.onClick,n=e.availableMembers,r=Object(w.a)(e,["onClick","availableMembers"]);return l.a.createElement(Wt,Object.assign({overlay:Jt(t,n)},r))},Xt=function(e){var t=e.onRemoveClick,n=e.children,r=Object(w.a)(e,["onRemoveClick","children"]);return l.a.createElement(B.a.Group,Object.assign({style:{marginRight:8}},r),n,l.a.createElement(B.a,{type:"danger",ghost:!0,onClick:t},l.a.createElement(rt.a,null)))},Zt=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return l.a.createElement("span",null,t.map((function(e){return l.a.createElement(Xt,{key:e.index||e.name,onRemoveClick:function(){return a.remove(e)}},l.a.createElement($t,{availableMembers:n,onClick:function(t){return a.update(e,t)}},e.title))})),l.a.createElement($t,{onClick:function(e){return a.add(e)},availableMembers:n,type:"dashed",icon:l.a.createElement(Be.a,null)},r))},en=n(118),tn=n(1),nn=n(289),rn={string:function(e){var t=e.values,n=e.onChange;return l.a.createElement(en.a,{key:"input",style:{width:300},mode:"tags",onChange:n,value:t})},number:function(e){var t=e.values,n=e.onChange;return l.a.createElement(nn.a,{key:"input",style:{width:300},onChange:function(e){return n([e.target.value])},value:t&&t[0]||""})}};rn.string.propTypes={values:tn.array,onChange:tn.func.isRequired},rn.string.defaultProps={values:[]},rn.number.propTypes={values:tn.array,onChange:tn.func.isRequired},rn.number.defaultProps={values:[]};var an=function(e){var t=e.member,n=e.updateMethods,r=rn[t.dimension.type]||rn.string;return l.a.createElement(r,{key:"filter",values:t.values,onChange:function(e){return n.update(t,Object(O.a)(Object(O.a)({},t),{},{values:e}))}})},sn=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return l.a.createElement("span",null,t.map((function(e){return l.a.createElement("div",{style:{marginBottom:12},key:e.index},l.a.createElement(Xt,{onRemoveClick:function(){return a.remove(e)}},l.a.createElement($t,{onClick:function(t){return a.update(e,Object(O.a)(Object(O.a)({},e),{},{dimension:t}))},availableMembers:n,style:{width:150,textOverflow:"ellipsis",overflow:"hidden"}},e.dimension.title)),l.a.createElement(en.a,{value:e.operator,onChange:function(t){return a.update(e,Object(O.a)(Object(O.a)({},e),{},{operator:t}))},style:{width:200,marginRight:8}},e.operators.map((function(e){return l.a.createElement(en.a.Option,{key:e.name,value:e.name},e.title)}))),l.a.createElement(an,{member:e,key:"filterInput",updateMethods:a}))})),l.a.createElement($t,{onClick:function(e){return a.add({dimension:e})},availableMembers:n,type:"dashed",icon:l.a.createElement(Be.a,null)},r))},on=[{title:"All time",value:void 0},{value:"Today"},{value:"Yesterday"},{value:"This week"},{value:"This month"},{value:"This quarter"},{value:"This year"},{value:"Last 7 days"},{value:"Last 30 days"},{value:"Last week"},{value:"Last month"},{value:"Last quarter"},{value:"Last year"}],un=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return l.a.createElement("span",null,t.map((function(e){return[l.a.createElement(Xt,{onRemoveClick:function(){return a.remove(e)},key:"".concat(e.dimension.name,"-member")},l.a.createElement($t,{onClick:function(t){return a.update(e,Object(O.a)(Object(O.a)({},e),{},{dimension:t}))},availableMembers:n},e.dimension.title)),l.a.createElement("b",{key:"".concat(e.dimension.name,"-for")},"FOR"),l.a.createElement(Wt,{overlay:(i=function(t){return a.update(e,Object(O.a)(Object(O.a)({},e),{},{dateRange:t.value}))},l.a.createElement(Ke.a,null,on.map((function(e){return l.a.createElement(Ke.a.Item,{key:e.title||e.value,onClick:function(){return i(e)}},e.title||e.value)})))),style:{marginLeft:8,marginRight:8},key:"".concat(e.dimension.name,"-date-range")},e.dateRange||"All time"),l.a.createElement("b",{key:"".concat(e.dimension.name,"-by")},"BY"),l.a.createElement(Wt,{overlay:(t=e.dimension,r=function(t){return a.update(e,Object(O.a)(Object(O.a)({},e),{},{granularity:t.name}))},l.a.createElement(Ke.a,null,t.granularities.length?t.granularities.map((function(e){return l.a.createElement(Ke.a.Item,{key:e.title,onClick:function(){return r(e)}},e.title)})):l.a.createElement(Ke.a.Item,{disabled:!0},"No members found"))),style:{marginLeft:8},key:"".concat(e.dimension.name,"-granularity")},e.dimension.granularities.find((function(t){return t.name===e.granularity}))&&e.dimension.granularities.find((function(t){return t.name===e.granularity})).title)];var t,r,i})),!t.length&&l.a.createElement($t,{onClick:function(e){return a.add({dimension:e,granularity:"day"})},availableMembers:n,type:"dashed",icon:l.a.createElement(Be.a,null)},r))},cn=n(2233),ln=n(2232),pn=n(2231),dn=n(2230),mn=n(2229),fn=n(2228),hn=[{name:"line",title:"Line",icon:l.a.createElement(cn.a,null)},{name:"area",title:"Area",icon:l.a.createElement(ln.a,null)},{name:"bar",title:"Bar",icon:l.a.createElement(pn.a,null)},{name:"pie",title:"Pie",icon:l.a.createElement(dn.a,null)},{name:"table",title:"Table",icon:l.a.createElement(mn.a,null)},{name:"number",title:"Number",icon:l.a.createElement(fn.a,null)}],yn=function(e){var t=e.chartType,n=e.updateChartType,r=l.a.createElement(Ke.a,null,hn.map((function(e){return l.a.createElement(Ke.a.Item,{key:e.title,onClick:function(){return n(e.name)}},e.icon," ",e.title)}))),a=hn.find((function(e){return e.name===t}));return l.a.createElement(Wt,{overlay:r,icon:a.icon},a.title)},bn=n(154),gn=n(857),vn=n(2227);function jn(e){var t=e.id,n=e.index;return l.a.createElement(bn.b,{draggableId:t,index:n},(function(e){var n=e.draggableProps,r=e.dragHandleProps,a=e.innerRef;return l.a.createElement("div",Object.assign({ref:a},n,r,{style:Object(O.a)({},n.style)}),l.a.createElement(gn.a.Text,{ellipsis:!0,style:{maxWidth:"100%"}},l.a.createElement(vn.a,{style:{marginRight:8}}),t))}))}function Sn(e){var t=e.pivotConfig,n=e.axis;return l.a.createElement(l.a.Fragment,null,l.a.createElement(gn.a.Text,{strong:!0,style:{display:"flex",justifyContent:"center"}},n),l.a.createElement(bn.c,{droppableId:n},(function(e){return l.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps,{style:{height:"100%"}}),t[n].map((function(e,t){return l.a.createElement(jn,{key:e,id:e,index:t})})),e.placeholder)})))}function xn(e){var t=e.pivotConfig,n=e.onMove;return l.a.createElement(bn.a,{onDragEnd:function(e){var t=e.source,r=e.destination;r&&n({sourceIndex:t.index,destinationIndex:r.index,sourceAxis:t.droppableId,destinationAxis:r.droppableId})}},l.a.createElement(D.a,null,l.a.createElement(A.a,{span:11},l.a.createElement(Sn,{pivotConfig:t,axis:"x"})),l.a.createElement(A.a,{span:2},l.a.createElement(q.a,{style:{height:"100%"},type:"vertical"})),l.a.createElement(A.a,{span:11},l.a.createElement(Sn,{pivotConfig:t,axis:"y"}))))}var En=n(153);function kn(e){var t=e.pivotConfig,n=e.onUpdate;return l.a.createElement(En.a,{checked:t.fillMissingDates,onChange:function(){return n({fillMissingDates:!t.fillMissingDates})}},"Fill Missing Dates")}var _n=["asc","desc","none"];function Cn(e){var t=e.id,n=e.index,r=e.order,a=void 0===r?"none":r,i=e.children,s=e.onOrderChange;return l.a.createElement(bn.b,{draggableId:t,index:n},(function(e){var n=e.draggableProps,r=e.dragHandleProps,o=e.innerRef;return l.a.createElement("div",Object.assign({ref:o},n,r,{style:Object(O.a)({display:"flex",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",marginBottom:8},n.style)}),l.a.createElement(vn.a,null),l.a.createElement(gn.a.Text,{ellipsis:!0,style:{margin:"0 auto 0 8px"}},i),l.a.createElement(B.a,{type:"none"!==a?"primary":null,size:"small",style:{minWidth:70,marginLeft:8},onClick:function(){return s(t,function(){var e=_n.indexOf(a)+1;return _n[e>2?0:e]}())}},a.toUpperCase()))}))}function On(e){var t=e.orderMembers,n=e.onOrderChange,r=e.onReorder;return l.a.createElement(bn.a,{onDragEnd:function(e){var t=e.source,n=e.destination;r(t&&t.index,n&&n.index)}},l.a.createElement(bn.c,{droppableId:"droppable"},(function(e){return l.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),t.map((function(e,t){var r=e.id,a=e.title,i=e.order;return l.a.createElement(Cn,{key:r,id:r,index:t,order:i,onOrderChange:n},a)})),e.placeholder)})))}var wn=n(861);function Pn(e){var t=e.limit,n=void 0===t?1e4:t,r=e.onUpdate;return l.a.createElement("label",null,"Limit"," ",l.a.createElement(wn.a,{prefix:"Limit",value:n,step:1e3,onChange:function(e){return r({limit:e})}}))}var Tn=at.a.TabPane;function Mn(e){var t=e.pivotConfig,n=e.orderMembers,r=e.limit,a=e.onMove,i=e.onUpdate,s=e.onReorder,o=e.onOrderChange;return l.a.createElement(at.a,{style:{width:340}},l.a.createElement(Tn,{tab:"Pivot",key:"1"},l.a.createElement(xn,{pivotConfig:t,onMove:a})),l.a.createElement(Tn,{tab:"Pivot Options",key:"2"},l.a.createElement(kn,{pivotConfig:t,onUpdate:i})),l.a.createElement(Tn,{tab:"Order",key:"3"},l.a.createElement(On,{orderMembers:n,onReorder:s,onOrderChange:o})),l.a.createElement(Tn,{tab:"Limit",key:"4"},l.a.createElement(Pn,{limit:r,onUpdate:i})))}var Dn=function(e,t){return Object.keys(e).map((function(n){return{[n]:function(r,a){var i="".concat(n.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")," Member");a&&a.values&&(i="Update Filter Values"),a&&a.dateRange&&(i="Update Date Range"),a&&a.granularity&&(i="Update Granularity"),yt(i,{memberName:t});for(var s=arguments.length,o=new Array(s>2?s-2:0),u=2;u<s;u++)o[u-2]=arguments[u];return e[n].apply(null,[r,a].concat(o))}}})).reduce((function(e,t){return Object(O.a)(Object(O.a)({},e),t)}),{})};function An(e){var t=e.query,n=e.cubejsApi,r=e.apiUrl,a=e.cubejsToken,i=e.dashboardSource,s=e.setQuery;return l.a.createElement(_e,{query:t,setQuery:s,cubejsApi:n,render:function(e){var s=e.resultSet,o=e.error,u=e.validatedQuery,c=e.isQueryPresent,p=e.chartType,d=e.updateChartType,m=e.measures,f=e.availableMeasures,h=e.updateMeasures,y=e.dimensions,b=e.availableDimensions,g=e.updateDimensions,v=e.segments,j=e.availableSegments,S=e.updateSegments,x=e.filters,E=e.updateFilters,k=e.timeDimensions,_=e.availableTimeDimensions,C=e.updateTimeDimensions,O=e.orderMembers,w=e.updateOrder,P=e.pivotConfig,T=e.updatePivotConfig;return l.a.createElement(l.a.Fragment,null,l.a.createElement(D.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},l.a.createElement(A.a,{span:24},l.a.createElement(R.a,null,l.a.createElement(D.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},l.a.createElement(A.a,{span:24},l.a.createElement(Zt,{members:m,availableMembers:f,addMemberName:"Measure",updateMethods:Dn(h,"Measure")}),l.a.createElement(q.a,{type:"vertical"}),l.a.createElement(Zt,{members:y,availableMembers:b,addMemberName:"Dimension",updateMethods:Dn(g,"Dimension")}),l.a.createElement(q.a,{type:"vertical"}),l.a.createElement(Zt,{members:v,availableMembers:j,addMemberName:"Segment",updateMethods:Dn(S,"Segment")}),l.a.createElement(q.a,{type:"vertical"}),l.a.createElement(un,{members:k,availableMembers:_,addMemberName:"Time",updateMethods:Dn(C,"Time")}))),l.a.createElement(D.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},l.a.createElement(A.a,{span:24},l.a.createElement(sn,{members:x,availableMembers:b.concat(f),addMemberName:"Filter",updateMethods:Dn(E,"Filter")}))),l.a.createElement(D.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},l.a.createElement(A.a,{span:24},l.a.createElement(yn,{chartType:p,updateChartType:function(e){yt("Change Chart Type"),d(e)}}),l.a.createElement(q.a,{type:"vertical"}),l.a.createElement(L.a,{content:l.a.createElement(Mn,{limit:t.limit,pivotConfig:P,orderMembers:O,onReorder:w.reorder,onOrderChange:w.set,onMove:T.moveItem,onUpdate:T.update}),placement:"bottomLeft",trigger:"click"},l.a.createElement(B.a,{disabled:!c,icon:l.a.createElement(I.a,null)},"Settings"))))))),l.a.createElement(D.a,{justify:"space-around",align:"top",gutter:24},l.a.createElement(A.a,{span:24},c?l.a.createElement(Yt,{query:u,resultSet:s,error:o,apiUrl:r,cubejsToken:a,chartType:p,cubejsApi:n,dashboardSource:i,pivotConfig:P}):l.a.createElement("h2",{style:{textAlign:"center"}},"Choose a measure or dimension to get started"))))}})}An.defaultProps={query:{},setQuery:null,cubejsApi:null,dashboardSource:null,apiUrl:"/cubejs-api/v1",cubejsToken:null};var Rn=function(e){Object(j.a)(r,e);var t,n=Object(S.a)(r);function r(e){var t;return Object(g.a)(this,r),(t=n.call(this,e)).state={},t.dashboardSource=new M,t}return Object(v.a)(r,[{key:"componentDidMount",value:(t=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cubejsApi",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=C()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}},{key:"render",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl,r=this.props,a=r.location,i=r.history,s=new URLSearchParams(a.search),o=s.get("query")&&JSON.parse(s.get("query"))||{};return this.cubejsApi()&&l.a.createElement(An,{query:o,setQuery:function(e){return i.push("/build?query=".concat(JSON.stringify(e)))},cubejsApi:this.cubejsApi(),apiUrl:n,cubejsToken:t,dashboardSource:this.dashboardSource})||null}}]),r}(c.Component);Rn.defaultProps={};var qn=Rn,Ln=n(842),Bn=n(860),In=n(157),Nn=Ln.a.Content,Qn=Ln.a.Sider,Fn=Bn.a.TreeNode,Gn=at.a.TabPane,Vn={},Un=function(e){Object(j.a)(s,e);var t,n,r,a,i=Object(S.a)(s);function s(e){var t;return Object(g.a)(this,s),(t=i.call(this,e)).state={expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],activeTab:"schema",files:[]},t}return Object(v.a)(s,[{key:"componentDidMount",value:(a=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDBSchema();case 2:return e.next=4,this.loadFiles();case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onExpand",value:function(e){yt("Expand Tables"),this.setState({expandedKeys:e,autoExpandParent:!1})}},{key:"onCheck",value:function(e){yt("Check Tables"),this.setState({checkedKeys:e})}},{key:"onSelect",value:function(e){this.setState({selectedKeys:e})}},{key:"cubejsApi",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=C()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}},{key:"loadDBSchema",value:(r=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({schemaLoading:!0}),e.prev=1,e.next=4,P("/playground/db-schema");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this.setState({tablesSchema:n.tablesSchema}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({schemaLoadingError:e.t0});case 14:return e.prev=14,this.setState({schemaLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))),function(){return r.apply(this,arguments)})},{key:"loadFiles",value:(n=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"generateSchema",value:(t=Object(b.a)(y.a.mark((function e(){var t,n,r,a,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.checkedKeys,r=t.tablesSchema,a=this.props.history,yt("Generate Schema"),e.next=5,P("/playground/generate-schema",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tables:n.filter((function(e){return!!Vn[e]})).map((function(e){return Vn[e]})),tablesSchema:r})});case 5:if(200!==(i=e.sent).status){e.next=14;break}return yt("Generate Schema Success"),e.next=10,this.loadFiles();case 10:this.setState({checkedKeys:[],activeTab:"files"}),ze.a.success({title:"Schema files successfully generated!",content:"You can start building the charts",okText:"Build",cancelText:"Close",okCancel:!0,onOk(){a.push("/build")}}),e.next=20;break;case 14:return e.t0=yt,e.next=17,i.text();case 17:e.t1=e.sent,e.t2={error:e.t1},(0,e.t0)("Generate Schema Fail",e.t2);case 20:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"selectedFileContent",value:function(){var e=this.selectedFile();return e&&e.content}},{key:"selectedFile",value:function(){var e=this.state,t=e.files,n=e.selectedFile;return t.find((function(e){return e.fileName===n}))}},{key:"renderFilesMenu",value:function(){var e=this,t=this.state,n=t.selectedFile,r=t.files;return l.a.createElement(Ke.a,{mode:"inline",onClick:function(t){var n=t.key;yt("Select File"),e.setState({selectedFile:n})},selectedKeys:n?[n]:[]},r.map((function(e){return l.a.createElement(Ke.a.Item,{key:e.fileName},e.fileName)})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.schemaLoading,r=t.schemaLoadingError,a=t.tablesSchema,i=t.selectedFile,s=t.expandedKeys,o=t.autoExpandParent,u=t.checkedKeys,c=t.selectedKeys,p=t.activeTab,d=function(){return Object.keys(a||{}).length>0?l.a.createElement(Bn.a,{checkable:!0,onExpand:e.onExpand.bind(e),expandedKeys:s,autoExpandParent:o,onCheck:e.onCheck.bind(e),checkedKeys:u,onSelect:e.onSelect.bind(e),selectedKeys:c},function e(t){return t.map((function(t){return t.children?l.a.createElement(Fn,{title:t.title,key:t.key,dataRef:t},e(t.children)):l.a.createElement(Fn,t)}))}((t=a||{},Object.keys(t).map((function(e){return{title:e,key:e,children:Object.keys(t[e]).map((function(t){var n="".concat(e,".").concat(t);return Vn[n]=[e,t],{title:t,key:n}}))}}))))):l.a.createElement(Le.a,{message:"Empty DB Schema",description:"Please check connection settings",type:"warning"});var t};return l.a.createElement(Ln.a,{style:{height:"100%"}},l.a.createElement(Qn,{width:300,className:"schema-sidebar"},l.a.createElement(at.a,{activeKey:p,onChange:function(t){return e.setState({activeTab:t})},tabBarExtraContent:l.a.createElement(B.a,{disabled:!u.length,type:"primary",onClick:function(){return e.generateSchema()}},"Generate Schema")},l.a.createElement(Gn,{tab:"Tables",key:"schema"},n?l.a.createElement(E.a,{style:{width:"100%"}}):r?l.a.createElement(Le.a,{message:"Error while loading DB schema",description:r.toString(),type:"error"}):d()),l.a.createElement(Gn,{tab:"Files",key:"files"},this.renderFilesMenu()))),l.a.createElement(Nn,{style:{minHeight:280}},i&&l.a.createElement(Le.a,{message:l.a.createElement("span",null,"This file can be edited atÂ ",l.a.createElement("b",null,this.selectedFile().absPath)),type:"info",style:{paddingTop:10,paddingBottom:11}}),i?l.a.createElement(tt,{code:this.selectedFileContent(),style:{padding:12}}):l.a.createElement(In.a,{style:{marginTop:50},description:"Select tables to generate Cube.js schema"})))}}]),s}(c.Component),Kn=(n(401),n(130)),zn=function(e){var t=e.children;return l.a.createElement("div",{style:{textAlign:"center",marginTop:50}},t)},Hn=function(){return l.a.createElement("p",{style:{width:450,margin:"20px auto"}},"Dashboard App is a convenient way to setup and deploy frontend app to work with Cube.js backend. You can learn more about in the"," ",l.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app",target:"_blankl"},"Cube.js docs"),".")},Yn=function(e){Object(j.a)(i,e);var t,n,r,a=Object(S.a)(i);function i(e){var t;return Object(g.a)(this,i),(t=a.call(this,e)).state={},t}return Object(v.a)(i,[{key:"componentDidMount",value:(r=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardSource=new M,e.next=3,this.loadDashboard();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadDashboard",value:(n=Object(b.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({appCode:null,loadError:null}),e.prev=1,e.next=4,this.dashboardSource.load();case 4:return this.setState({dashboardStarting:!1,appCode:!this.dashboardSource.loadError&&this.dashboardSource.dashboardCreated,loadError:this.dashboardSource.loadError}),e.next=7,P("/playground/dashboard-app-status");case 7:return e.next=9,e.sent.json();case 9:t=e.sent,this.setState({dashboardRunning:t.running,dashboardPort:t.dashboardPort,dashboardAppPath:t.dashboardAppPath}),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(1),this.setState({dashboardStarting:!1,loadError:l.a.createElement("pre",null,e.t0.toString())}),e.t0;case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return n.apply(this,arguments)})},{key:"startDashboardApp",value:(t=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({dashboardStarting:!0}),e.next=3,P("/playground/start-dashboard-app");case 3:return e.next=5,this.loadDashboard();case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.appCode,r=t.dashboardPort,a=t.loadError,i=t.dashboardRunning,s=t.dashboardStarting,o=t.dashboardAppPath;if(a&&"string"==typeof a&&-1!==a.indexOf("Dashboard app not found"))return l.a.createElement(m.a,{to:"/template-gallery"});if(a)return l.a.createElement(zn,null,l.a.createElement("h2",null,a),l.a.createElement("p",{style:{marginTop:25}},l.a.createElement(Kn.a,{to:"/template-gallery"},l.a.createElement(B.a,{type:"primary"},"Create dashboard app in your project directory"))),l.a.createElement(Hn,null));if(!n)return l.a.createElement(zn,null,l.a.createElement("h2",null,"Â Creating Dashboard App"),l.a.createElement("p",null,l.a.createElement(E.a,{tip:"It may take several minutes. Please check console for progress..."})),l.a.createElement(Hn,null));if(!i)return l.a.createElement(zn,null,l.a.createElement("h2",null,"Dashboard App is not running"),l.a.createElement("h3",null,"Please start dashboard app or run it manually using",l.a.createElement("code",{className:"inline-code"},"$ npm run start"),l.a.createElement("br",null),"inÂ ",l.a.createElement("b",null,o),"Â directory."),l.a.createElement("p",{style:{marginTop:25}},l.a.createElement(B.a,{type:"primary",size:"large",loading:s,onClick:function(){return e.startDashboardApp(!0)}},s?"Dashboard app is starting. It may take a while. Please check console for progress...":"Start dashboard app")),l.a.createElement(Hn,null));var u="http://".concat(window.location.hostname,":").concat(r);return l.a.createElement("div",{style:{height:"100%",width:"100%",padding:"15px 30px 30px 30px",background:"#fff"}},l.a.createElement(Le.a,{message:l.a.createElement("span",null,"This dashboard app can be edited atÂ ",l.a.createElement("b",null,o),". Dev server is running atÂ ",l.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},u),". Learn more how to customize and deploy it atÂ ",l.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app"},"Cube.jsÂ docs"),".Â ",l.a.createElement("a",{onClick:function(){return window.location.reload()},style:{cursor:"pointer"}},"Refresh page"),"Â if it is empty."),type:"info",closable:!0,style:{marginBottom:15}}),l.a.createElement("iframe",{src:u,style:{width:"100%",height:"100%",border:0,borderRadius:4,overflow:"hidden"},sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin",title:"Dashboard"}))}}]),i}(c.Component),Wn=Object(m.f)(Yn),Jn=(n(2136),n(2137),n(134)),$n=n(2224),Xn=n(2244),Zn=n(2243),er=n(135),tr=n(612);function nr(){var e=Object(Jn.a)(["\n  float: right;\n  height: 32px;\n  margin: 8px ",";\n  border: 0.5px solid rgba(67, 67, 107, 0.4);\n  border-radius: 3px;\n  display: flex;\n  align-items: center;\n  color: #43436b;\n  transition: all 0.25s ease;\n  padding: 0 10px;\n\n  span {\n    font-size: 20px;\n    margin-right: 10px;\n    opacity: 0.3;\n  }\n\n  &:hover {\n    span {\n      opacity: 0.6;\n    }\n    border-color: rgba(67, 67, 107, 1);\n    color: #43436b;\n  }\n"]);return nr=function(){return e},e}function rr(){var e=Object(Jn.a)(["\n  font-size: 15px;\n  font-weight: 500;\n  & > a {\n    opacity: 0.6;\n  }\n  &.ant-menu-item-selected,\n  &.ant-menu-item-active {\n    a {\n      opacity: 1;\n    }\n  }\n\n  &&:not(.ant-menu-item-selected) {\n    &.ant-menu-item-active,\n    &:hover {\n      color: #43436b;\n      border-bottom: 2px solid transparent;\n    }\n  }\n"]);return rr=function(){return e},e}function ar(){var e=Object(Jn.a)(["\n  background: #eeeef5 !important;\n  border-bottom: 0;\n"]);return ar=function(){return e},e}var ir=Object(er.a)(Ke.a)(ar()),sr=Object(er.a)(Ke.a.Item)(rr()),or=er.a.a(nr(),(function(e){return e.noMargin?"0":"8px"})),ur=function(e){var t=e.selectedKeys,n=Object(tr.useMediaQuery)({query:"(min-device-width: 992px)"}),r=Object(tr.useMediaQuery)({query:"(max-device-width: 991px)"});return l.a.createElement(Ln.a.Header,{style:{padding:"0 32px"}},l.a.createElement("div",{style:{float:"left"}},l.a.createElement("img",{src:"./cubejs-playground-logo.svg",style:{display:"inline",height:28,marginRight:28},alt:""})),n&&l.a.createElement(ir,{theme:"light",mode:"horizontal",selectedKeys:t},l.a.createElement(sr,{key:"/build"},l.a.createElement(Kn.a,{to:"/build"},"Build")),l.a.createElement(sr,{key:"/dashboard"},l.a.createElement(Kn.a,{to:"/dashboard"},"Dashboard App")),l.a.createElement(sr,{key:"/schema"},l.a.createElement(Kn.a,{to:"/schema"},"Schema")),l.a.createElement(or,{noMargin:!0,key:"slack",href:"https://slack.cube.dev",target:"_blank"},l.a.createElement($n.a,null),"Slack"),l.a.createElement(or,{key:"docs",href:"https://cube.dev/docs",target:"_blank"},l.a.createElement(Xn.a,null),"Docs")),r&&l.a.createElement("div",{style:{float:"right"}},l.a.createElement(He.a,{overlay:l.a.createElement(Ke.a,null,l.a.createElement(Ke.a.Item,{key:"/build"},l.a.createElement(Kn.a,{to:"/build"},"Build")),l.a.createElement(Ke.a.Item,{key:"/dashboard"},l.a.createElement(Kn.a,{to:"/dashboard"},"Dashboard App")),l.a.createElement(Ke.a.Item,{key:"/schema"},l.a.createElement(Kn.a,{to:"/schema"},"Schema")))},l.a.createElement(Zn.a,null))))},cr=function(e){Object(j.a)(r,e);var t,n=Object(S.a)(r);function r(){return Object(g.a)(this,r),n.apply(this,arguments)}return Object(v.a)(r,[{key:"componentDidMount",value:(t=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("unhandledrejection",(function(e){var t=e.reason;console.log(t);var n=(t.stack||t).toString();ht("Playground Error",{error:n}),Ye.a.error({message:l.a.createElement("span",null,l.a.createElement("b",null,"Error"),"Â ðŸ˜¢",l.a.createElement("div",null,"Ask about it inÂ ",l.a.createElement("a",{href:"https://slack.cube.dev",target:"_blank",rel:"noopener noreferrer"},"Slack"),". These guys know how to fix this for sure!")),description:n})})),e.next=3,Object(x.a)("/playground/context");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.anonymousId,a={coreServerVersion:n.coreServerVersion,projectFingerprint:n.projectFingerprint},mt=a,ft(Object(O.a)({event:"identify",anonymousId:r},a));case 8:case"end":return e.stop()}var r,a}),e)}))),function(){return t.apply(this,arguments)})},{key:"componentDidCatch",value:function(e,t){ht("Playground Error",{error:(e.stack||e).toString(),info:t.toString()})}},{key:"render",value:function(){var e,t=(this.state||{}).fatalError,n=this.props,r=n.location,a=n.children;return l.a.createElement(Ln.a,{style:{height:"100%"}},l.a.createElement(ur,{selectedKeys:(e=r.pathname,"/template-gallery"===e?["/dashboard"]:[e])}),l.a.createElement(Ln.a.Content,{style:{height:"100%"}},t?l.a.createElement(Le.a,{message:"Error occured while rendering",description:t.stack,type:"error"}):a))}}],[{key:"getDerivedStateFromError",value:function(e){return{fatalError:e}}}]),r}(c.Component);cr.defaultProps={children:[]};var lr=Object(m.f)(cr);function pr(){var e=Object(Jn.a)(["\n  padding: 0 27px;\n  height: 40px;\n  border-radius: 4px;\n  border: 1px solid #d0d0da;\n  &.ant-btn-primary {\n    border: none;\n    &:hover {\n      background-color: #644aff;\n    }\n  }\n"]);return pr=function(){return e},e}var dr=Object(er.a)(B.a)(pr()),mr=function(e){return l.a.createElement(dr,e)};function fr(){return(fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function hr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var yr=l.a.createElement("path",{d:"M47 92V2",stroke:"#43436B",strokeWidth:3,strokeLinecap:"round"}),br=l.a.createElement("path",{d:"M92 47L2 47",stroke:"#43436B",strokeWidth:3,strokeLinecap:"round"}),gr=function(e){var t=e.svgRef,n=e.title,r=hr(e,["svgRef","title"]);return l.a.createElement("svg",fr({width:94,height:94,viewBox:"0 0 94 94",fill:"none",ref:t},r),n?l.a.createElement("title",null,n):null,yr,br)},vr=l.a.forwardRef((function(e,t){return l.a.createElement(gr,fr({svgRef:t},e))})),jr=(n.p,n(2225)),Sr=n(2218),xr=n(859);function Er(){var e=Object(Jn.a)(["\n  && {\n    .ant-form-item-label {\n      line-height: 16px;\n      margin-bottom: 7px;\n      label {\n        font-weight: 500;\n        font-size: 12px;\n        line-height: 16px;\n      }\n    }\n\n    .ant-dropdown-trigger {\n      border-color: #ececf0;\n      padding: 13px 16px;\n      line-height: 13px;\n    }\n  }\n"]);return Er=function(){return e},e}function kr(){var e=Object(Jn.a)(["\n  && {\n    .ant-modal-header {\n      border-bottom: none;\n      padding: 40px 32px 0 32px;\n\n      .ant-modal-title {\n        font-size: 20px;\n      }\n    }\n\n    .ant-modal-footer {\n      border-top: none;\n      padding: 0 32px 34px 32px;\n      text-align: left;\n    }\n  }\n"]);return kr=function(){return e},e}var _r=Object(er.a)(ze.a)(kr()),Cr=Object(er.a)(Sr.a)(Er()),Or=function(){return l.a.createElement(jr.a,{style:{color:"#727290"}})},wr=function(e){var t=e.visible,n=e.onOk,r=e.onCancel,a=e.onChange,i=e.chartLibraries,s=e.currentLibraryItem,o=e.frameworks,u=e.framework,c=e.frameworkItem,p=e.templatePackages,d=e.templatePackage,m=e.enableWebSocketTransport,f=l.a.createElement(Ke.a,{onClick:function(e){yt("Set Chart Library",{chartLibrary:e.key}),a("chartLibrary",e.key)}},i.map((function(e){return l.a.createElement(Ke.a.Item,{key:e.value},e.title)}))),h=l.a.createElement(Ke.a,{onClick:function(e){yt("Set Framework",{framework:e.key}),a("framework",e.key)}},o.map((function(e){return l.a.createElement(Ke.a.Item,{key:e.id},e.title)}))),y=l.a.createElement(Ke.a,{onClick:function(e){yt("Set Template Package",{templatePackageName:e.key}),a("templatePackageName",e.key)}},(p||[]).map((function(e){return l.a.createElement(Ke.a.Item,{key:e.name},e.description)})));return l.a.createElement(_r,{title:"Create your own Dashboard App",visible:t,onOk:n,onCancel:r,footer:[l.a.createElement(mr,{key:"submit",type:"primary",onClick:n},"Ok"),l.a.createElement(mr,{key:"back",onClick:r},"Cancel")]},l.a.createElement(Cr,null,l.a.createElement(Sr.a.Item,{label:"Framework"},l.a.createElement(He.a,{overlay:h},l.a.createElement(mr,null,c&&c.title,l.a.createElement(Or,null)))),c&&c.docsLink&&l.a.createElement(Le.a,{style:{marginBottom:23},type:"info",message:l.a.createElement("span",null,"We do not supportÂ ",c.title,"Â dashboard scaffolding generation yet. Please refer toÂ ",l.a.createElement("a",{href:c.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return yt("Unsupported Dashboard Framework Docs",{framework:u})}},c.title,"Â docs"),"Â to see on how to use it with Cube.js.")}),l.a.createElement(Sr.a.Item,{label:"Main Template"},l.a.createElement(He.a,{overlay:y,disabled:!!c.docsLink},l.a.createElement(mr,null,d&&d.description,l.a.createElement(Or,null)))),l.a.createElement(Sr.a.Item,{label:"Charting Library"},l.a.createElement(He.a,{overlay:f,disabled:!!c.docsLink},l.a.createElement(mr,null,s&&s.title,l.a.createElement(Or,null)))),l.a.createElement(Sr.a.Item,{label:"Web Socket Transport (Real-time)"},l.a.createElement(xr.a,{checked:m,onChange:function(e){return a("enableWebSocketTransport",e)}}))))};function Pr(){var e=Object(Jn.a)(["\n  display: block;\n  font-size: 16px;\n  margin-bottom: 25px;\n  margin-left: 15px;\n"]);return Pr=function(){return e},e}function Tr(){var e=Object(Jn.a)(["\n  border: 1px solid #ececf0;\n\n  border-radius: 4px;\n  margin-bottom: 20px;\n  button {\n    display: none;\n    position: absolute;\n    margin-left: -64px;\n    top: 80px;\n    left: 50%;\n  }\n  padding: 16px;\n  svg path {\n    transition: stroke 0.25s ease;\n  }\n\n  && .ant-card-cover {\n    height: 168px;\n    border-radius: 4px;\n    background: ",";\n    display: flex;\n    align-items: center;\n    position: relative;\n\n    &:after {\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      background: rgba(81, 87, 125, 0.3);\n      opacity: 0;\n      transition: all 0.25s;\n    }\n  }\n\n  &&.ant-card-hoverable:hover {\n    box-shadow: 0px 15px 20px rgba(67, 67, 107, 0.1);\n    button {\n      display: block;\n    }\n    svg path {\n      stroke: #7a77ff;\n    }\n    &:hover .ant-card-cover:after {\n      opacity: ",";\n    }\n  }\n\n  && .ant-card-body {\n    min-height: 175px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  && .ant-card-meta {\n    text-align: center;\n  }\n\n  && .ant-card-meta-title {\n    white-space: unset;\n    color: #43436b;\n  }\n\n  && .ant-card-meta-description {\n    color: #a1a1b5;\n    font-size: 13px;\n  }\n"]);return Tr=function(){return e},e}function Mr(){var e=Object(Jn.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  max-width: 1024px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ",";\n"]);return Mr=function(){return e},e}var Dr=function(e){var t=e.children;return l.a.createElement("div",{style:{marginTop:50,margin:25}},t)},Ar=er.a.div(Mr(),(function(e){return'url("'.concat(e.src,'")')})),Rr=Object(er.a)(R.a)(Tr(),(function(e){return e.createYourOwn?"#F8F8FB":"#EEEEF5"}),(function(e){return e.createYourOwn?"0":"1"})),qr=Object(er.a)(gn.a.Text)(Pr()),Lr=function(e){Object(j.a)(r,e);var t,n=Object(S.a)(r);function r(e){var t;return Object(g.a)(this,r),(t=n.call(this,e)).state={chartLibrary:Ht[0].value,framework:"react",templatePackageName:"react-antd-dynamic",templates:null},t}return Object(v.a)(r,[{key:"componentDidMount",value:(t=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardSource=new M,e.next=3,this.dashboardSource.load(!0);case 3:return e.t0=this,e.t1=this.dashboardSource.loadError,e.next=7,this.dashboardSource.templates();case 7:e.t2=e.sent,e.t3={loadError:e.t1,templates:e.t2},e.t0.setState.call(e.t0,e.t3);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.loadError,r=t.templates;if(n&&-1===n.indexOf("Dashboard app not found"))return l.a.createElement(m.a,{to:"/dashboard"});if(null==r)return l.a.createElement(E.a,null);var a=this.state,i=a.chartLibrary,s=a.framework,o=a.templatePackageName,u=a.createOwnModalVisible,c=a.enableWebSocketTransport,p=this.props.history,d=Ht.find((function(e){return e.value===i})),f=bt.find((function(e){return e.id===s})),h=this.dashboardSource&&this.dashboardSource.templatePackages.find((function(e){return e.name===o})),g=r.map((function(t){var n=t.name,r=t.description,a=(t.templatePackages,t.coverUrl);return l.a.createElement(A.a,{xs:{span:24},md:{span:12},lg:{span:8},xl:{span:6},key:n},l.a.createElement(Rr,{hoverable:!0,bordered:!1,cover:l.a.createElement(Ar,{src:a})},l.a.createElement(R.a.Meta,{title:n,description:r}),l.a.createElement(mr,{type:"primary",onClick:Object(b.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dashboardSource.applyTemplatePackages(n);case 2:p.push("/dashboard");case 3:case"end":return t.stop()}}),t)})))},"Create App")))})).concat([l.a.createElement(A.a,{xs:{span:24},md:{span:8},lg:{span:6},key:"own"},l.a.createElement(Rr,{onClick:function(){return e.setState({createOwnModalVisible:!0})},hoverable:!0,createYourOwn:!0,bordered:!1,cover:l.a.createElement(vr,null)},l.a.createElement(R.a.Meta,{title:"Create your Own",description:"Mix different templates together to create your own dashboard application"})),l.a.createElement(wr,{visible:u,onOk:Object(b.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({createOwnModalVisible:!1}),n=["create-react-app",o,"".concat(i,"-charts"),"".concat(o.match(/^react-(\w+)/)[1],"-tables"),"react-credentials"].concat(c?["react-web-socket-transport"]:[]),t.next=4,e.dashboardSource.applyTemplatePackages(n);case 4:p.push("/dashboard");case 5:case"end":return t.stop()}}),t)}))),onCancel:function(){return e.setState({createOwnModalVisible:!1})},onChange:function(t,n){return e.setState({[t]:n})},chartLibraries:Ht,currentLibraryItem:d,frameworks:bt,framework:s,frameworkItem:f,templatePackages:this.dashboardSource&&this.dashboardSource.templatePackages,templatePackage:h,enableWebSocketTransport:c}))]);return l.a.createElement(Dr,null,l.a.createElement(qr,null,"Build your app from one the popular templates below or"," ",l.a.createElement("a",{onClick:function(){return e.setState({createOwnModalVisible:!0})}},"create your own")),l.a.createElement(D.a,{align:"top",gutter:24},g))}}]),r}(c.Component),Br=Object(m.f)(Lr),Ir=Object(f.b)();Ir.listen((function(e){var t;t=e,ft(Object(O.a)({event:"page"},t))})),d.a.render(l.a.createElement(m.c,{history:Ir},l.a.createElement(lr,null,l.a.createElement(m.b,{key:"index",exact:!0,path:"/",component:k}),l.a.createElement(m.b,{key:"build",path:"/build",component:qn}),l.a.createElement(m.b,{key:"schema",path:"/schema",component:Un}),l.a.createElement(m.b,{key:"dashboard",path:"/dashboard",component:Wn}),l.a.createElement(m.b,{key:"template-gallery",path:"/template-gallery",component:Br}))),document.getElementById("root"))},936:function(e,t,n){e.exports=n(2212)}});