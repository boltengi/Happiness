!function(e){function t(t){for(var r,i,o=t[0],c=t[1],l=t[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);d.length;)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={1:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./";var o=this["webpackJsonp@cubejs-client/playground"]=this["webpackJsonp@cubejs-client/playground"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([909,0,2]),n()}({1072:function(e,t){},1312:function(e,t){},1351:function(e,t,n){var r={"./Binary_Property/ASCII.js":1352,"./Binary_Property/ASCII_Hex_Digit.js":1353,"./Binary_Property/Alphabetic.js":1354,"./Binary_Property/Any.js":1355,"./Binary_Property/Assigned.js":1356,"./Binary_Property/Bidi_Control.js":1357,"./Binary_Property/Bidi_Mirrored.js":1358,"./Binary_Property/Case_Ignorable.js":1359,"./Binary_Property/Cased.js":1360,"./Binary_Property/Changes_When_Casefolded.js":1361,"./Binary_Property/Changes_When_Casemapped.js":1362,"./Binary_Property/Changes_When_Lowercased.js":1363,"./Binary_Property/Changes_When_NFKC_Casefolded.js":1364,"./Binary_Property/Changes_When_Titlecased.js":1365,"./Binary_Property/Changes_When_Uppercased.js":1366,"./Binary_Property/Dash.js":1367,"./Binary_Property/Default_Ignorable_Code_Point.js":1368,"./Binary_Property/Deprecated.js":1369,"./Binary_Property/Diacritic.js":1370,"./Binary_Property/Emoji.js":1371,"./Binary_Property/Emoji_Component.js":1372,"./Binary_Property/Emoji_Modifier.js":1373,"./Binary_Property/Emoji_Modifier_Base.js":1374,"./Binary_Property/Emoji_Presentation.js":1375,"./Binary_Property/Extended_Pictographic.js":1376,"./Binary_Property/Extender.js":1377,"./Binary_Property/Grapheme_Base.js":1378,"./Binary_Property/Grapheme_Extend.js":1379,"./Binary_Property/Hex_Digit.js":1380,"./Binary_Property/IDS_Binary_Operator.js":1381,"./Binary_Property/IDS_Trinary_Operator.js":1382,"./Binary_Property/ID_Continue.js":1383,"./Binary_Property/ID_Start.js":1384,"./Binary_Property/Ideographic.js":1385,"./Binary_Property/Join_Control.js":1386,"./Binary_Property/Logical_Order_Exception.js":1387,"./Binary_Property/Lowercase.js":1388,"./Binary_Property/Math.js":1389,"./Binary_Property/Noncharacter_Code_Point.js":1390,"./Binary_Property/Pattern_Syntax.js":1391,"./Binary_Property/Pattern_White_Space.js":1392,"./Binary_Property/Quotation_Mark.js":1393,"./Binary_Property/Radical.js":1394,"./Binary_Property/Regional_Indicator.js":1395,"./Binary_Property/Sentence_Terminal.js":1396,"./Binary_Property/Soft_Dotted.js":1397,"./Binary_Property/Terminal_Punctuation.js":1398,"./Binary_Property/Unified_Ideograph.js":1399,"./Binary_Property/Uppercase.js":1400,"./Binary_Property/Variation_Selector.js":1401,"./Binary_Property/White_Space.js":1402,"./Binary_Property/XID_Continue.js":1403,"./Binary_Property/XID_Start.js":1404,"./General_Category/Cased_Letter.js":1405,"./General_Category/Close_Punctuation.js":1406,"./General_Category/Connector_Punctuation.js":1407,"./General_Category/Control.js":1408,"./General_Category/Currency_Symbol.js":1409,"./General_Category/Dash_Punctuation.js":1410,"./General_Category/Decimal_Number.js":1411,"./General_Category/Enclosing_Mark.js":1412,"./General_Category/Final_Punctuation.js":1413,"./General_Category/Format.js":1414,"./General_Category/Initial_Punctuation.js":1415,"./General_Category/Letter.js":1416,"./General_Category/Letter_Number.js":1417,"./General_Category/Line_Separator.js":1418,"./General_Category/Lowercase_Letter.js":1419,"./General_Category/Mark.js":1420,"./General_Category/Math_Symbol.js":1421,"./General_Category/Modifier_Letter.js":1422,"./General_Category/Modifier_Symbol.js":1423,"./General_Category/Nonspacing_Mark.js":1424,"./General_Category/Number.js":1425,"./General_Category/Open_Punctuation.js":1426,"./General_Category/Other.js":1427,"./General_Category/Other_Letter.js":1428,"./General_Category/Other_Number.js":1429,"./General_Category/Other_Punctuation.js":1430,"./General_Category/Other_Symbol.js":1431,"./General_Category/Paragraph_Separator.js":1432,"./General_Category/Private_Use.js":1433,"./General_Category/Punctuation.js":1434,"./General_Category/Separator.js":1435,"./General_Category/Space_Separator.js":1436,"./General_Category/Spacing_Mark.js":1437,"./General_Category/Surrogate.js":1438,"./General_Category/Symbol.js":1439,"./General_Category/Titlecase_Letter.js":1440,"./General_Category/Unassigned.js":1441,"./General_Category/Uppercase_Letter.js":1442,"./Script/Adlam.js":1443,"./Script/Ahom.js":1444,"./Script/Anatolian_Hieroglyphs.js":1445,"./Script/Arabic.js":1446,"./Script/Armenian.js":1447,"./Script/Avestan.js":1448,"./Script/Balinese.js":1449,"./Script/Bamum.js":1450,"./Script/Bassa_Vah.js":1451,"./Script/Batak.js":1452,"./Script/Bengali.js":1453,"./Script/Bhaiksuki.js":1454,"./Script/Bopomofo.js":1455,"./Script/Brahmi.js":1456,"./Script/Braille.js":1457,"./Script/Buginese.js":1458,"./Script/Buhid.js":1459,"./Script/Canadian_Aboriginal.js":1460,"./Script/Carian.js":1461,"./Script/Caucasian_Albanian.js":1462,"./Script/Chakma.js":1463,"./Script/Cham.js":1464,"./Script/Cherokee.js":1465,"./Script/Chorasmian.js":1466,"./Script/Common.js":1467,"./Script/Coptic.js":1468,"./Script/Cuneiform.js":1469,"./Script/Cypriot.js":1470,"./Script/Cyrillic.js":1471,"./Script/Deseret.js":1472,"./Script/Devanagari.js":1473,"./Script/Dives_Akuru.js":1474,"./Script/Dogra.js":1475,"./Script/Duployan.js":1476,"./Script/Egyptian_Hieroglyphs.js":1477,"./Script/Elbasan.js":1478,"./Script/Elymaic.js":1479,"./Script/Ethiopic.js":1480,"./Script/Georgian.js":1481,"./Script/Glagolitic.js":1482,"./Script/Gothic.js":1483,"./Script/Grantha.js":1484,"./Script/Greek.js":1485,"./Script/Gujarati.js":1486,"./Script/Gunjala_Gondi.js":1487,"./Script/Gurmukhi.js":1488,"./Script/Han.js":1489,"./Script/Hangul.js":1490,"./Script/Hanifi_Rohingya.js":1491,"./Script/Hanunoo.js":1492,"./Script/Hatran.js":1493,"./Script/Hebrew.js":1494,"./Script/Hiragana.js":1495,"./Script/Imperial_Aramaic.js":1496,"./Script/Inherited.js":1497,"./Script/Inscriptional_Pahlavi.js":1498,"./Script/Inscriptional_Parthian.js":1499,"./Script/Javanese.js":1500,"./Script/Kaithi.js":1501,"./Script/Kannada.js":1502,"./Script/Katakana.js":1503,"./Script/Kayah_Li.js":1504,"./Script/Kharoshthi.js":1505,"./Script/Khitan_Small_Script.js":1506,"./Script/Khmer.js":1507,"./Script/Khojki.js":1508,"./Script/Khudawadi.js":1509,"./Script/Lao.js":1510,"./Script/Latin.js":1511,"./Script/Lepcha.js":1512,"./Script/Limbu.js":1513,"./Script/Linear_A.js":1514,"./Script/Linear_B.js":1515,"./Script/Lisu.js":1516,"./Script/Lycian.js":1517,"./Script/Lydian.js":1518,"./Script/Mahajani.js":1519,"./Script/Makasar.js":1520,"./Script/Malayalam.js":1521,"./Script/Mandaic.js":1522,"./Script/Manichaean.js":1523,"./Script/Marchen.js":1524,"./Script/Masaram_Gondi.js":1525,"./Script/Medefaidrin.js":1526,"./Script/Meetei_Mayek.js":1527,"./Script/Mende_Kikakui.js":1528,"./Script/Meroitic_Cursive.js":1529,"./Script/Meroitic_Hieroglyphs.js":1530,"./Script/Miao.js":1531,"./Script/Modi.js":1532,"./Script/Mongolian.js":1533,"./Script/Mro.js":1534,"./Script/Multani.js":1535,"./Script/Myanmar.js":1536,"./Script/Nabataean.js":1537,"./Script/Nandinagari.js":1538,"./Script/New_Tai_Lue.js":1539,"./Script/Newa.js":1540,"./Script/Nko.js":1541,"./Script/Nushu.js":1542,"./Script/Nyiakeng_Puachue_Hmong.js":1543,"./Script/Ogham.js":1544,"./Script/Ol_Chiki.js":1545,"./Script/Old_Hungarian.js":1546,"./Script/Old_Italic.js":1547,"./Script/Old_North_Arabian.js":1548,"./Script/Old_Permic.js":1549,"./Script/Old_Persian.js":1550,"./Script/Old_Sogdian.js":1551,"./Script/Old_South_Arabian.js":1552,"./Script/Old_Turkic.js":1553,"./Script/Oriya.js":1554,"./Script/Osage.js":1555,"./Script/Osmanya.js":1556,"./Script/Pahawh_Hmong.js":1557,"./Script/Palmyrene.js":1558,"./Script/Pau_Cin_Hau.js":1559,"./Script/Phags_Pa.js":1560,"./Script/Phoenician.js":1561,"./Script/Psalter_Pahlavi.js":1562,"./Script/Rejang.js":1563,"./Script/Runic.js":1564,"./Script/Samaritan.js":1565,"./Script/Saurashtra.js":1566,"./Script/Sharada.js":1567,"./Script/Shavian.js":1568,"./Script/Siddham.js":1569,"./Script/SignWriting.js":1570,"./Script/Sinhala.js":1571,"./Script/Sogdian.js":1572,"./Script/Sora_Sompeng.js":1573,"./Script/Soyombo.js":1574,"./Script/Sundanese.js":1575,"./Script/Syloti_Nagri.js":1576,"./Script/Syriac.js":1577,"./Script/Tagalog.js":1578,"./Script/Tagbanwa.js":1579,"./Script/Tai_Le.js":1580,"./Script/Tai_Tham.js":1581,"./Script/Tai_Viet.js":1582,"./Script/Takri.js":1583,"./Script/Tamil.js":1584,"./Script/Tangut.js":1585,"./Script/Telugu.js":1586,"./Script/Thaana.js":1587,"./Script/Thai.js":1588,"./Script/Tibetan.js":1589,"./Script/Tifinagh.js":1590,"./Script/Tirhuta.js":1591,"./Script/Ugaritic.js":1592,"./Script/Vai.js":1593,"./Script/Wancho.js":1594,"./Script/Warang_Citi.js":1595,"./Script/Yezidi.js":1596,"./Script/Yi.js":1597,"./Script/Zanabazar_Square.js":1598,"./Script_Extensions/Adlam.js":1599,"./Script_Extensions/Ahom.js":1600,"./Script_Extensions/Anatolian_Hieroglyphs.js":1601,"./Script_Extensions/Arabic.js":1602,"./Script_Extensions/Armenian.js":1603,"./Script_Extensions/Avestan.js":1604,"./Script_Extensions/Balinese.js":1605,"./Script_Extensions/Bamum.js":1606,"./Script_Extensions/Bassa_Vah.js":1607,"./Script_Extensions/Batak.js":1608,"./Script_Extensions/Bengali.js":1609,"./Script_Extensions/Bhaiksuki.js":1610,"./Script_Extensions/Bopomofo.js":1611,"./Script_Extensions/Brahmi.js":1612,"./Script_Extensions/Braille.js":1613,"./Script_Extensions/Buginese.js":1614,"./Script_Extensions/Buhid.js":1615,"./Script_Extensions/Canadian_Aboriginal.js":1616,"./Script_Extensions/Carian.js":1617,"./Script_Extensions/Caucasian_Albanian.js":1618,"./Script_Extensions/Chakma.js":1619,"./Script_Extensions/Cham.js":1620,"./Script_Extensions/Cherokee.js":1621,"./Script_Extensions/Chorasmian.js":1622,"./Script_Extensions/Common.js":1623,"./Script_Extensions/Coptic.js":1624,"./Script_Extensions/Cuneiform.js":1625,"./Script_Extensions/Cypriot.js":1626,"./Script_Extensions/Cyrillic.js":1627,"./Script_Extensions/Deseret.js":1628,"./Script_Extensions/Devanagari.js":1629,"./Script_Extensions/Dives_Akuru.js":1630,"./Script_Extensions/Dogra.js":1631,"./Script_Extensions/Duployan.js":1632,"./Script_Extensions/Egyptian_Hieroglyphs.js":1633,"./Script_Extensions/Elbasan.js":1634,"./Script_Extensions/Elymaic.js":1635,"./Script_Extensions/Ethiopic.js":1636,"./Script_Extensions/Georgian.js":1637,"./Script_Extensions/Glagolitic.js":1638,"./Script_Extensions/Gothic.js":1639,"./Script_Extensions/Grantha.js":1640,"./Script_Extensions/Greek.js":1641,"./Script_Extensions/Gujarati.js":1642,"./Script_Extensions/Gunjala_Gondi.js":1643,"./Script_Extensions/Gurmukhi.js":1644,"./Script_Extensions/Han.js":1645,"./Script_Extensions/Hangul.js":1646,"./Script_Extensions/Hanifi_Rohingya.js":1647,"./Script_Extensions/Hanunoo.js":1648,"./Script_Extensions/Hatran.js":1649,"./Script_Extensions/Hebrew.js":1650,"./Script_Extensions/Hiragana.js":1651,"./Script_Extensions/Imperial_Aramaic.js":1652,"./Script_Extensions/Inherited.js":1653,"./Script_Extensions/Inscriptional_Pahlavi.js":1654,"./Script_Extensions/Inscriptional_Parthian.js":1655,"./Script_Extensions/Javanese.js":1656,"./Script_Extensions/Kaithi.js":1657,"./Script_Extensions/Kannada.js":1658,"./Script_Extensions/Katakana.js":1659,"./Script_Extensions/Kayah_Li.js":1660,"./Script_Extensions/Kharoshthi.js":1661,"./Script_Extensions/Khitan_Small_Script.js":1662,"./Script_Extensions/Khmer.js":1663,"./Script_Extensions/Khojki.js":1664,"./Script_Extensions/Khudawadi.js":1665,"./Script_Extensions/Lao.js":1666,"./Script_Extensions/Latin.js":1667,"./Script_Extensions/Lepcha.js":1668,"./Script_Extensions/Limbu.js":1669,"./Script_Extensions/Linear_A.js":1670,"./Script_Extensions/Linear_B.js":1671,"./Script_Extensions/Lisu.js":1672,"./Script_Extensions/Lycian.js":1673,"./Script_Extensions/Lydian.js":1674,"./Script_Extensions/Mahajani.js":1675,"./Script_Extensions/Makasar.js":1676,"./Script_Extensions/Malayalam.js":1677,"./Script_Extensions/Mandaic.js":1678,"./Script_Extensions/Manichaean.js":1679,"./Script_Extensions/Marchen.js":1680,"./Script_Extensions/Masaram_Gondi.js":1681,"./Script_Extensions/Medefaidrin.js":1682,"./Script_Extensions/Meetei_Mayek.js":1683,"./Script_Extensions/Mende_Kikakui.js":1684,"./Script_Extensions/Meroitic_Cursive.js":1685,"./Script_Extensions/Meroitic_Hieroglyphs.js":1686,"./Script_Extensions/Miao.js":1687,"./Script_Extensions/Modi.js":1688,"./Script_Extensions/Mongolian.js":1689,"./Script_Extensions/Mro.js":1690,"./Script_Extensions/Multani.js":1691,"./Script_Extensions/Myanmar.js":1692,"./Script_Extensions/Nabataean.js":1693,"./Script_Extensions/Nandinagari.js":1694,"./Script_Extensions/New_Tai_Lue.js":1695,"./Script_Extensions/Newa.js":1696,"./Script_Extensions/Nko.js":1697,"./Script_Extensions/Nushu.js":1698,"./Script_Extensions/Nyiakeng_Puachue_Hmong.js":1699,"./Script_Extensions/Ogham.js":1700,"./Script_Extensions/Ol_Chiki.js":1701,"./Script_Extensions/Old_Hungarian.js":1702,"./Script_Extensions/Old_Italic.js":1703,"./Script_Extensions/Old_North_Arabian.js":1704,"./Script_Extensions/Old_Permic.js":1705,"./Script_Extensions/Old_Persian.js":1706,"./Script_Extensions/Old_Sogdian.js":1707,"./Script_Extensions/Old_South_Arabian.js":1708,"./Script_Extensions/Old_Turkic.js":1709,"./Script_Extensions/Oriya.js":1710,"./Script_Extensions/Osage.js":1711,"./Script_Extensions/Osmanya.js":1712,"./Script_Extensions/Pahawh_Hmong.js":1713,"./Script_Extensions/Palmyrene.js":1714,"./Script_Extensions/Pau_Cin_Hau.js":1715,"./Script_Extensions/Phags_Pa.js":1716,"./Script_Extensions/Phoenician.js":1717,"./Script_Extensions/Psalter_Pahlavi.js":1718,"./Script_Extensions/Rejang.js":1719,"./Script_Extensions/Runic.js":1720,"./Script_Extensions/Samaritan.js":1721,"./Script_Extensions/Saurashtra.js":1722,"./Script_Extensions/Sharada.js":1723,"./Script_Extensions/Shavian.js":1724,"./Script_Extensions/Siddham.js":1725,"./Script_Extensions/SignWriting.js":1726,"./Script_Extensions/Sinhala.js":1727,"./Script_Extensions/Sogdian.js":1728,"./Script_Extensions/Sora_Sompeng.js":1729,"./Script_Extensions/Soyombo.js":1730,"./Script_Extensions/Sundanese.js":1731,"./Script_Extensions/Syloti_Nagri.js":1732,"./Script_Extensions/Syriac.js":1733,"./Script_Extensions/Tagalog.js":1734,"./Script_Extensions/Tagbanwa.js":1735,"./Script_Extensions/Tai_Le.js":1736,"./Script_Extensions/Tai_Tham.js":1737,"./Script_Extensions/Tai_Viet.js":1738,"./Script_Extensions/Takri.js":1739,"./Script_Extensions/Tamil.js":1740,"./Script_Extensions/Tangut.js":1741,"./Script_Extensions/Telugu.js":1742,"./Script_Extensions/Thaana.js":1743,"./Script_Extensions/Thai.js":1744,"./Script_Extensions/Tibetan.js":1745,"./Script_Extensions/Tifinagh.js":1746,"./Script_Extensions/Tirhuta.js":1747,"./Script_Extensions/Ugaritic.js":1748,"./Script_Extensions/Vai.js":1749,"./Script_Extensions/Wancho.js":1750,"./Script_Extensions/Warang_Citi.js":1751,"./Script_Extensions/Yezidi.js":1752,"./Script_Extensions/Yi.js":1753,"./Script_Extensions/Zanabazar_Square.js":1754,"./index.js":1755,"./unicode-version.js":1756};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=1351},177:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(923);var a=r(n(937));n(616);var s=r(n(938)),i=r(n(939)),o=r(n(618)),c=r(n(940)),l=r(n(941)),u=r(n(942));n(945),n(946),n(947),n(948),n(473),n(951),n(952),n(957),n(958),n(960),n(961),n(964),n(967),n(968),n(971),n(974);var p=r(n(975)),d=r(n(617)),m=r(n(979)),h=r(n(981)),y=n(2165),f=r(n(640)),b=r(n(985));n(986);var g=r(n(991));n(992);var j=r(n(993)),S=r(n(994)),v=r(n(642)),x=r(n(996)),E=b.extendMoment(f),k={day:function(e){return Array.from(e.by("day")).map((function(e){return e.format("YYYY-MM-DDT00:00:00.000")}))},month:function(e){return Array.from(e.snapTo("month").by("month")).map((function(e){return e.format("YYYY-MM-01T00:00:00.000")}))},year:function(e){return Array.from(e.snapTo("year").by("year")).map((function(e){return e.format("YYYY-01-01T00:00:00.000")}))},hour:function(e){return Array.from(e.by("hour")).map((function(e){return e.format("YYYY-MM-DDTHH:00:00.000")}))},minute:function(e){return Array.from(e.by("minute")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:00.000")}))},second:function(e){return Array.from(e.by("second")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:ss.000")}))},week:function(e){return Array.from(e.snapTo("isoweek").by("week")).map((function(e){return e.startOf("isoweek").format("YYYY-MM-DDT00:00:00.000")}))}},_=/^\d\d\d\d-\d\d-\d\d$/,C=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z?$/,O=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,e),this.loadResponse=t,this.parseDateMeasures=n.parseDateMeasures,this.options=n}return l(e,[{key:"drillDown",value:function(e,t){var n=e.xValues,r=void 0===n?[]:n,a=e.yValues,s=void 0===a?[]:a,o=this.normalizePivotConfig(t),c=[];o.x.forEach((function(e,t){return c.push([e,r[t]])})),o.y.forEach((function(e,t){return c.push([e,s[t]])}));var l=this.loadResponse.annotation.measures,u=c.find((function(e){return"measues"===h(e,1)[0]}))||[],p=h(u,2)[1];if(void 0===p){var d=Object.keys(l);p=h(d,1)[0]}if(!(l[p]&&l[p].drillMembers||[]).length)return null;var m=[{dimension:p,operator:"measureFilter"}],y=[];return c.filter((function(e){return"measures"!==h(e,1)[0]})).forEach((function(e){var t=h(e,2),n=t[0],r=t[1],a=n.split("."),s=h(a,3),i=s[0],o=s[1],c=s[2];if(void 0!==c){var l=E.range(r,r).snapTo(c);y.push({dimension:[i,o].join("."),dateRange:[l.start,l.end].map((function(e){return e.format(E.HTML5_FMT.DATETIME_LOCAL_MS)}))})}else m.push({member:n,operator:"equals",values:[r.toString()]})})),i(i({},l[p].drillMembersGrouped),{},{filters:m,timeDimensions:y})}},{key:"series",value:function(e){var t=this;return this.seriesNames(e).map((function(n){var r=n.title,a=n.key;return{title:r,key:a,series:t.chartPivot(e).map((function(e){var t=e.category,n=e.x;return{value:m(e,["category","x"])[a],category:t,x:n}}))}}))}},{key:"axisValues",value:function(e){var t=this.loadResponse.query;return function(n){var r=function(t){return e.filter((function(e){return"measures"!==e})).map((function(e){return null!=n[e]?n[e]:null})).concat(t?[t]:[])};return e.find((function(e){return"measures"===e}))&&(t.measures||[]).length?t.measures.map(r):[r()]}}},{key:"axisValuesString",value:function(e,t){return e.map((function(e){return null==e?"∅":""===e?"[Empty string]":e})).join(t||", ")}},{key:"normalizePivotConfig",value:function(t){var n=this.loadResponse.query;return e.getNormalizedPivotConfig(n,t)}},{key:"timeSeries",value:function(t){if(!t.granularity)return null;var n=t.dateRange;if(!n){var r=y.pipe(y.map((function(n){return n[e.timeDimensionMember(t)]&&E(n[e.timeDimensionMember(t)])})),y.filter((function(e){return!!e})))(this.timeDimensionBackwardCompatibleData());n=r.length&&[y.reduce(y.minBy((function(e){return e.toDate()})),r[0],r),y.reduce(y.maxBy((function(e){return e.toDate()})),r[0],r)]||null}if(!n)return null;var a=t.dateRange?t.dateRange.find((function(e){return e.match(_)})):!["hour","minute","second"].includes(t.granularity),s=h(n,2),i=s[0],o=s[1],c=E.range(i,o);if(!k[t.granularity])throw new Error("Unsupported time granularity: ".concat(t.granularity));return k[t.granularity](a?c.snapTo("day"):c)}},{key:"pivot",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r,a,s=(r=function(e){var t=e.xValues;return n.axisValuesString(t)},a=new Map,function(e){return e.forEach((function(e){var t=r(e);a.has(t)||a.set(t,[]),a.get(t).push(e)})),Array.from(a.entries())}),i=function(e,t,n){return e[t]};if(t.fillMissingDates&&1===t.x.length&&y.equals(t.x,(this.loadResponse.query.timeDimensions||[]).filter((function(e){return!!e.granularity})).map((function(t){return e.timeDimensionMember(t)})))){var o=this.timeSeries(this.loadResponse.query.timeDimensions[0]);o&&(s=function(e){var t=y.groupBy((function(e){var t=e.xValues;return E(t[0]).format(E.HTML5_FMT.DATETIME_LOCAL_MS)}),e);return y.toPairs(o.map((function(e){return d({},e,t[e]||[{xValues:[e],row:{}}])})).reduce((function(e,t){return Object.assign(e,t)}),{}))},i=function(e,t,n){return e[t]||0})}var c=y.pipe(y.map((function(e){return n.axisValues(t.x)(e).map((function(t){return{xValues:t,row:e}}))})),y.unnest,s)(this.timeDimensionBackwardCompatibleData()),l=y.pipe(y.map((function(e){var r=h(e,2)[1];return y.unnest(r.filter((function(e){var t=e.row;return Object.keys(t).length>0})).map((function(e){var r=e.row;return n.axisValues(t.y)(r)})))})),y.unnest,y.uniq)(c);return c.map((function(r){var a=h(r,2)[1],s=a[0].xValues,o=y.pipe(y.map((function(e){var r=e.row;return n.axisValues(t.y)(r).map((function(e){return{yValues:e,row:r}}))})),y.unnest,y.groupBy((function(e){var t=e.yValues;return n.axisValuesString(t)})))(a);return{xValues:s,yValuesArray:y.unnest(l.map((function(r){var a=t.x.find((function(e){return"measures"===e}))?e.measureFromAxis(s):e.measureFromAxis(r);return(o[n.axisValuesString(r)]||[{row:{}}]).map((function(e){var t=e.row;return[r,i(t,a,s)]}))})))}}))}},{key:"pivotedRows",value:function(e){return this.chartPivot(e)}},{key:"chartPivot",value:function(e){var t=this;return this.pivot(e).map((function(e){var n=e.xValues,r=e.yValuesArray;return i({category:t.axisValuesString(n,", "),x:t.axisValuesString(n,", "),xValues:n},r.map((function(e){var n,r=h(e,2),a=r[0],s=r[1];return d({},t.axisValuesString(a,", "),s&&(n=s,t.parseDateMeasures&&C.test(n)?new Date(n):Number.isNaN(Number.parseFloat(n))?n:Number.parseFloat(n)))})).reduce((function(e,t){return Object.assign(e,t)}),{}))}))}},{key:"tablePivot",value:function(e){var t=this.normalizePivotConfig(e||{}),n=t.x.concat(t.y).includes("measures");return this.pivot(t).map((function(e){var r=e.xValues,a=e.yValuesArray;return y.fromPairs(t.x.map((function(e,t){return[e,r[t]]})).concat(n?a.map((function(e){var t=h(e,2),n=t[0],r=t[1];return[n.length?n.join("."):"value",r]})):[]))}))}},{key:"tableColumns",value:function(e){var t=this,n=this.normalizePivotConfig(e),r={},a=function(e){var n=Object.values(t.loadResponse.annotation).reduce((function(e,t){return i(i({},e),t)}),{})[e]||{};return{key:e,title:n.title,shortTitle:n.shortTitle,type:n.type,format:n.format,meta:n.meta}},s=this.pivot(n);(s[0]&&s[0].yValuesArray||[]).forEach((function(e){var t=h(e,1)[0];if(t.length>0){var a=r;t.forEach((function(e,t){a[e]={key:e,memberId:"measures"===n.y[t]?e:n.y[t],children:a[e]&&a[e].children||{}},a=a[e].children}))}}));var o=[];return!s.length&&n.y.includes("measures")&&(o=(this.query().measures||[]).map((function(e){return i(i({},a(e)),{},{dataIndex:e})}))),!n.y.length&&n.x.includes("measures")&&o.push({key:"value",dataIndex:"value",title:"Value",shortTitle:"Value",type:"string"}),n.x.map((function(e){return"measures"===e?{key:"measures",dataIndex:"measures",title:"Measures",shortTitle:"Measures",type:"string"}:i(i({},a(e)),{},{dataIndex:e})})).concat(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0===Object.keys(t).length?[]:Object.values(t).map((function(t){var r=t.key,s=m(t,["key"]),o=e(s.children,[].concat(p(n),[r])),c=a(s.memberId),l=c.title,u=c.shortTitle,d=m(c,["title","shortTitle"]),h=r!==s.memberId?r:"";return o.length?i(i({},d),{},{key:r,title:[l,h].join(" ").trim(),shortTitle:h||u,children:o}):i(i({},d),{},{key:r,dataIndex:[].concat(p(n),[r]).join("."),title:[l,h].join(" ").trim(),shortTitle:h||u})}))}(r)).concat(o)}},{key:"totalRow",value:function(){return this.chartPivot()[0]}},{key:"categories",value:function(e){return this.chartPivot(e)}},{key:"seriesNames",value:function(t){var n=this;return t=this.normalizePivotConfig(t),y.pipe(y.map(this.axisValues(t.y)),y.unnest,y.uniq)(this.timeDimensionBackwardCompatibleData()).map((function(r){return{title:n.axisValuesString(t.y.find((function(e){return"measures"===e}))?y.dropLast(1,r).concat(n.loadResponse.annotation.measures[e.measureFromAxis(r)].title):r,", "),key:n.axisValuesString(r),yValues:r}}))}},{key:"query",value:function(){return this.loadResponse.query}},{key:"rawData",value:function(){return this.loadResponse.data}},{key:"annotation",value:function(){return this.loadResponse.annotation}},{key:"timeDimensionBackwardCompatibleData",value:function(){if(!this.backwardCompatibleData){var t=(this.loadResponse.query.timeDimensions||[]).filter((function(e){return!!e.granularity}));this.backwardCompatibleData=this.loadResponse.data.map((function(n){return i(i({},n),Object.keys(n).filter((function(r){return t.find((function(e){return e.dimension===r}))&&!n[e.timeDimensionMember(t.find((function(e){return e.dimension===r})))]})).map((function(r){return d({},e.timeDimensionMember(t.find((function(e){return e.dimension===r}))),n[r])})).reduce((function(e,t){return i(i({},e),t)}),{}))}))}return this.backwardCompatibleData}},{key:"serialize",value:function(){return{loadResponse:y.clone(this.loadResponse)}}}],[{key:"timeDimensionMember",value:function(e){return"".concat(e.dimension,".").concat(e.granularity)}},{key:"getNormalizedPivotConfig",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(t.timeDimensions||[]).filter((function(e){return!!e.granularity})),a=t.dimensions||[];n=n||(r.length?{x:r.map((function(t){return e.timeDimensionMember(t)})),y:a}:{x:a,y:[]});var s=function(n){return n.map((function(n){return r.find((function(e){return e.dimension===n}))&&!a.find((function(e){return e===n}))?e.timeDimensionMember(t.timeDimensions.find((function(e){return e.dimension===n}))):n}))};(n=i(i({},n),{},{x:p(n.x||[]),y:p(n.y||[])})).x=s(n.x||[]),n.y=s(n.y||[]);var o=n.x.concat(n.y),c=r.map((function(t){return e.timeDimensionMember(t)})).concat(a),l=function(e){return"measures"===e||"measures"!==e&&c.includes(e)};return n.x=n.x.concat(c.filter((function(e){return!o.includes(e)}))).filter(l),n.y=n.y.filter(l),n.x.concat(n.y).find((function(e){return"measures"===e}))||n.y.push("measures"),(t.measures||[]).length||(n.x=n.x.filter((function(e){return"measures"!==e})),n.y=n.y.filter((function(e){return"measures"!==e}))),null==n.fillMissingDates&&(n.fillMissingDates=!0),n}},{key:"measureFromAxis",value:function(e){return e[e.length-1]}},{key:"deserialize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(t.loadResponse,n)}}]),e}(),w=function(){function e(t){c(this,e),this.sqlQuery=t}return l(e,[{key:"rawQuery",value:function(){return this.sqlQuery.sql}},{key:"sql",value:function(){return this.rawQuery().sql[0]}}]),e}(),P=function(e){return y.fromPairs(e.map((function(e){return[e.name,e]})))},M={string:[{name:"contains",title:"contains"},{name:"notContains",title:"does not contain"},{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"}],number:[{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"},{name:"gt",title:">"},{name:"gte",title:">="},{name:"lt",title:"<"},{name:"lte",title:"<="}]},T=function(){function e(t){c(this,e),this.meta=t;var n=this.meta.cubes;this.cubes=n,this.cubesMap=y.fromPairs(n.map((function(e){return[e.name,{measures:P(e.measures),dimensions:P(e.dimensions),segments:P(e.segments)}]})))}return l(e,[{key:"membersForQuery",value:function(e,t){return y.unnest(this.cubes.map((function(e){return e[t]})))}},{key:"resolveMember",value:function(e,t){var n=this,r=e.split("."),a=h(r,1)[0];if(!this.cubesMap[a])return{title:e,error:"Cube not found ".concat(a," for path '").concat(e,"'")};var s=(Array.isArray(t)?t:[t]).map((function(t){return n.cubesMap[a][t]&&n.cubesMap[a][t][e]})).find((function(e){return e}));return s||{title:e,error:"Path not found '".concat(e,"'")}}},{key:"defaultTimeDimensionNameFor",value:function(e){var t=this,n=e.split("."),r=h(n,1)[0];return this.cubesMap[r]?Object.keys(this.cubesMap[r].dimensions||{}).find((function(e){return"time"===t.cubesMap[r].dimensions[e].type})):null}},{key:"filterOperatorsForMember",value:function(e,t){var n=this.resolveMember(e,t);return M[n.type]||M.string}}]),e}(),D=function(){function e(t){c(this,e),this.progressResponse=t}return l(e,[{key:"stage",value:function(){return this.progressResponse.stage}},{key:"timeElapsed",value:function(){return this.progressResponse.timeElapsed}}]),e}(),A=function(){function e(t){var n=t.authorization,r=t.apiUrl,a=t.headers,s=void 0===a?{}:a,i=t.credentials;c(this,e),this.authorization=n,this.apiUrl=r,this.headers=s,this.credentials=i}return l(e,[{key:"request",value:function(e,t){var n=this,r=t.baseRequestId,c=m(t,["baseRequestId"]),l=new URLSearchParams(c&&Object.keys(c).map((function(e){return d({},e,"object"===o(c[e])?JSON.stringify(c[e]):c[e])})).reduce((function(e,t){return i(i({},e),t)}),{})),u=1;return{subscribe:function(t){var o=this;return s(a.mark((function s(){var c;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g("".concat(n.apiUrl,"/").concat(e).concat(l.toString().length?"?".concat(l):""),{headers:i({Authorization:n.authorization,"x-request-id":r&&"".concat(r,"-span-").concat(u++)},n.headers),credentials:n.credentials});case 2:return c=a.sent,a.abrupt("return",t(c,(function(){return o.subscribe(t)})));case 4:case"end":return a.stop()}}),s)})))()}}}}]),e}();var R=function(e){j(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=v(e);if(t()){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(e,r){var a;return c(this,n),(a=t.call(this,e)).response=r,a}return n}(x(Error)),q=0,L=function(){function e(t,n){c(this,e),"object"===o(t)&&(n=t,t=void 0),n=n||{},this.apiToken=t,this.apiUrl=n.apiUrl||"https://statsbot.co/cubejs-api/v1",this.headers=n.headers||{},this.credentials=n.credentials,this.transport=n.transport||new A({authorization:"function"==typeof t?void 0:t,apiUrl:this.apiUrl,headers:this.headers,credentials:this.credentials}),this.pollInterval=n.pollInterval||5,this.parseDateMeasures=n.parseDateMeasures}var t;return l(e,[{key:"request",value:function(e,t){return this.transport.request(e,i({baseRequestId:u()},t))}},{key:"loadMethod",value:function(e,t,n,r){var i=this,o=++q;"function"!=typeof n||r||(r=n,n=void 0);var c=(n=n||{}).mutexKey||"default";n.mutexObj&&(n.mutexObj[c]=o);var l,u=this.updateTransportAuthorization().then((function(){return e()})),p=!1,d=function(){var e=s(a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u;case 2:if(t=e.sent,!n.mutexObj||n.mutexObj[c]===o){e.next=9;break}if(p=!0,!t.unsubscribe){e.next=8;break}return e.next=8,t.unsubscribe();case 8:throw"Mutex has been changed";case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=s(a.mark((function e(o,c){var l,m,h,y,f,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u;case 2:return l=e.sent,m=function(){var e=s(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.subscribe||p){e.next=8;break}if(!l.unsubscribe){e.next=5;break}return e.abrupt("return",c());case 5:return e.next=7,new Promise((function(e){return setTimeout((function(){return e()}),1e3*i.pollInterval)}));case 7:return e.abrupt("return",c());case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=5;break}if(!t){e.next=4;break}return e.next=4,new Promise((function(e){return setTimeout((function(){return e()}),1e3*i.pollInterval)}));case 4:return e.abrupt("return",c());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=7,i.updateTransportAuthorization();case 7:if(502!==o.status){e.next=11;break}return e.next=10,d();case 10:return e.abrupt("return",h(!0));case 11:return e.next=13,o.json();case 13:if("Continue wait"!==(y=e.sent).error){e.next=19;break}return e.next=17,d();case 17:return n.progressCallback&&n.progressCallback(new D(y)),e.abrupt("return",h());case 19:if(200===o.status){e.next=32;break}return e.next=22,d();case 22:if(n.subscribe||!l.unsubscribe){e.next=25;break}return e.next=25,l.unsubscribe();case 25:if(f=new R(y.error,y),!r){e.next=30;break}r(f),e.next=31;break;case 30:throw f;case 31:return e.abrupt("return",m());case 32:return e.next=34,d();case 34:if(n.subscribe||!l.unsubscribe){e.next=37;break}return e.next=37,l.unsubscribe();case 37:if(b=t(y),!r){e.next=42;break}r(null,b),e.next=43;break;case 42:return e.abrupt("return",b);case 43:return e.abrupt("return",m());case 44:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=u.then((function(e){return function(e){return new Promise((function(t,n){e.then((function(e){return t(e)}),(function(e){return"Mutex has been changed"!==e&&n(e)}))}))}(e.subscribe(m))}));return r?{unsubscribe:(l=s(a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u;case 2:if(t=e.sent,p=!0,!t.unsubscribe){e.next=6;break}return e.abrupt("return",t.unsubscribe());case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})}:h}},{key:"updateTransportAuthorization",value:(t=s(a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.apiToken){e.next=5;break}return e.next=3,this.apiToken();case 3:t=e.sent,this.transport.authorization!==t&&(this.transport.authorization=t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"load",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("load",{query:e})}),(function(e){return new O(e,{parseDateMeasures:r.parseDateMeasures})}),t,n)}},{key:"sql",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("sql",{query:e})}),(function(e){return new w(e)}),t,n)}},{key:"meta",value:function(e,t){var n=this;return this.loadMethod((function(){return n.request("meta")}),(function(e){return new T(e)}),e,t)}},{key:"subscribe",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("subscribe",{query:e})}),(function(e){return new O(e,{parseDateMeasures:r.parseDateMeasures})}),i(i({},t),{},{subscribe:!0}),n)}}]),e}();t.default=function(e,t){return new L(e,t)},t.HttpTransport=A,t.ResultSet=O},1869:function(e,t,n){},2090:function(e,t,n){},2091:function(e,t,n){},2166:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"QueryRenderer",(function(){return Se})),n.d(r,"QueryRendererWithTotals",(function(){return ve})),n.d(r,"QueryBuilder",(function(){return ke})),n.d(r,"isQueryPresent",(function(){return ge})),n.d(r,"CubeContext",(function(){return je})),n.d(r,"CubeProvider",(function(){return _e})),n.d(r,"useCubeQuery",(function(){return Oe}));var a={};n.r(a),n.d(a,"sourceCodeTemplate",(function(){return xt})),n.d(a,"imports",(function(){return Et}));var s={};n.r(s),n.d(s,"sourceCodeTemplate",(function(){return Ct})),n.d(s,"imports",(function(){return Ot}));var i={};n.r(i),n.d(i,"sourceCodeTemplate",(function(){return Mt})),n.d(i,"imports",(function(){return Tt}));var o={};n.r(o),n.d(o,"sourceCodeTemplate",(function(){return Bt})),n.d(o,"imports",(function(){return It}));var c={};n.r(c),n.d(c,"sourceCodeTemplate",(function(){return Ft})),n.d(c,"imports",(function(){return Qt}));var l=n(0),u=n.n(l),p=n(12),d=n.n(p),m=n(68),h=n(112),y=n(29),f=n.n(y),b=n(51),g=n(133),j=n(198);class S extends l.Component{constructor(e){super(e),this.state={}}componentDidMount(){var e=this;return Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadFiles();case 2:case"end":return t.stop()}}),t)})))()}loadFiles(){var e=this;return Object(b.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.a)("/playground/files");case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,e.setState({files:r.files});case 7:case"end":return t.stop()}}),t)})))()}render(){return this.state.files?u.a.createElement(m.a,{to:!this.state.files.length||1===this.state.files.length&&"Orders.js"===this.state.files[0].fileName?"/schema":"/build"}):u.a.createElement("div",{style:{textAlign:"center",padding:24}},u.a.createElement(j.a,null))}}var v=S,x=n(177),E=n.n(x),k=n(43),_=n(209);const C=(e,t)=>{let n=t||{},r=n.retries,a=Object(_.a)(n,["retries"]);return r=r||0,Object(g.a)(e,a).then(function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=6;break}return e.next=3,t.text();case 3:n=e.sent;try{r=JSON.parse(n),n=r.error}catch(e){}throw n;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(n=>{if("Network request failed"===n.message&&r>0)return C(e,{options:t,retries:r-1});throw n})};var O=C;const w=(e,t,n)=>O(e,Object(k.a)(Object(k.a)({},t),{},{retries:n}));var P=class{load(e){var t=this;return Object(b.a)(f.a.mark((function n(){var r,a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loadError=null,n.next=3,w("/playground/dashboard-app-create-status".concat(e?"?instant=true":""),void 0,10);case 3:return r=n.sent,n.next=6,r.json();case 6:(a=n.sent).error?t.loadError=a.error:(t.dashboardCreated="created"===a.status,t.installedTemplates=a.installedTemplates);case 8:case"end":return n.stop()}}),n)})))()}applyTemplatePackages(e,t){var n=this;return Object(b.a)(f.a.mark((function r(){return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.playgroundContext){r.next=4;break}return r.next=3,n.loadContext();case 3:n.playgroundContext=r.sent;case 4:return r.abrupt("return",w("/playground/apply-template-packages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templatePackages:e,templateConfig:t||{credentials:n.playgroundContext}})}));case 5:case"end":return r.stop()}}),r)})))()}loadContext(){return Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",{cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e)})))()}get templatePackages(){return[{name:"react-antd-dynamic",description:"React Antd Dynamic"},{name:"react-antd-static",description:"React Antd Static"},{name:"react-material-static",description:"React Material UI Static"}]}canAddChart(){var e=this;return Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load();case 2:if(!e.loadError){t.next=4;break}return t.abrupt("return",e.loadError);case 4:return t.abrupt("return",!!Object.keys(e.installedTemplates).find(e=>e.match(/-static$/)));case 5:case"end":return t.stop()}}),t)})))()}addChart(e){var t=this;return Object(b.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.load();case 2:if(!t.loadError){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,t.applyTemplatePackages(["create-react-app",Object.keys(t.installedTemplates).find(e=>e.match(/-static$/)),"static-chart"],{"static-chart":{chartCode:e}});case 6:case"end":return n.stop()}}),n)})))()}},M=n(212),T=n(126),D=n(840),A=n(819),R=n(401),q=n(58),L=n(2197),B=n(2196),I=(n(643),n(1013),n(1014),n(1031),n(1033),n(151)),N=n.n(I),F=n(15),Q=n.n(F),G=n(585),V=n.n(G),U=n(338),K=n.n(U),z=n(586),H=n.n(z),Y=n(587),W=n.n(Y),J=n(339),$=n.n(J),X=n(102),Z=n.n(X),ee=n(904),te=n(2170),ne=n(2171),re=n(2176),ae=n(2175),se=n(2174),ie=n(841),oe=n.n(ie),ce=n(446),le=n.n(ce),ue=(n(1043),n(1044),n(1045),n(1046),n(1047),n(1049),n(1053),n(329)),pe=n.n(ue),de=n(248),me=n.n(de),he=(n(670),n(447)),ye=n.n(he),fe=n(249),be=n.n(fe),ge=function(e){return e.measures&&e.measures.length||e.dimensions&&e.dimensions.length||e.timeDimensions&&e.timeDimensions.length},je=Object(X.createContext)(null);var Se=function(e){H()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=$()(e);if(t()){var a=$()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W()(this,n)}}(n);function n(e){var r;return V()(this,n),(r=t.call(this,e)).state={},r.mutexObj={},r}return K()(n,null,[{key:"isQueryPresent",value:function(e){return ge(e)}}]),K()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.query,n=e.queries;t&&this.load(t),n&&this.loadQueries(n)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.query,a=n.queries,s=n.render,i=n.cubejsApi,o=n.loadSql,c=n.updateOnlyOnStateChange;return!c||(!Object(ee.a)(e.query,r)||!Object(ee.a)(e.queries,a)||(null==e.render||null==s)&&e.render!==s||e.cubejsApi!==i||e.loadSql!==o||!Object(ee.a)(t,this.state)||e.updateOnlyOnStateChange!==c)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.query,r=t.queries;Object(ee.a)(e.query,n)||this.load(n),Object(ee.a)(e.queries,r)||this.loadQueries(r)}},{key:"cubejsApi",value:function(){return this.props.cubejsApi||this.context&&this.context.cubejsApi}},{key:"load",value:function(e){var t=this,r=this.props.resetResultSetOnChange;this.setState(Q()({isLoading:!0,error:null,sqlQuery:null},r?{resultSet:null}:{}));var a=this.props.loadSql,s=this.cubejsApi();e&&n.isQueryPresent(e)&&("only"===a?s.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}).then((function(e){return t.setState({sqlQuery:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(Q()(Q()({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):a?Promise.all([s.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}),s.load(e,{mutexObj:this.mutexObj,mutexKey:"query"})]).then((function(e){var n=N()(e,2),r=n[0],a=n[1];return t.setState({sqlQuery:r,resultSet:a,error:null,isLoading:!1})})).catch((function(e){return t.setState(Q()(Q()({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):s.load(e,{mutexObj:this.mutexObj,mutexKey:"query"}).then((function(e){return t.setState({resultSet:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(Q()(Q()({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})))}},{key:"loadQueries",value:function(e){var t=this,n=this.cubejsApi(),r=this.props.resetResultSetOnChange;this.setState(Q()(Q()({isLoading:!0},r?{resultSet:null}:{}),{},{error:null})),Promise.all(Object(te.a)(e).map((function(e){var r=N()(e,2),a=r[0],s=r[1];return n.load(s,{mutexObj:t.mutexObj,mutexKey:a}).then((function(e){return[a,e]}))}))).then((function(e){return t.setState({resultSet:Object(ne.a)(e),error:null,isLoading:!1})})).catch((function(e){return t.setState(Q()(Q()({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.queries,r=e.resultSet,a=e.isLoading,s=e.sqlQuery,i=this.props.render;return i?i({error:t,resultSet:n?r||{}:r,loadingState:{isLoading:a},sqlQuery:s}):null}}]),n}(Z.a.Component);Se.contextType=je,Se.defaultProps={cubejsApi:null,query:null,render:null,queries:null,loadSql:null,updateOnlyOnStateChange:!1,resetResultSetOnChange:!0};var ve=function(e){var t=e.query,n=le()(e,["query"]);return Z.a.createElement(Se,oe()({queries:{totals:Q()(Q()({},t),{},{dimensions:[],timeDimensions:t.timeDimensions?t.timeDimensions.map((function(e){return Q()(Q()({},e),{},{granularity:null})})):void 0}),main:t}},n))};function xe(e,t,n){var r=be()(e),a=r.splice(t,1),s=N()(a,1)[0];return r.splice(n,0,s),r}ve.defaultProps={query:null,render:null,queries:null,loadSql:null};var Ee=[{name:void 0,title:"w/o grouping"},{name:"hour",title:"Hour"},{name:"day",title:"Day"},{name:"week",title:"Week"},{name:"month",title:"Month"},{name:"year",title:"Year"}],ke=function(e){H()(a,e);var t,n,r=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=$()(e);if(t()){var a=$()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W()(this,n)}}(a);function a(e){var t;return V()(this,a),(t=r.call(this,e)).state=Q()({query:e.query,chartType:"line",orderMembers:[],pivotConfig:null},e.vizState),t.mutexObj={},t}return K()(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=Q()(Q()({},t),e.vizState||{});return Q()(Q()({},n),{},{query:Q()(Q()({},n.query),e.query||{})})}},{key:"resolveMember",value:function(e,t){var n=t.meta,r=t.query;return n?"timeDimensions"===e?(r.timeDimensions||[]).map((function(e,t){return Q()(Q()({},e),{},{dimension:Q()(Q()({},n.resolveMember(e.dimension,"dimensions")),{},{granularities:Ee}),index:t})})):(r[e]||[]).map((function(t,r){return Q()({index:r},n.resolveMember(t,e))})):[]}},{key:"getOrderMembers",value:function(e){var t=e.query;if(!e.meta)return[];var n=function(e){return{id:e.name,title:e.title}};return Object(re.a)(Object(ae.a)("id"),[].concat(be()(a.resolveMember("measures",e).map(n)),be()(a.resolveMember("dimensions",e).map(n)),be()(a.resolveMember("timeDimensions",e).map((function(e){return n(e.dimension)})))).map((function(e){return Q()(Q()({},e),{},{order:t.order&&t.order[e.id]||"none"})})))}}]),K()(a,[{key:"componentDidMount",value:(n=ye()(me.a.mark((function e(){var t,n,r,s;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.query,r=t.pivotConfig,e.next=3,this.cubejsApi().meta();case 3:s=e.sent,this.setState({meta:s,orderMembers:a.getOrderMembers({meta:s,query:n}),pivotConfig:x.ResultSet.getNormalizedPivotConfig(n||{},r)});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"cubejsApi",value:function(){var e=this.props.cubejsApi;return e||this.context&&this.context.cubejsApi}},{key:"isQueryPresent",value:function(){var e=this.state.query;return Se.isQueryPresent(e)}},{key:"prepareRenderProps",value:function(e){var t=this,n=function(e){return e.name},r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return{add:function(n){var a=t.state.query;t.updateQuery(pe()({},e,(a[e]||[]).concat(r(n))))},remove:function(n){var r=(t.state.query[e]||[]).concat([]);return r.splice(n.index,1),t.updateQuery(pe()({},e,r))},update:function(n,a){var s=(t.state.query[e]||[]).concat([]);return s.splice(n.index,1,r(a)),t.updateQuery(pe()({},e,s))}}},s=this.state,i=s.meta,o=s.query,c=s.orderMembers,l=void 0===c?[]:c,u=s.chartType,p=s.pivotConfig;return Q()({meta:i,query:o,validatedQuery:this.validatedQuery(),isQueryPresent:this.isQueryPresent(),chartType:u,measures:a.resolveMember("measures",this.state),dimensions:a.resolveMember("dimensions",this.state),timeDimensions:a.resolveMember("timeDimensions",this.state),segments:(i&&o.segments||[]).map((function(e,t){return Q()({index:t},i.resolveMember(e,"segments"))})),filters:(i&&o.filters||[]).map((function(e,t){return Q()(Q()({},e),{},{dimension:i.resolveMember(e.dimension,["dimensions","measures"]),operators:i.filterOperatorsForMember(e.dimension,["dimensions","measures"]),index:t})})),orderMembers:l,availableMeasures:i&&i.membersForQuery(o,"measures")||[],availableDimensions:i&&i.membersForQuery(o,"dimensions")||[],availableTimeDimensions:(i&&i.membersForQuery(o,"dimensions")||[]).filter((function(e){return"time"===e.type})),availableSegments:i&&i.membersForQuery(o,"segments")||[],updateQuery:function(e){return t.updateQuery(e)},updateMeasures:r("measures"),updateDimensions:r("dimensions"),updateSegments:r("segments"),updateTimeDimensions:r("timeDimensions",(function(e){return{dimension:e.dimension.name,granularity:e.granularity,dateRange:e.dateRange}})),updateFilters:r("filters",(function(e){return{dimension:e.dimension.name,operator:e.operator,values:e.values}})),updateChartType:function(e){return t.updateVizState({chartType:e})},updateOrder:{set:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";t.updateVizState({orderMembers:l.map((function(t){return Q()(Q()({},t),{},{order:t.id===e?n:t.order})}))})},update:function(e){t.updateQuery({order:e})},reorder:function(e,n){null!=e&&null!=n&&t.updateVizState({orderMembers:xe(l,e,n)})}},pivotConfig:p,updatePivotConfig:{moveItem:function(e){var n=e.sourceIndex,r=e.destinationIndex,a=e.sourceAxis,s=e.destinationAxis,i=Q()(Q()({},p),{},{x:be()(p.x),y:be()(p.y)}),o=p[a][n],c=i[s].length-1;"measures"===o?r=c+1:r>=c&&"measures"===i[s][c]&&(r=c-1),i[a].splice(n,1),i[s].splice(r,0,o),t.updateVizState({pivotConfig:i})},update:function(e){t.updateVizState({pivotConfig:Q()(Q()({},p),e)})}}},e)}},{key:"updateQuery",value:function(e){var t=this.state.query;this.updateVizState({query:Q()(Q()({},t),e)})}},{key:"updateVizState",value:(t=ye()(me.a.mark((function e(t){var n,r,s,i,o,c,l,u,p,d,m,h,y,f,b,g,j,S,v;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.setQuery,s=n.setVizState,i=this.state,o=i.query,c=i.pivotConfig,l=this.applyStateChangeHeuristics(t),(u=l.query||{}).order,p=le()(u,["order"]),!l.shouldApplyHeuristicOrder||!Se.isQueryPresent(p)){e.next=16;break}return e.prev=5,e.next=8,this.cubejsApi().sql(p,{mutexObj:this.mutexObj});case 8:d=e.sent,m=d.sqlQuery,l.query.order=m.sql.order,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0);case 16:h=void 0!==l.pivotConfig?l.pivotConfig:c,y=Object(se.a)(Object(ae.a)("id"),a.getOrderMembers(Q()(Q()({},this.state),l))),f=(l.orderMembers||[]).map((function(e){return e.id})),b=(l.orderMembers||[]).filter((function(e){var t=e.id;return Boolean(y[t])})),Object.entries(y).forEach((function(e){var t=N()(e,2),n=t[0],r=t[1];f.includes(n)||b.push(r)})),g=Object(ne.a)(b.map((function(e){var t=e.id,n=e.order;return"none"!==n&&[t,n]})).filter(Boolean)),j=Q()(Q()(Q()({},o),p),{},{order:g}),l=Q()(Q()({},l),{},{query:j,orderMembers:b,pivotConfig:x.ResultSet.getNormalizedPivotConfig(j,h)}),this.setState(l),l=Q()(Q()({},this.state),l),r&&r(l.query),s&&((S=l).meta,v=le()(S,["meta"]),s(v));case 28:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e){return t.apply(this,arguments)})},{key:"validatedQuery",value:function(){var e=this.state.query;return Q()(Q()({},e),{},{filters:(e.filters||[]).filter((function(e){return e.operator}))})}},{key:"defaultHeuristics",value:function(e){var t=this.state,n=t.query,r=t.sessionGranularity||"day";if(e.query){var a=n,s=e.query,i=this.state.meta;if(1===(a.timeDimensions||[]).length&&1===(s.timeDimensions||[]).length&&s.timeDimensions[0].granularity&&a.timeDimensions[0].granularity!==s.timeDimensions[0].granularity&&(e=Q()(Q()({},e),{},{sessionGranularity:s.timeDimensions[0].granularity})),0===(a.measures||[]).length&&(s.measures||[]).length>0||1===(a.measures||[]).length&&1===(s.measures||[]).length&&a.measures[0]!==s.measures[0]){var o=i.defaultTimeDimensionNameFor(s.measures[0]);return s=Q()(Q()({},s),{},{timeDimensions:o?[{dimension:o,granularity:r}]:[]}),Q()(Q()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:s,chartType:o?"line":"number"})}return 0===(a.dimensions||[]).length&&(s.dimensions||[]).length>0?(s=Q()(Q()({},s),{},{timeDimensions:(s.timeDimensions||[]).map((function(e){return Q()(Q()({},e),{},{granularity:void 0})}))}),Q()(Q()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:s,chartType:"table"})):(a.dimensions||[]).length>0&&0===(s.dimensions||[]).length?(s=Q()(Q()({},s),{},{timeDimensions:(s.timeDimensions||[]).map((function(e){return Q()(Q()({},e),{},{granularity:e.granularity||r})}))}),Q()(Q()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:s,chartType:(s.timeDimensions||[]).length?"line":"number"})):((a.dimensions||[]).length>0||(a.measures||[]).length>0)&&0===(s.dimensions||[]).length&&0===(s.measures||[]).length?(s=Q()(Q()({},s),{},{timeDimensions:[],filters:[]}),Q()(Q()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:s,sessionGranularity:null})):e}if(e.chartType){var c=e.chartType;if(("line"===c||"area"===c)&&1===(n.timeDimensions||[]).length&&!n.timeDimensions[0].granularity){var l=N()(n.timeDimensions,1)[0];return Q()(Q()({},e),{},{pivotConfig:null,query:Q()(Q()({},n),{},{timeDimensions:[Q()(Q()({},l),{},{granularity:r})]})})}if(("pie"===c||"table"===c||"number"===c)&&1===(n.timeDimensions||[]).length&&n.timeDimensions[0].granularity){var u=N()(n.timeDimensions,1)[0];return Q()(Q()({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:Q()(Q()({},n),{},{timeDimensions:[Q()(Q()({},u),{},{granularity:void 0})]})})}}return e}},{key:"applyStateChangeHeuristics",value:function(e){var t=this.props,n=t.stateChangeHeuristics;return t.disableHeuristics?e:n&&n(this.state,e)||this.defaultHeuristics(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.cubejsApi,r=t.render;return t.wrapWithQueryRenderer?Z.a.createElement(Se,{query:this.validatedQuery(),cubejsApi:n,render:function(t){return r?r(e.prepareRenderProps(t)):null}}):r?r(this.prepareRenderProps()):null}}]),a}(Z.a.Component);ke.contextType=je,ke.defaultProps={cubejsApi:null,query:{},setQuery:null,setVizState:null,stateChangeHeuristics:null,disableHeuristics:!1,render:null,wrapWithQueryRenderer:!0,vizState:{}};var _e=function(e){var t=e.cubejsApi,n=e.children;return Z.a.createElement(je.Provider,{value:{cubejsApi:t}},n)};function Ce(e){var t=Object(X.useRef)([]);return Object(ee.a)(e,t.current)||(t.current=e),t.current}var Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(X.useRef)({}),r=Object(X.useState)(null),a=N()(r,2),s=a[0],i=a[1],o=Object(X.useState)(!1),c=N()(o,2),l=c[0],u=c[1],p=Object(X.useState)(null),d=N()(p,2),m=d[0],h=d[1],y=Object(X.useState)(null),f=N()(y,2),b=f[0],g=f[1],j=Object(X.useContext)(je),S=null;return Object(X.useEffect)((function(){var r=t.skip,a=void 0!==r&&r,o=t.resetResultSetOnChange;function c(){return(c=ye()(me.a.mark((function r(){var c;return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a||!e||!ge(e)){r.next=26;break}if(!!Object(ee.a)(Object.keys(s&&s.order||{}),Object.keys(e.order||{}))&&Object(ee.a)(s,e)||((null==o||o)&&h(null),g(null),i(e)),u(!0),r.prev=4,!S){r.next=9;break}return r.next=8,S.unsubscribe();case 8:S=null;case 9:if(c=t.cubejsApi||j&&j.cubejsApi,!t.subscribe){r.next=14;break}S=c.subscribe(e,{mutexObj:n.current,mutexKey:"query"},(function(e,t){e?g(e):h(t),u(!1)})),r.next=20;break;case 14:return r.t0=h,r.next=17,c.load(e,{mutexObj:n.current,mutexKey:"query"});case 17:r.t1=r.sent,(0,r.t0)(r.t1),u(!1);case 20:r.next=26;break;case 22:r.prev=22,r.t2=r.catch(4),g(r.t2),u(!1);case 26:case"end":return r.stop()}}),r,null,[[4,22]])})))).apply(this,arguments)}return function(){c.apply(this,arguments)}(),function(){S&&(S.unsubscribe(),S=null)}}),Ce([e,Object.keys(e&&e.order||{}),t,j])),{isLoading:l,resultSet:m,error:b}},we=n(595),Pe=n(907),Me=n(842),Te=n.n(Me),De=n(845),Ae=n.n(De),Re=n(60),qe=n(839),Le=n(2181),Be=n(2182),Ie=n(2183),Ne=n(2184),Fe=n(2185),Qe=n(2186),Ge=n(2187),Ve=n(2189),Ue=n(77),Ke=n(835),ze=n(200),He=n(405),Ye=n(846),We=n(2173),Je=n(331),$e=n.n(Je),Xe=n(588),Ze=n.n(Xe);n(1869);class et extends u.a.Component{componentDidMount(){Ze.a.highlightAll()}componentDidUpdate(){Ze.a.highlightAll()}render(){return u.a.createElement("pre",{style:this.props.style},u.a.createElement("code",{className:"language-javascript"},this.props.code))}}var tt=et,nt=n(2178),rt=n(2179),at=n(328),st=n(834);var it=({query:e,cubejsApi:t})=>u.a.createElement(Se,{loadSql:!0,query:Object(k.a)(Object(k.a)({},e),{},{renewQuery:!0}),cubejsApi:t,render:({sqlQuery:e,resultSet:t})=>u.a.createElement(at.a,{defaultActiveKey:"refreshKeys",tabBarExtraContent:u.a.createElement("span",null,"Last Refresh Time: ",u.a.createElement("b",null,t&&t.loadResponse.lastRefreshTime))},u.a.createElement(at.a.TabPane,{tab:"Refresh Keys",key:"refreshKeys"},u.a.createElement(st.a,{loading:!e,pagination:!1,scroll:{x:!0},columns:[{title:"Refresh Key SQL",key:"refreshKey",render:(e,t)=>u.a.createElement(tt,{code:$e.a.format(t[0])})},{title:"Value",key:"value",render:(n,r)=>u.a.createElement(tt,{code:t&&t.loadResponse.refreshKeyValues&&JSON.stringify(t.loadResponse.refreshKeyValues[e.sqlQuery.sql.cacheKeyQueries.queries.indexOf(r)],null,2)})}],dataSource:e&&e.sqlQuery.sql&&e.sqlQuery.sql.cacheKeyQueries.queries})),u.a.createElement(at.a.TabPane,{tab:"Pre-aggregations",key:"preAggregations"},u.a.createElement(st.a,{loading:!e,pagination:!1,scroll:{x:!0},columns:[{title:"Table Name",key:"tableName",dataIndex:"tableName",render:e=>u.a.createElement("b",null,e)},{title:"Refresh Key SQL",key:"refreshKey",dataIndex:"invalidateKeyQueries",render:e=>e.map(e=>u.a.createElement(tt,{key:e[0],code:$e.a.format(e[0])}))},{title:"Refresh Key Value",key:"value",render:(e,n)=>t&&t.loadResponse.usedPreAggregations&&t.loadResponse.usedPreAggregations[n.tableName].refreshKeyValues&&t.loadResponse.usedPreAggregations[n.tableName].refreshKeyValues.map(e=>u.a.createElement(tt,{key:JSON.stringify(e),code:JSON.stringify(e,null,2)}))}],dataSource:e&&e.sqlQuery.sql&&e.sqlQuery.sql.preAggregations})),u.a.createElement(at.a.TabPane,{tab:"Rollup Match Results",key:"rollupMatchResults"},u.a.createElement(st.a,{loading:!e,pagination:!1,scroll:{x:!0},columns:[{title:"Rollup Table Name",key:"tableName",dataIndex:"tableName",render:e=>u.a.createElement("b",null,e)},{title:"Rollup Definition",key:"rollup",dataIndex:"references",render:e=>u.a.createElement(tt,{code:JSON.stringify(e,null,2)})},{title:"Can Be Used",key:"canUsePreAggregation",dataIndex:"canUsePreAggregation",render:e=>e?u.a.createElement(nt.a,{style:{color:"#52c41a",fontSize:"2em"}}):u.a.createElement(rt.a,{style:{color:"#c2371b",fontSize:"2em"}})}],dataSource:e&&e.sqlQuery.sql&&e.sqlQuery.sql.rollupMatchResults})))}),ot=n(448),ct=n.n(ot),lt=n(589),ut=n.n(lt);let pt=null,dt=[],mt={};const ht=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ct()("playground_anonymous")||ct()("playground_anonymous",ut()()),dt.push(Object(k.a)(Object(k.a)(Object(k.a)({},mt),t),{},{id:ut()(),clientAnonymousId:ct()("playground_anonymous"),clientTimestamp:(new Date).toJSON()})),n=function(){var e=Object(b.a)(f.a.mark((function e(t,r){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(t=dt,dt=[]),t.length){e.next=3;break}return e.abrupt("return",null);case 3:return null==r&&(r=10),e.prev=4,a=(new Date).toJSON(),e.next=8,Object(g.a)("https://track.cube.dev/track",{method:"post",body:JSON.stringify(t.map(e=>Object(k.a)(Object(k.a)({},e),{},{sentAt:a}))),headers:{"Content-Type":"application/json"}});case 8:if(!(200!==e.sent.status&&r>0)){e.next=11;break}return e.abrupt("return",n(t,r-1));case 11:e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(4),!(r>0)){e.next=17;break}return e.abrupt("return",n(t,r-1));case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}(),r=(pt||Promise.resolve()).then(()=>n()).then(()=>{r===pt&&(pt=null)}),pt=r,e.abrupt("return",pt);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yt=(e,t)=>{ht(Object(k.a)({event:e},t))},ft=(e,t)=>{yt("Playground Action",Object(k.a)({name:e},t))},bt=[{id:"vanilla",title:"Vanilla JavaScript",docsLink:"https://cube.dev/docs/@cubejs-client-core"},{id:"react",title:"React"},{id:"angular",title:"Angular",docsLink:"https://cube.dev/docs/@cubejs-client-ngx"},{id:"vue",title:"Vue.js",docsLink:"https://cube.dev/docs/@cubejs-client-vue"}];class gt extends u.a.Component{constructor(e){super(e),this.state={showCode:!1,framework:"react"}}componentDidMount(){var e=this;return Object(b.a)(f.a.mark((function t(){var n,r,a,s,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.codeSandboxSource,a=n.dependencies,t.next=3,Object(g.a)("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e.codeSandboxDefinition(r,a))});case 3:return s=t.sent,t.next=6,s.json();case 6:i=t.sent,e.setState({sandboxId:i.sandbox_id});case 8:case"end":return t.stop()}}),t)})))()}codeSandboxDefinition(e,t){return{files:Object(k.a)(Object(k.a)({},"string"==typeof e?{"index.js":{content:e}}:e),{},{"package.json":{content:{dependencies:Object(k.a)({"react-dom":"latest"},Object(We.a)(()=>"latest",t))}}}),template:"create-react-app"}}render(){var e=this;const t=this.state,n=t.redirectToDashboard,r=t.showCode,a=t.sandboxId,s=t.addingToDashboard,i=t.framework,o=this.props,c=o.resultSet,l=o.error,p=o.codeExample,d=o.render,h=o.codeSandboxSource,y=o.dependencies,g=o.dashboardSource,j=o.hideActions,S=o.query,v=o.cubejsApi,x=o.chartLibrary,E=o.setChartLibrary,k=o.chartLibraries,_=o.history;if(n)return u.a.createElement(m.a,{to:"/dashboard"});const C=Object(Ye.getParameters)(this.codeSandboxDefinition(h,y)),O=u.a.createElement(Ue.a,{onClick:e=>{ft("Set Chart Library",{chartLibrary:e.key}),E(e.key)}},k.map(e=>u.a.createElement(Ue.a.Item,{key:e.value},e.title))),w=u.a.createElement(Ue.a,{onClick:e=>{ft("Set Framework",{framework:e.key}),this.setState({framework:e.key})}},bt.map(e=>u.a.createElement(Ue.a.Item,{key:e.id},e.title))),P=k.find(e=>e.value===x),M=bt.find(e=>e.id===i),T=u.a.createElement("form",{action:"https://codesandbox.io/api/v1/sandboxes/define",method:"POST",target:"_blank"},u.a.createElement("input",{type:"hidden",name:"parameters",value:C}),u.a.createElement(q.a.Group,null,g&&u.a.createElement(q.a,{onClick:Object(b.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({addingToDashboard:!0}),t.next=3,g.canAddChart();case 3:if("boolean"!=typeof(n=t.sent)||!n){t.next=11;break}return ft("Add to Dashboard"),t.next=8,g.addChart(p);case 8:e.setState({redirectToDashboard:!0,addingToDashboard:!1}),t.next=12;break;case 11:n?(e.setState({addingToDashboard:!1}),Ke.a.error({title:"There is an error loading your dashboard app",content:n,okText:"Fix",okCancel:!0,onOk(){_.push("/dashboard")}})):(e.setState({addingToDashboard:!1}),Ke.a.error({title:"Your dashboard app does not support adding of static charts",content:"Please use static dashboard template"}));case 12:case"end":return t.stop()}}),t)}))),icon:u.a.createElement(Le.a,null),size:"small",loading:s,disabled:!!M.docsLink},s?"Preparing dashboard app. It may take a while. Please check console for progress...":"Add to Dashboard"),u.a.createElement(ze.a,{overlay:w},u.a.createElement(q.a,{size:"small"},M&&M.title,u.a.createElement(Be.a,null))),u.a.createElement(ze.a,{overlay:O,disabled:!!M.docsLink},u.a.createElement(q.a,{size:"small"},P&&P.title,u.a.createElement(Be.a,null))),u.a.createElement(q.a,{onClick:()=>{ft("Show Query"),this.setState({showCode:"query"===r?null:"query"})},icon:u.a.createElement(Ie.a,null),size:"small",type:"query"===r?"primary":"default",disabled:!!M.docsLink},"JSON Query"),u.a.createElement(q.a,{onClick:()=>{ft("Show Code"),this.setState({showCode:"code"===r?null:"code"})},icon:u.a.createElement(Ne.a,null),size:"small",type:"code"===r?"primary":"default",disabled:!!M.docsLink},"Code"),u.a.createElement(q.a,{onClick:()=>{ft("Show SQL"),this.setState({showCode:"sql"===r?null:"sql"})},icon:u.a.createElement(Fe.a,null),size:"small",type:"sql"===r?"primary":"default",disabled:!!M.docsLink},"SQL"),u.a.createElement(q.a,{onClick:()=>{ft("Show Cache"),this.setState({showCode:"cache"===r?null:"cache"})},icon:u.a.createElement(Qe.a,null),size:"small",type:"cache"===r?"primary":"default",disabled:!!M.docsLink},"Cache"),u.a.createElement(q.a,{icon:u.a.createElement(Ge.a,null),size:"small",onClick:()=>ft("Open Code Sandbox"),htmlType:"submit",disabled:!!M.docsLink},"Edit"))),A=JSON.stringify(S,null,2);let R;const L=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return navigator.clipboard||He.a.error({message:"Your browser doesn't support copy to clipboard"}),e.prev=1,e.next=4,navigator.clipboard.writeText("query"===r?A:p);case 4:He.a.success({message:"Copied to clipboard"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),He.a.error({message:"Can't copy to clipboard",description:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return R="code"===r?u.a.createElement(q.a,{icon:u.a.createElement(Ve.a,null),onClick:()=>{L(),ft("Copy Code to Clipboard")},type:"primary"},"Copy Code to Clipboard"):"query"===r?u.a.createElement(q.a,{icon:u.a.createElement(Ve.a,null),onClick:()=>{L(),ft("Copy Query to Clipboard")},type:"primary"},"Copy Query to Clipboard"):"sql"===r?"SQL":"Chart",j?d({resultSet:c,error:l,sandboxId:a}):u.a.createElement(D.a,{title:R,style:{minHeight:420},extra:T},M&&M.docsLink?u.a.createElement("h2",{style:{padding:24,textAlign:"center"}},"We do not support ",M.title," code generation here yet.",u.a.createElement("br",null),"Please refer to ",u.a.createElement("a",{href:M.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:()=>ft("Unsupported Framework Docs",{framework:i})},M.title," docs")," to see on how to use it with Cube.js."):"code"===r?u.a.createElement(tt,{code:p}):"query"===r?u.a.createElement(tt,{code:A}):"sql"===r?u.a.createElement(Se,{loadSql:"only",query:S,cubejsApi:v,render:({sqlQuery:e})=>u.a.createElement(tt,{code:e&&$e.a.format(e.sql())})}):"cache"===r?u.a.createElement(it,{query:S,cubejsApi:v}):d({resultSet:c,error:l,sandboxId:a}))}}gt.defaultProps={query:{},cubejsApi:null,hideActions:null,dashboardSource:null,codeSandboxSource:null,codeExample:null,error:null,resultSet:null};var jt=Object(m.f)(gt),St=n(856);const vt={line:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="line" position={`x*measure`} size={2} color="color" />\n  </Chart>',bar:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip />\n    <Geom type="intervalStack" position={`x*measure`} color="color" />\n  </Chart>',area:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="areaStack" position={`x*measure`} size={2} color="color" />\n  </Chart>',pie:"\n  <Chart height={400} data={resultSet.chartPivot()} forceFit>\n    <Coord type='theta' radius={0.75} />\n    {resultSet.seriesNames().map(s => (<Axis name={s.key} />))}\n    <Legend position='right' />\n    <Tooltip />\n    {resultSet.seriesNames().map(s => (<Geom type=\"intervalStack\" position={s.key} color=\"category\" />))}\n  </Chart>"},xt=({chartType:e,renderFnName:t})=>"import { Chart, Axis, Tooltip, Geom, Coord, Legend } from 'bizcharts';\n\nconst stackedChartData = (resultSet) => {\n  const data = resultSet.pivot().map(\n    ({ xValues, yValuesArray }) =>\n      yValuesArray.map(([yValues, m]) => ({\n        x: resultSet.axisValuesString(xValues, ', '),\n        color: resultSet.axisValuesString(yValues, ', '),\n        measure: m && Number.parseFloat(m)\n      }))\n  ).reduce((a, b) => a.concat(b), []);\n\n  return data;\n}\n\nconst ".concat(t," = ({ resultSet }) => (").concat(vt[e],"\n);"),Et={bizcharts:St};var kt=n(903);const _t={line:'\n  <CartesianChart resultSet={resultSet} ChartComponent={LineChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Line\n          key={series.key}\n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n        />\n      ))}\n  </CartesianChart>',bar:'\n  <CartesianChart resultSet={resultSet} ChartComponent={BarChart}>\n    {resultSet.seriesNames().map((series, i) => (\n      <Bar\n        key={series.key}\n        stackId="a"\n        dataKey={series.key}\n        name={series.title}\n        fill={colors[i]}\n      />\n    ))}\n  </CartesianChart>',area:'\n  <CartesianChart resultSet={resultSet} ChartComponent={AreaChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Area\n          key={series.key}  \n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n          fill={colors[i]}\n        />\n      ))}\n  </CartesianChart>',pie:'\n  <ResponsiveContainer width="100%" height={350}>\n    <PieChart>\n      <Pie\n        isAnimationActive={false}\n        data={resultSet.chartPivot()}\n        nameKey="x"\n        dataKey={resultSet.seriesNames()[0].key}\n        fill="#8884d8"\n      >\n      {\n        resultSet.chartPivot().map((e, index) =>\n          <Cell key={index} fill={colors[index % colors.length]}/>\n        )\n      }\n      </Pie>\n      <Legend />\n      <Tooltip />\n    </PieChart>\n  </ResponsiveContainer>'},Ct=({chartType:e,renderFnName:t})=>"import {\n  CartesianGrid,\n  PieChart,\n  Pie,\n  Cell,\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  Legend,\n  BarChart,\n  Bar,\n  LineChart,\n  Line\n} from \"recharts\";\n\nconst CartesianChart = ({ resultSet, children, ChartComponent }) => (\n  <ResponsiveContainer width=\"100%\" height={350}>\n    <ChartComponent data={resultSet.chartPivot()}>\n      <XAxis dataKey=\"x\" />\n      <YAxis />\n      <CartesianGrid />\n      { children }\n      <Legend />\n      <Tooltip />\n    </ChartComponent>\n  </ResponsiveContainer>\n)\n\nconst colors = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(t," = ({ resultSet }) => (").concat(_t[e],"\n);"),Ot={recharts:kt};var wt=n(867);const Pt={line:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        borderColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {};\n  return <Line data={data} options={options} />;",bar:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {\n    scales: { xAxes: [{ stacked: true }] }\n  };\n  return <Bar data={data} options={options} />;",area:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index]\n      }\n    )),\n  };\n  const options = {\n    scales: { yAxes: [{ stacked: true }] }\n  };\n  return <Line data={data} options={options} />;",pie:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map(s => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES,\n        hoverBackgroundColor: COLORS_SERIES,\n      }\n    ))\n  };\n  const options = {};\n  return <Pie data={data} options={options} />;"},Mt=({chartType:e,renderFnName:t})=>"import { Line, Bar, Pie } from 'react-chartjs-2';\n\nconst COLORS_SERIES = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(t," = ({ resultSet }) => {").concat(Pt[e],"\n};"),Tt={"react-chartjs-2":wt};var Dt=n(902);const At=e=>"// Add Y axis\n  const y = d3.scaleLinear()\n    .domain([0, ".concat(e,'])\n    .range([ height, 0 ]);\n  svg.append("g")\n    .call(d3.axisLeft(y));'),Rt='// Add X axis\n  const x = d3.scaleTime()\n    .domain(d3.extent(resultSet.chartPivot(), c => d3.isoParse(c.x)))\n    .range([ 0, width ]);\n  svg.append("g")\n    .attr("transform", "translate(0," + height + ")")\n    .call(d3.axisBottom(x));',qt="// Transform data into D3 format\n  const keys = resultSet.seriesNames().map(s => s.key)\n  const data = d3.stack()\n    .keys(keys)\n    (resultSet.chartPivot())\n\n  // Color palette\n  const color = d3.scaleOrdinal()\n    .domain(keys)\n    .range(COLORS_SERIES)",Lt={line:"\n  // Prepare data in D3 format\n  const data = resultSet.series().map((series) => ({\n    key: series.title, values: series.series\n  }));\n\n  // color palette\n  const color = d3.scaleOrdinal()\n    .domain(data.map(d => d.key ))\n    .range(COLORS_SERIES)\n\n  ".concat(Rt,"\n\n  ").concat(At("d3.max(data.map((s) => d3.max(s.values, (i) => i.value)))"),'\n\n  // Draw the lines\n  svg.selectAll(".line")\n    .data(data)\n    .enter()\n    .append("path")\n      .attr("fill", "none")\n      .attr("stroke", d => color(d.key))\n      .attr("stroke-width", 1.5)\n      .attr("d", (d) => {\n        return d3.line()\n          .x(d => x(d3.isoParse(d.x)))\n          .y(d => y(+d.value))\n          (d.values)\n      })\n  '),bar:"\n  ".concat(qt,'\n\n  // Add X axis\n  const x = d3.scaleBand()\n    .range([ 0, width ])\n    .domain(resultSet.chartPivot().map(c => c.x))\n    .padding(0.3);\n  svg.append("g")\n    .attr("transform", "translate(0," + height + ")")\n    .call(d3.axisBottom(x))\n\n  ').concat(At("d3.max(data.map((s) => d3.max(s, (i) => i[1])))"),'\n\n  // Add the bars\n  svg.append("g")\n    .selectAll("g")\n    // Enter in the stack data = loop key per key = group per group\n    .data(data)\n    .enter().append("g")\n      .attr("fill", d => color(d.key))\n      .selectAll("rect")\n      // enter a second time = loop subgroup per subgroup to add all rectangles\n      .data(d => d)\n      .enter().append("rect")\n        .attr("x", d => x(d.data.x))\n        .attr("y", d => y(d[1]))\n        .attr("height", d => y(d[0]) - y(d[1]))\n        .attr("width",x.bandwidth())\n    '),area:"\n  ".concat(qt,"\n\n  ").concat(Rt,"\n\n  ").concat(At("d3.max(data.map((s) => d3.max(s, (i) => i[1])))"),'\n\n  // Add the areas\n  svg\n  .selectAll("mylayers")\n  .data(data)\n  .enter().append("path")\n    .style("fill", d => color(d.key))\n    .attr("d", d3.area()\n      .x(d => x(d3.isoParse(d.data.x)))\n      .y0(d => y(d[0]))\n      .y1(d => y(d[1]))\n  )\n  '),pie:"const data = resultSet.series()[0].series.map(s => s.value);\n  const data_ready = d3.pie()(data);\n\n  // The radius of the pieplot is half the width or half the height (smallest one).\n  const radius = Math.min(400, 400) / 2 - 40;\n\n  // Seprate container to center align pie chart\n  const pieContainer = svg.attr('height', height)\n      .append('g')\n      .attr('transform', 'translate(' + width/2 +  ',' + height/2 +')');\n\n  pieContainer\n    .selectAll('pieArcs')\n    .data(data_ready)\n    .enter()\n    .append('path')\n    .attr('d', d3.arc()\n      .innerRadius(0)\n      .outerRadius(radius)\n    )\n    .attr('fill', d => COLORS_SERIES[d.index])\n  "},Bt=({chartType:e,renderFnName:t})=>"\nimport * as d3 from 'd3';\nconst COLORS_SERIES = ['#FF6492', '#141446', '#7A77FF'];\n\nconst draw = (node, resultSet, chartType) => {\n  ".concat('// Set the dimensions and margins of the graph\n  const margin = {top: 10, right: 30, bottom: 30, left: 60},\n    width = node.clientWidth - margin.left - margin.right,\n    height = 400 - margin.top - margin.bottom;\n\n  d3.select(node).html("");\n  const svg = d3.select(node)\n  .append("svg")\n    .attr("width", width + margin.left + margin.right)\n    .attr("height", height + margin.top + margin.bottom)\n  .append("g")\n    .attr("transform",\n          "translate(" + margin.left + "," + margin.top + ")");',"\n  ").concat(Lt[e],"\n}\n\nconst ").concat(t," = ({ resultSet }) => (\n  <div ref={el => el && draw(el, resultSet, '").concat(e,"')} />\n)\n"),It={d3:Dt},Nt={number:'\n  <Row type="flex" justify="center" align="middle" style={{ height: \'100%\' }}>\n    <Col>\n      {resultSet\n        .seriesNames()\n        .map(s => (\n          <Statistic value={resultSet.totalRow()[s.key]} />\n        ))}\n    </Col>\n  </Row>\n  ',table:"  \n  <Table \n    pagination={false}\n    columns={resultSet.tableColumns(pivotConfig)} \n    dataSource={resultSet.tablePivot(pivotConfig)} \n  />\n  "},Ft=({chartType:e,renderFnName:t})=>"import { Row, Col, Statistic, Table } from 'antd';\n\nconst ".concat(t," = ({ resultSet, pivotConfig }) => (").concat(Nt[e],"\n);"),Qt={},Gt={chartjs:{library:i,title:"Chart.js"},recharts:{library:s,title:"Recharts"},bizcharts:{library:a,title:"Bizcharts"},d3:{library:o,title:"D3"}},Vt={presets:[Te.a,Ae.a]},Ut=e=>{let t=e;return"object"==typeof e&&(t=JSON.stringify(e,null,2)),t.split("\n").map((e,t)=>t>0?"  ".concat(e):e).join("\n")},Kt=e=>{const t=e.chartLibrary,n=e.query,r=e.apiUrl,a=e.cubejsToken,s=e.chartType,i="".concat(s,"Render");return"import React from 'react';\nimport cubejs from '@cubejs-client/core';\nimport { QueryRenderer } from '@cubejs-client/react';\nimport { Spin } from 'antd';\n".concat(t.sourceCodeTemplate(Object(k.a)(Object(k.a)({},e),{},{renderFnName:i})),'\n\nconst API_URL = "').concat(r,'"; // change to your actual endpoint\n\nconst cubejsApi = cubejs(\n  "').concat(a,'",\n  { apiUrl: API_URL + "/cubejs-api/v1" }\n);\n\nconst renderChart = (Component, pivotConfig) => ({ resultSet, error }) => (\n  (resultSet && <Component resultSet={resultSet} pivotConfig={pivotConfig} />) ||\n  (error && error.toString()) || \n  (<Spin />)\n)\n\nconst ChartRenderer = () => <QueryRenderer\n  query={').concat(Ut(n),"}\n  cubejsApi={cubejsApi}\n  render={renderChart(").concat(i,", ").concat(Ut(e.pivotConfig),")}\n/>;\n\nexport default ChartRenderer;\n")},zt=e=>"import ReactDOM from 'react-dom';\nimport \"antd/dist/antd.css\";\n".concat(e,'\n\nconst rootElement = document.getElementById("root");\nReactDOM.render(<ChartRenderer />, rootElement);\n'),Ht=Object.keys(Gt).map(e=>({value:e,title:Gt[e].title})),Yt=e=>{const t=Object(l.useState)(null),n=Object(we.a)(t,2),a=n[0],s=n[1],i=Object(l.useState)("bizcharts"),o=Object(we.a)(i,2),p=o[0],d=o[1],m=e.query,h=e.resultSet,y=e.error,f=e.sqlQuery,b=e.dashboardSource,g=e.cubejsApi,j=e.chartType,S=e.sourceCodeFn,v=e.pivotConfig,x=S||Kt,_=((e,t)=>-1!==["table","number"].indexOf(e)?c:Gt[t].library)(j,p),C=x(Object(k.a)(Object(k.a)({},e),{},{chartLibrary:_,pivotConfig:v})),O=Object(k.a)({"@cubejs-client/core":E.a,"@cubejs-client/react":r,antd:Re,react:u.a},_.imports);return Object(l.useEffect)(()=>{a&&s(null)},[C,j,a]),u.a.createElement(jt,{query:m,resultSet:h,error:y,sqlQuery:f,codeExample:C,codeSandboxSource:zt(C),dependencies:O,dashboardSource:b,chartLibrary:p,setChartLibrary:d,chartLibraries:Ht,cubejsApi:g,render:()=>a?u.a.createElement(qe.a,{message:"Error occurred while compiling JS",description:u.a.createElement("pre",null,a.toString()),type:"error"}):u.a.createElement(Pe.a,{onRender:e=>{e&&s(e)},babelConfig:Vt,resolver:e=>O[e],source:C})})};Yt.defaultProps={resultSet:null,error:null,sqlQuery:null,dashboardSource:null,cubejsApi:null,chartType:null,sourceCodeFn:null};var Wt=e=>{let t=e.overlay,n=Object(_.a)(e,["overlay"]);return u.a.createElement(ze.a,{overlay:t,placement:"bottomLeft",trigger:["click"]},u.a.createElement(q.a,n))};const Jt=(e,t)=>u.a.createElement(Ue.a,null,t.length?t.map(t=>u.a.createElement(Ue.a.Item,{key:t.name,onClick:()=>e(t)},t.title)):u.a.createElement(Ue.a.Item,{disabled:!0},"No members found"));var $t=e=>{let t=e.onClick,n=e.availableMembers,r=Object(_.a)(e,["onClick","availableMembers"]);return u.a.createElement(Wt,Object.assign({overlay:Jt(t,n)},r))};var Xt=e=>{let t=e.onRemoveClick,n=e.children,r=Object(_.a)(e,["onRemoveClick","children"]);return u.a.createElement(q.a.Group,Object.assign({style:{marginRight:8}},r),n,u.a.createElement(q.a,{type:"danger",ghost:!0,onClick:t},u.a.createElement(rt.a,null)))};var Zt=({members:e,availableMembers:t,addMemberName:n,updateMethods:r})=>u.a.createElement("span",null,e.map(e=>u.a.createElement(Xt,{key:e.index||e.name,onRemoveClick:()=>r.remove(e)},u.a.createElement($t,{availableMembers:t,onClick:t=>r.update(e,t)},e.title))),u.a.createElement($t,{onClick:e=>r.add(e),availableMembers:t,type:"dashed",icon:u.a.createElement(Le.a,null)},n)),en=n(108),tn=n(1),nn=n(275);const rn={string:({values:e,onChange:t})=>u.a.createElement(en.a,{key:"input",style:{width:300},mode:"tags",onChange:t,value:e}),number:({values:e,onChange:t})=>u.a.createElement(nn.a,{key:"input",style:{width:300},onChange:e=>t([e.target.value]),value:e&&e[0]||""})};rn.string.propTypes={values:tn.array,onChange:tn.func.isRequired},rn.string.defaultProps={values:[]},rn.number.propTypes={values:tn.array,onChange:tn.func.isRequired},rn.number.defaultProps={values:[]};var an=({member:e,updateMethods:t})=>{const n=rn[e.dimension.type]||rn.string;return u.a.createElement(n,{key:"filter",values:e.values,onChange:n=>t.update(e,Object(k.a)(Object(k.a)({},e),{},{values:n}))})};var sn=({members:e,availableMembers:t,addMemberName:n,updateMethods:r})=>u.a.createElement("span",null,e.map(e=>u.a.createElement("div",{style:{marginBottom:12},key:e.index},u.a.createElement(Xt,{onRemoveClick:()=>r.remove(e)},u.a.createElement($t,{onClick:t=>r.update(e,Object(k.a)(Object(k.a)({},e),{},{dimension:t})),availableMembers:t,style:{width:150,textOverflow:"ellipsis",overflow:"hidden"}},e.dimension.title)),u.a.createElement(en.a,{value:e.operator,onChange:t=>r.update(e,Object(k.a)(Object(k.a)({},e),{},{operator:t})),style:{width:200,marginRight:8}},e.operators.map(e=>u.a.createElement(en.a.Option,{key:e.name,value:e.name},e.title))),u.a.createElement(an,{member:e,key:"filterInput",updateMethods:r}))),u.a.createElement($t,{onClick:e=>r.add({dimension:e}),availableMembers:t,type:"dashed",icon:u.a.createElement(Le.a,null)},n));const on=[{title:"All time",value:void 0},{value:"Today"},{value:"Yesterday"},{value:"This week"},{value:"This month"},{value:"This quarter"},{value:"This year"},{value:"Last 7 days"},{value:"Last 30 days"},{value:"Last week"},{value:"Last month"},{value:"Last quarter"},{value:"Last year"}];var cn=({members:e,availableMembers:t,addMemberName:n,updateMethods:r})=>u.a.createElement("span",null,e.map(e=>{return[u.a.createElement(Xt,{onRemoveClick:()=>r.remove(e),key:"".concat(e.dimension.name,"-member")},u.a.createElement($t,{onClick:t=>r.update(e,Object(k.a)(Object(k.a)({},e),{},{dimension:t})),availableMembers:t},e.dimension.title)),u.a.createElement("b",{key:"".concat(e.dimension.name,"-for")},"FOR"),u.a.createElement(Wt,{overlay:(s=t=>r.update(e,Object(k.a)(Object(k.a)({},e),{},{dateRange:t.value})),u.a.createElement(Ue.a,null,on.map(e=>u.a.createElement(Ue.a.Item,{key:e.title||e.value,onClick:()=>s(e)},e.title||e.value)))),style:{marginLeft:8,marginRight:8},key:"".concat(e.dimension.name,"-date-range")},e.dateRange||"All time"),u.a.createElement("b",{key:"".concat(e.dimension.name,"-by")},"BY"),u.a.createElement(Wt,{overlay:(n=e.dimension,a=t=>r.update(e,Object(k.a)(Object(k.a)({},e),{},{granularity:t.name})),u.a.createElement(Ue.a,null,n.granularities.length?n.granularities.map(e=>u.a.createElement(Ue.a.Item,{key:e.title,onClick:()=>a(e)},e.title)):u.a.createElement(Ue.a.Item,{disabled:!0},"No members found"))),style:{marginLeft:8},key:"".concat(e.dimension.name,"-granularity")},e.dimension.granularities.find(t=>t.name===e.granularity)&&e.dimension.granularities.find(t=>t.name===e.granularity).title)];var n,a,s}),!e.length&&u.a.createElement($t,{onClick:e=>r.add({dimension:e,granularity:"day"}),availableMembers:t,type:"dashed",icon:u.a.createElement(Le.a,null)},n)),ln=n(2193),un=n(2192),pn=n(2191),dn=n(2190),mn=n(2188),hn=n(2180);const yn=[{name:"line",title:"Line",icon:u.a.createElement(ln.a,null)},{name:"area",title:"Area",icon:u.a.createElement(un.a,null)},{name:"bar",title:"Bar",icon:u.a.createElement(pn.a,null)},{name:"pie",title:"Pie",icon:u.a.createElement(dn.a,null)},{name:"table",title:"Table",icon:u.a.createElement(mn.a,null)},{name:"number",title:"Number",icon:u.a.createElement(hn.a,null)}];var fn=({chartType:e,updateChartType:t})=>{const n=u.a.createElement(Ue.a,null,yn.map(e=>u.a.createElement(Ue.a.Item,{key:e.title,onClick:()=>t(e.name)},e.icon," ",e.title))),r=yn.find(t=>t.name===e);return u.a.createElement(Wt,{overlay:n,icon:r.icon},r.title)},bn=n(143),gn=n(836),jn=n(2199);const Sn=["asc","desc","none"];function vn({id:e,index:t,order:n="none",children:r,onOrderChange:a}){return u.a.createElement(bn.b,{draggableId:e,index:t},({draggableProps:t,dragHandleProps:s,innerRef:i})=>u.a.createElement("div",Object.assign({ref:i},t,s,{style:Object(k.a)({display:"flex",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",marginBottom:8},t.style)}),u.a.createElement(jn.a,null),u.a.createElement(gn.a.Text,{ellipsis:!0,style:{margin:"0 auto 0 8px"}},r),u.a.createElement(q.a,{type:"none"!==n?"primary":null,size:"small",style:{minWidth:70,marginLeft:8},onClick:()=>a(e,(()=>{const e=Sn.indexOf(n)+1;return Sn[e>2?0:e]})())},n.toUpperCase())))}function xn({orderMembers:e,onOrderChange:t,onReorder:n}){return u.a.createElement(bn.a,{onDragEnd:({source:e,destination:t})=>{n(e&&e.index,t&&t.index)}},u.a.createElement(bn.c,{droppableId:"droppable"},n=>u.a.createElement("div",Object.assign({ref:n.innerRef},n.droppableProps,{style:{paddingTop:8,width:260}}),e.map(({id:e,title:n,order:r},a)=>u.a.createElement(vn,{key:e,id:e,index:a,order:r,onOrderChange:t},n)),n.placeholder)))}function En({id:e,index:t}){return u.a.createElement(bn.b,{draggableId:e,index:t},({draggableProps:t,dragHandleProps:n,innerRef:r})=>u.a.createElement("div",Object.assign({ref:r},t,n,{style:Object(k.a)({},t.style)}),u.a.createElement(gn.a.Text,{ellipsis:!0,style:{maxWidth:"100%"}},u.a.createElement(jn.a,{style:{marginRight:8}}),e)))}function kn({pivotConfig:e,axis:t}){return u.a.createElement(u.a.Fragment,null,u.a.createElement(gn.a.Text,{strong:!0,style:{display:"flex",justifyContent:"center"}},t),u.a.createElement(bn.c,{droppableId:t},n=>u.a.createElement("div",Object.assign({ref:n.innerRef},n.droppableProps,{style:{height:"100%"}}),e[t].map((e,t)=>u.a.createElement(En,{key:e,id:e,index:t})),n.placeholder)))}function _n({pivotConfig:e,onMove:t}){return u.a.createElement(bn.a,{onDragEnd:({source:e,destination:n})=>{n&&t({sourceIndex:e.index,destinationIndex:n.index,sourceAxis:e.droppableId,destinationAxis:n.droppableId})}},u.a.createElement(M.a,null,u.a.createElement(T.a,{span:11},u.a.createElement(kn,{pivotConfig:e,axis:"x"})),u.a.createElement(T.a,{span:2},u.a.createElement(A.a,{style:{height:"100%"},type:"vertical"})),u.a.createElement(T.a,{span:11},u.a.createElement(kn,{pivotConfig:e,axis:"y"}))))}var Cn=n(142);function On({pivotConfig:e,onUpdate:t}){return u.a.createElement(Cn.a,{checked:e.fillMissingDates,onChange:()=>t({fillMissingDates:!e.fillMissingDates})},"Fill Missing Dates")}const wn=at.a.TabPane;function Pn({pivotConfig:e,onMove:t,onUpdate:n}){return u.a.createElement(at.a,{style:{width:340}},u.a.createElement(wn,{tab:"Pivot",key:"1"},u.a.createElement(_n,{pivotConfig:e,onMove:t})),u.a.createElement(wn,{tab:"Options",key:"2"},u.a.createElement(On,{pivotConfig:e,onUpdate:n})))}const Mn=(e,t)=>Object.keys(e).map(n=>({[n]:(r,a,...s)=>{let i="".concat(n.split("").map((e,t)=>0===t?e.toUpperCase():e).join("")," Member");return a&&a.values&&(i="Update Filter Values"),a&&a.dateRange&&(i="Update Date Range"),a&&a.granularity&&(i="Update Granularity"),ft(i,{memberName:t}),e[n].apply(null,[r,a,...s])}})).reduce((e,t)=>Object(k.a)(Object(k.a)({},e),t),{});function Tn({query:e,cubejsApi:t,apiUrl:n,cubejsToken:r,dashboardSource:a,setQuery:s}){return u.a.createElement(ke,{query:e,setQuery:s,cubejsApi:t,render:({resultSet:e,error:s,validatedQuery:i,isQueryPresent:o,chartType:c,updateChartType:l,measures:p,availableMeasures:d,updateMeasures:m,dimensions:h,availableDimensions:y,updateDimensions:f,segments:b,availableSegments:g,updateSegments:j,filters:S,updateFilters:v,timeDimensions:x,availableTimeDimensions:E,updateTimeDimensions:k,orderMembers:_,updateOrder:C,pivotConfig:O,updatePivotConfig:w})=>u.a.createElement(u.a.Fragment,null,u.a.createElement(M.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},u.a.createElement(T.a,{span:24},u.a.createElement(D.a,null,u.a.createElement(M.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},u.a.createElement(T.a,{span:24},u.a.createElement(Zt,{members:p,availableMembers:d,addMemberName:"Measure",updateMethods:Mn(m,"Measure")}),u.a.createElement(A.a,{type:"vertical"}),u.a.createElement(Zt,{members:h,availableMembers:y,addMemberName:"Dimension",updateMethods:Mn(f,"Dimension")}),u.a.createElement(A.a,{type:"vertical"}),u.a.createElement(Zt,{members:b,availableMembers:g,addMemberName:"Segment",updateMethods:Mn(j,"Segment")}),u.a.createElement(A.a,{type:"vertical"}),u.a.createElement(cn,{members:x,availableMembers:E,addMemberName:"Time",updateMethods:Mn(k,"Time")}))),u.a.createElement(M.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},u.a.createElement(T.a,{span:24},u.a.createElement(sn,{members:S,availableMembers:y.concat(d),addMemberName:"Filter",updateMethods:Mn(v,"Filter")}))),u.a.createElement(M.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},u.a.createElement(T.a,{span:24},u.a.createElement(fn,{chartType:c,updateChartType:e=>{ft("Change Chart Type"),l(e)}}),u.a.createElement(A.a,{type:"vertical"}),u.a.createElement(R.a,{content:u.a.createElement(xn,{orderMembers:_,onReorder:C.reorder,onOrderChange:C.set}),placement:"bottomLeft",trigger:"click"},u.a.createElement(q.a,{disabled:!o,icon:u.a.createElement(L.a,null)},"Order")),u.a.createElement(A.a,{type:"vertical"}),u.a.createElement(R.a,{content:u.a.createElement(Pn,{pivotConfig:O,onMove:w.moveItem,onUpdate:w.update}),placement:"bottomLeft",trigger:"click"},u.a.createElement(q.a,{disabled:!o,icon:u.a.createElement(B.a,null)},"Pivot"))))))),u.a.createElement(M.a,{justify:"space-around",align:"top",gutter:24},u.a.createElement(T.a,{span:24},o?u.a.createElement(Yt,{query:i,resultSet:e,error:s,apiUrl:n,cubejsToken:r,chartType:c,cubejsApi:t,dashboardSource:a,pivotConfig:O}):u.a.createElement("h2",{style:{textAlign:"center"}},"Choose a measure or dimension to get started"))))})}Tn.defaultProps={query:{},setQuery:null,cubejsApi:null,dashboardSource:null,apiUrl:"/cubejs-api/v1",cubejsToken:null};class Dn extends l.Component{constructor(e){super(e),this.state={},this.dashboardSource=new P}componentDidMount(){var e=this;return Object(b.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.a)("/playground/context");case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,e.setState({cubejsToken:r.cubejsToken,apiUrl:r.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return t.stop()}}),t)})))()}cubejsApi(){const e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=E()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}render(){const e=this.state,t=e.cubejsToken,n=e.apiUrl,r=this.props,a=r.location,s=r.history,i=new URLSearchParams(a.search),o=i.get("query")&&JSON.parse(i.get("query"))||{};return this.cubejsApi()&&u.a.createElement(Tn,{query:o,setQuery:e=>s.push("/build?query=".concat(JSON.stringify(e))),cubejsApi:this.cubejsApi(),apiUrl:n,cubejsToken:t,dashboardSource:this.dashboardSource})||null}}Dn.defaultProps={};var An=Dn,Rn=n(820),qn=n(837),Ln=n(146);const Bn=Rn.a.Content,In=Rn.a.Sider,Nn=qn.a.TreeNode,Fn=at.a.TabPane;class Qn extends l.Component{constructor(e){super(e),this.state={expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],activeTab:"schema",files:[]}}componentDidMount(){var e=this;return Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadDBSchema();case 2:return t.next=4,e.loadFiles();case 4:case"end":return t.stop()}}),t)})))()}onExpand(e){ft("Expand Tables"),this.setState({expandedKeys:e,autoExpandParent:!1})}onCheck(e){ft("Check Tables"),this.setState({checkedKeys:e})}onSelect(e){this.setState({selectedKeys:e})}cubejsApi(){const e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=E()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}loadDBSchema(){var e=this;return Object(b.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({schemaLoading:!0}),t.prev=1,t.next=4,O("/playground/db-schema");case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,e.setState({tablesSchema:r.tablesSchema}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.setState({schemaLoadingError:t.t0});case 14:return t.prev=14,e.setState({schemaLoading:!1}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))()}loadFiles(){var e=this;return Object(b.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("/playground/files");case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,e.setState({files:r.files});case 7:case"end":return t.stop()}}),t)})))()}generateSchema(){var e=this;return Object(b.a)(f.a.mark((function t(){var n,r,a,s,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.checkedKeys,a=n.tablesSchema,s=e.props.history,ft("Generate Schema"),t.next=5,O("/playground/generate-schema",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tables:r.filter(e=>2===e.split(".").length),tablesSchema:a})});case 5:if(200!==(i=t.sent).status){t.next=14;break}return ft("Generate Schema Success"),t.next=10,e.loadFiles();case 10:e.setState({checkedKeys:[],activeTab:"files"}),Ke.a.success({title:"Schema files successfully generated!",content:"You can start building the charts",okText:"Build",cancelText:"Close",okCancel:!0,onOk(){s.push("/build")}}),t.next=20;break;case 14:return t.t0=ft,t.next=17,i.text();case 17:t.t1=t.sent,t.t2={error:t.t1},(0,t.t0)("Generate Schema Fail",t.t2);case 20:case"end":return t.stop()}}),t)})))()}selectedFileContent(){const e=this.selectedFile();return e&&e.content}selectedFile(){const e=this.state,t=e.files,n=e.selectedFile;return t.find(e=>e.fileName===n)}renderFilesMenu(){const e=this.state,t=e.selectedFile,n=e.files;return u.a.createElement(Ue.a,{mode:"inline",onClick:({key:e})=>{ft("Select File"),this.setState({selectedFile:e})},selectedKeys:t?[t]:[]},n.map(e=>u.a.createElement(Ue.a.Item,{key:e.fileName},e.fileName)))}render(){const e=this.state,t=e.schemaLoading,n=e.schemaLoadingError,r=e.tablesSchema,a=e.selectedFile,s=e.expandedKeys,i=e.autoExpandParent,o=e.checkedKeys,c=e.selectedKeys,l=e.activeTab,p=e=>e.map(e=>e.children?u.a.createElement(Nn,{title:e.title,key:e.key,dataRef:e},p(e.children)):u.a.createElement(Nn,e)),d=u.a.createElement(Ue.a,null,u.a.createElement(Ue.a.Item,{onClick:()=>this.generateSchema()},"Generate Schema")),m=()=>{return Object.keys(r||{}).length>0?u.a.createElement(qn.a,{checkable:!0,onExpand:this.onExpand.bind(this),expandedKeys:s,autoExpandParent:i,onCheck:this.onCheck.bind(this),checkedKeys:o,onSelect:this.onSelect.bind(this),selectedKeys:c},p((e=r||{},Object.keys(e).map(t=>({title:t,key:t,children:Object.keys(e[t]).map(e=>({title:e,key:"".concat(t,".").concat(e)}))}))))):u.a.createElement(qe.a,{message:"Empty DB Schema",description:"Please check connection settings",type:"warning"});var e};return u.a.createElement(Rn.a,{style:{height:"100%"}},u.a.createElement(In,{width:300,style:{background:"#fff",borderRight:"1px solid #eee"},className:"schema-sidebar"},u.a.createElement(at.a,{activeKey:l,onChange:e=>this.setState({activeTab:e}),tabBarExtraContent:u.a.createElement(ze.a,{overlay:d,placement:"bottomRight",disabled:!o.length},u.a.createElement(q.a,{shape:"circle",icon:u.a.createElement(Le.a,null),type:"primary"}))},u.a.createElement(Fn,{tab:"Tables",key:"schema"},t?u.a.createElement(j.a,{style:{width:"100%"}}):n?u.a.createElement(qe.a,{message:"Error while loading DB schema",description:n.toString(),type:"error"}):m()),u.a.createElement(Fn,{tab:"Files",key:"files"},this.renderFilesMenu()))),u.a.createElement(Bn,{style:{minHeight:280}},a&&u.a.createElement(qe.a,{message:u.a.createElement("span",null,"This file can be edited at ",u.a.createElement("b",null,this.selectedFile().absPath)),type:"info",style:{paddingTop:10,paddingBottom:11}}),a?u.a.createElement(tt,{code:this.selectedFileContent(),style:{padding:12}}):u.a.createElement(Ln.a,{style:{marginTop:50},description:"Select tables to generate Cube.js schema"})))}}var Gn=Qn,Vn=(n(385),n(120));const Un=({children:e})=>u.a.createElement("div",{style:{textAlign:"center",marginTop:50}},e),Kn=()=>u.a.createElement("p",{style:{width:450,margin:"20px auto"}},"Dashboard App is a convenient way to setup and deploy frontend app to work with Cube.js backend. You can learn more about in the"," ",u.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app",target:"_blankl"},"Cube.js docs"),".");class zn extends l.Component{constructor(e){super(e),this.state={}}componentDidMount(){var e=this;return Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dashboardSource=new P,t.next=3,e.loadDashboard();case 3:case"end":return t.stop()}}),t)})))()}loadDashboard(){var e=this;return Object(b.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({appCode:null,loadError:null}),t.prev=1,t.next=4,e.dashboardSource.load();case 4:return e.setState({dashboardStarting:!1,appCode:!e.dashboardSource.loadError&&e.dashboardSource.dashboardCreated,loadError:e.dashboardSource.loadError}),t.next=7,O("/playground/dashboard-app-status");case 7:return t.next=9,t.sent.json();case 9:n=t.sent,e.setState({dashboardRunning:n.running,dashboardPort:n.dashboardPort,dashboardAppPath:n.dashboardAppPath}),t.next=17;break;case 13:throw t.prev=13,t.t0=t.catch(1),e.setState({dashboardStarting:!1,loadError:u.a.createElement("pre",null,t.t0.toString())}),t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))()}startDashboardApp(){var e=this;return Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({dashboardStarting:!0}),t.next=3,O("/playground/start-dashboard-app");case 3:return t.next=5,e.loadDashboard();case 5:case"end":return t.stop()}}),t)})))()}render(){const e=this.state,t=e.appCode,n=e.dashboardPort,r=e.loadError,a=e.dashboardRunning,s=e.dashboardStarting,i=e.dashboardAppPath;if(r&&"string"==typeof r&&-1!==r.indexOf("Dashboard app not found"))return u.a.createElement(m.a,{to:"/template-gallery"});if(r)return u.a.createElement(Un,null,u.a.createElement("h2",null,r),u.a.createElement("p",{style:{marginTop:25}},u.a.createElement(Vn.a,{to:"/template-gallery"},u.a.createElement(q.a,{type:"primary"},"Create dashboard app in your project directory"))),u.a.createElement(Kn,null));if(!t)return u.a.createElement(Un,null,u.a.createElement("h2",null," Creating Dashboard App"),u.a.createElement("p",null,u.a.createElement(j.a,{tip:"It may take several minutes. Please check console for progress..."})),u.a.createElement(Kn,null));if(!a)return u.a.createElement(Un,null,u.a.createElement("h2",null,"Dashboard App is not running"),u.a.createElement("h3",null,"Please start dashboard app or run it manually using",u.a.createElement("code",{className:"inline-code"},"$ npm run start"),u.a.createElement("br",null),"in ",u.a.createElement("b",null,i)," directory."),u.a.createElement("p",{style:{marginTop:25}},u.a.createElement(q.a,{type:"primary",size:"large",loading:s,onClick:()=>this.startDashboardApp(!0)},s?"Dashboard app is starting. It may take a while. Please check console for progress...":"Start dashboard app")),u.a.createElement(Kn,null));const o="http://".concat(window.location.hostname,":").concat(n);return u.a.createElement("div",{style:{height:"100%",width:"100%",padding:"15px 30px 30px 30px",background:"#fff"}},u.a.createElement(qe.a,{message:u.a.createElement("span",null,"This dashboard app can be edited at ",u.a.createElement("b",null,i),". Dev server is running at ",u.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer"},o),". Learn more how to customize and deploy it at ",u.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app"},"Cube.js docs"),". ",u.a.createElement("a",{onClick:()=>window.location.reload(),style:{cursor:"pointer"}},"Refresh page")," if it is empty."),type:"info",closable:!0,style:{marginBottom:15}}),u.a.createElement("iframe",{src:o,style:{width:"100%",height:"100%",border:0,borderRadius:4,overflow:"hidden"},sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin",title:"Dashboard"}))}}var Hn=Object(m.f)(zn),Yn=(n(2090),n(2091),n(124)),Wn=n(2198),Jn=n(2195),$n=n(2194),Xn=n(125),Zn=n(593);function er(){const e=Object(Yn.a)(["\n  float: right;\n  height: 32px;\n  margin: 8px ",";\n  border: 0.5px solid rgba(67, 67, 107, 0.4);\n  border-radius: 3px;\n  display: flex;\n  align-items: center;\n  color: #43436B;\n  transition: all 0.25s ease;\n  padding: 0 10px;\n  \n  span {\n    font-size: 20px;\n    margin-right: 10px;\n    opacity: 0.3;\n  }\n  \n  &:hover {\n    span { \n      opacity: 0.6; \n    }\n    border-color: rgba(67, 67, 107, 1);\n    color: #43436B;\n  }\n"]);return er=function(){return e},e}function tr(){const e=Object(Yn.a)(["\n  font-size: 15px;\n  font-weight: 500;\n  & > a {\n    opacity: 0.6;\n  }\n  &.ant-menu-item-selected,\n  &.ant-menu-item-active {\n    a {\n      opacity: 1;\n    }\n  }\n\n  &&:not(.ant-menu-item-selected) {\n    &.ant-menu-item-active, &:hover {\n      color: #43436B;\n      border-bottom: 2px solid transparent;\n    }\n  }\n"]);return tr=function(){return e},e}function nr(){const e=Object(Yn.a)(["\n  background: #EEEEF5 !important;\n  border-bottom: 0;\n"]);return nr=function(){return e},e}const rr=Object(Xn.a)(Ue.a)(nr()),ar=Object(Xn.a)(Ue.a.Item)(tr()),sr=Xn.a.a(er(),e=>e.noMargin?"0":"8px");var ir=({selectedKeys:e})=>{const t=Object(Zn.useMediaQuery)({query:"(min-device-width: 992px)"}),n=Object(Zn.useMediaQuery)({query:"(max-device-width: 991px)"});return u.a.createElement(Rn.a.Header,{style:{padding:"0 32px"}},u.a.createElement("div",{style:{float:"left"}},u.a.createElement("img",{src:"./cubejs-playground-logo.svg",style:{display:"inline",height:28,marginRight:28},alt:""})),t&&u.a.createElement(rr,{theme:"light",mode:"horizontal",selectedKeys:e},u.a.createElement(ar,{key:"/build"},u.a.createElement(Vn.a,{to:"/build"},"Build")),u.a.createElement(ar,{key:"/dashboard"},u.a.createElement(Vn.a,{to:"/dashboard"},"Dashboard App")),u.a.createElement(ar,{key:"/schema"},u.a.createElement(Vn.a,{to:"/schema"},"Schema")),u.a.createElement(sr,{noMargin:!0,key:"slack",href:"https://slack.cube.dev",target:"_blank"},u.a.createElement(Wn.a,null),"Slack"),u.a.createElement(sr,{key:"docs",href:"https://cube.dev/docs",target:"_blank"},u.a.createElement(Jn.a,null),"Docs")),n&&u.a.createElement("div",{style:{float:"right"}},u.a.createElement(ze.a,{overlay:u.a.createElement(Ue.a,null,u.a.createElement(Ue.a.Item,{key:"/build"},u.a.createElement(Vn.a,{to:"/build"},"Build")),u.a.createElement(Ue.a.Item,{key:"/dashboard"},u.a.createElement(Vn.a,{to:"/dashboard"},"Dashboard App")),u.a.createElement(Ue.a.Item,{key:"/schema"},u.a.createElement(Vn.a,{to:"/schema"},"Schema")))},u.a.createElement($n.a,null))))};class or extends l.Component{static getDerivedStateFromError(e){return{fatalError:e}}componentDidMount(){return Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("unhandledrejection",e=>{const t=e.reason;console.log(t);const n=(t.stack||t).toString();yt("Playground Error",{error:n}),He.a.error({message:u.a.createElement("span",null,u.a.createElement("b",null,"Error")," 😢",u.a.createElement("div",null,"Ask about it in ",u.a.createElement("a",{href:"https://slack.cube.dev",target:"_blank",rel:"noopener noreferrer"},"Slack"),". These guys know how to fix this for sure!")),description:n})}),e.next=3,Object(g.a)("/playground/context");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.anonymousId,a={coreServerVersion:n.coreServerVersion,projectFingerprint:n.projectFingerprint},mt=a,ht(Object(k.a)({event:"identify",anonymousId:r},a));case 8:case"end":return e.stop()}var r,a}),e)})))()}componentDidCatch(e,t){yt("Playground Error",{error:(e.stack||e).toString(),info:t.toString()})}render(){const e=(this.state||{}).fatalError,t=this.props,n=t.location,r=t.children;return u.a.createElement(Rn.a,{style:{height:"100%"}},u.a.createElement(ir,{selectedKeys:(a=n.pathname,"/template-gallery"===a?["/dashboard"]:[a])}),u.a.createElement(Rn.a.Content,{style:{height:"100%"}},e?u.a.createElement(qe.a,{message:"Error occured while rendering",description:e.stack,type:"error"}):r));var a}}or.defaultProps={children:[]};var cr=Object(m.f)(or);function lr(){const e=Object(Yn.a)(["\n  padding: 0 27px;\n  height: 40px;\n  border-radius: 4px;\n  border: 1px solid #D0D0DA;\n  &.ant-btn-primary {\n    border: none;\n    &:hover {\n      background-color: #644AFF;\n    }\n  }\n"]);return lr=function(){return e},e}const ur=Object(Xn.a)(q.a)(lr());var pr=e=>u.a.createElement(ur,e);function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var hr=u.a.createElement("path",{d:"M47 92V2",stroke:"#43436B",strokeWidth:3,strokeLinecap:"round"}),yr=u.a.createElement("path",{d:"M92 47L2 47",stroke:"#43436B",strokeWidth:3,strokeLinecap:"round"});const fr=e=>{let t=e.svgRef,n=e.title,r=mr(e,["svgRef","title"]);return u.a.createElement("svg",dr({width:94,height:94,viewBox:"0 0 94 94",fill:"none",ref:t},r),n?u.a.createElement("title",null,n):null,hr,yr)},br=u.a.forwardRef((e,t)=>u.a.createElement(fr,dr({svgRef:t},e)));n.p;var gr=n(2177),jr=n(2172),Sr=n(838);function vr(){const e=Object(Yn.a)(["\n  && {\n    .ant-form-item-label {\n      line-height: 16px;\n      margin-bottom: 7px;\n      label {\n        font-weight: 500;\n        font-size: 12px;\n        line-height: 16px;\n      }\n    }\n\n    .ant-dropdown-trigger {\n      border-color: #ECECF0;\n      padding: 13px 16px;\n      line-height: 13px;\n    }\n  }\n"]);return vr=function(){return e},e}function xr(){const e=Object(Yn.a)(["\n  && {\n    .ant-modal-header {\n      border-bottom: none;\n      padding: 40px 32px 0 32px;\n\n      .ant-modal-title {\n        font-size: 20px;\n      }\n    }\n\n    .ant-modal-footer {\n      border-top: none;\n      padding: 0 32px 34px 32px;\n      text-align: left;\n    }\n  }\n"]);return xr=function(){return e},e}const Er=Object(Xn.a)(Ke.a)(xr()),kr=Object(Xn.a)(jr.a)(vr()),_r=()=>u.a.createElement(gr.a,{style:{color:"#727290"}});var Cr=({visible:e,onOk:t,onCancel:n,onChange:r,chartLibraries:a,currentLibraryItem:s,frameworks:i,framework:o,frameworkItem:c,templatePackages:l,templatePackage:p,enableWebSocketTransport:d})=>{const m=u.a.createElement(Ue.a,{onClick:e=>{ft("Set Chart Library",{chartLibrary:e.key}),r("chartLibrary",e.key)}},a.map(e=>u.a.createElement(Ue.a.Item,{key:e.value},e.title))),h=u.a.createElement(Ue.a,{onClick:e=>{ft("Set Framework",{framework:e.key}),r("framework",e.key)}},i.map(e=>u.a.createElement(Ue.a.Item,{key:e.id},e.title))),y=u.a.createElement(Ue.a,{onClick:e=>{ft("Set Template Package",{templatePackageName:e.key}),r("templatePackageName",e.key)}},(l||[]).map(e=>u.a.createElement(Ue.a.Item,{key:e.name},e.description)));return u.a.createElement(Er,{title:"Create your own Dashboard App",visible:e,onOk:t,onCancel:n,footer:[u.a.createElement(pr,{key:"submit",type:"primary",onClick:t},"Ok"),u.a.createElement(pr,{key:"back",onClick:n},"Cancel")]},u.a.createElement(kr,null,u.a.createElement(jr.a.Item,{label:"Framework"},u.a.createElement(ze.a,{overlay:h},u.a.createElement(pr,null,c&&c.title,u.a.createElement(_r,null)))),c&&c.docsLink&&u.a.createElement(qe.a,{style:{marginBottom:23},type:"info",message:u.a.createElement("span",null,"We do not support ",c.title," dashboard scaffolding generation yet. Please refer to ",u.a.createElement("a",{href:c.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:()=>ft("Unsupported Dashboard Framework Docs",{framework:o})},c.title," docs")," to see on how to use it with Cube.js.")}),u.a.createElement(jr.a.Item,{label:"Main Template"},u.a.createElement(ze.a,{overlay:y,disabled:!!c.docsLink},u.a.createElement(pr,null,p&&p.description,u.a.createElement(_r,null)))),u.a.createElement(jr.a.Item,{label:"Charting Library"},u.a.createElement(ze.a,{overlay:m,disabled:!!c.docsLink},u.a.createElement(pr,null,s&&s.title,u.a.createElement(_r,null)))),u.a.createElement(jr.a.Item,{label:"Web Socket Transport (Real-time)"},u.a.createElement(Sr.a,{checked:d,onChange:e=>r("enableWebSocketTransport",e)}))))};function Or(){const e=Object(Yn.a)(["\n  display: block;\n  font-size: 16px;\n  margin-bottom: 25px;\n  margin-left: 15px;\n"]);return Or=function(){return e},e}function wr(){const e=Object(Yn.a)(["\n  border: 1px solid #ECECF0;\n\n  border-radius: 4px;\n  margin-bottom: 20px;\n  button {\n    display: none;\n    position: absolute;\n    margin-left: -64px;\n    top: 80px;\n    left: 50%;\n  }\n  padding: 16px;\n  svg path {\n    transition: stroke 0.25s ease;\n  }\n\n  && .ant-card-cover {\n    height: 168px;\n    border-radius: 4px;\n    background: ",";\n    display: flex;\n    align-items: center;\n    position: relative;\n\n    &:after {\n      content: '';\n      position: absolute;\n      width: 100%; height:100%;\n      top:0;\n      left:0;\n      background: rgba(81, 87, 125, 0.3);\n      opacity: 0;\n      transition: all 0.25s;\n    }\n\n  }\n\n  &&.ant-card-hoverable:hover {\n    box-shadow: 0px 15px 20px rgba(67, 67, 107, 0.1);\n    button { display: block; }\n    svg path {\n      stroke: #7A77FF;\n    }\n    &:hover .ant-card-cover:after {\n      opacity: ",";\n    }\n  }\n\n  && .ant-card-body {\n    min-height: 175px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  && .ant-card-meta {\n    text-align: center;\n  }\n\n  && .ant-card-meta-title {\n    white-space: unset;\n    color: #43436B;\n  }\n\n  && .ant-card-meta-description {\n    color: #A1A1B5;\n    font-size: 13px;\n  }\n"]);return wr=function(){return e},e}function Pr(){const e=Object(Yn.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  max-width: 1024px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ","\n"]);return Pr=function(){return e},e}const Mr=({children:e})=>u.a.createElement("div",{style:{marginTop:50,margin:25}},e),Tr=Xn.a.div(Pr(),e=>'url("'.concat(e.src,'")')),Dr=Object(Xn.a)(D.a)(wr(),e=>e.createYourOwn?"#F8F8FB":"#EEEEF5",e=>e.createYourOwn?"0":"1"),Ar=Object(Xn.a)(gn.a.Text)(Or());class Rr extends l.Component{constructor(e){super(e),this.state={chartLibrary:Ht[0].value,framework:"react",templatePackageName:"react-antd-dynamic"}}componentDidMount(){var e=this;return Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dashboardSource=new P,t.next=3,e.dashboardSource.load(!0);case 3:e.setState({loadError:e.dashboardSource.loadError});case 4:case"end":return t.stop()}}),t)})))()}render(){var e=this;const t=this.state.loadError;if(t&&-1===t.indexOf("Dashboard app not found"))return u.a.createElement(m.a,{to:"/dashboard"});const n=this.state,r=n.chartLibrary,a=n.framework,s=n.templatePackageName,i=n.createOwnModalVisible,o=n.enableWebSocketTransport,c=this.props.history,l=Ht.find(e=>e.value===r),p=bt.find(e=>e.id===a),d=this.dashboardSource&&this.dashboardSource.templatePackages.find(e=>e.name===s),h=[{name:"Dynamic Dashboard with React, AntD, and Recharts",description:"Use this template to create a dynamic dashboard application with React, AntD, and Chart.js. It comes with a dynamic query builder and Apollo GraphQL client. Use it when you want to allow users to edit dashboards.",coverUrl:"https://cube.dev/downloads/template-react-dashboard.png",templatePackages:["create-react-app","react-antd-dynamic","recharts-charts","antd-tables","credentials"]},{name:"Real-Time Dashboard with React, AntD, and Chart.js",description:"Use this template to create a static dashboard application with real-time WebSocket transport. Use it when users should not be allowed to edit dashboards and you want to provide them with real-time data refresh.",templatePackages:["create-react-app","react-antd-static","chartjs-charts","antd-tables","credentials","web-socket-transport"],coverUrl:"https://cube.dev/downloads/template-real-time-dashboard.png"},{name:"Material UI React Dashboard",coverUrl:"https://cube.dev/downloads/template-material-ui.jpg",description:"Use this template to create a Material UI–based static dashboard application and add charts to it by editing the source code or via Cube.js Playground. Use it when users should not be allowed to edit dashboards.",templatePackages:["create-react-app","react-material-static","recharts-charts","material-tables","credentials"]},{name:"Material UI D3 Dashboard",coverUrl:"https://cube.dev/downloads/template-material-d3.png",description:"Use this template to create a Material UI–based dashboard with D3.js. Add charts to it by editing the source code or via Cube.js Playground. Use it when users should not be allowed to edit dashboards.",templatePackages:["create-react-app","react-material-static","d3-charts","material-tables","credentials"]}].map(({name:t,description:n,templatePackages:r,coverUrl:a})=>u.a.createElement(T.a,{xs:{span:24},md:{span:12},lg:{span:8},xl:{span:6},key:t},u.a.createElement(Dr,{hoverable:!0,bordered:!1,cover:u.a.createElement(Tr,{src:a})},u.a.createElement(D.a.Meta,{title:t,description:n}),u.a.createElement(pr,{type:"primary",onClick:Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dashboardSource.applyTemplatePackages(r);case 2:c.push("/dashboard");case 3:case"end":return t.stop()}}),t)})))},"Create App")))).concat([u.a.createElement(T.a,{xs:{span:24},md:{span:8},lg:{span:6},key:"own"},u.a.createElement(Dr,{onClick:()=>this.setState({createOwnModalVisible:!0}),hoverable:!0,createYourOwn:!0,bordered:!1,cover:u.a.createElement(br,null)},u.a.createElement(D.a.Meta,{title:"Create your Own",description:"Mix different templates together to create your own dashboard application"})),u.a.createElement(Cr,{visible:i,onOk:Object(b.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({createOwnModalVisible:!1}),n=["create-react-app",s,"".concat(r,"-charts"),"".concat(s.match(/^react-(\w+)/)[1],"-tables"),"credentials"].concat(o?["web-socket-transport"]:[]),t.next=4,e.dashboardSource.applyTemplatePackages(n);case 4:c.push("/dashboard");case 5:case"end":return t.stop()}}),t)}))),onCancel:()=>this.setState({createOwnModalVisible:!1}),onChange:(e,t)=>this.setState({[e]:t}),chartLibraries:Ht,currentLibraryItem:l,frameworks:bt,framework:a,frameworkItem:p,templatePackages:this.dashboardSource&&this.dashboardSource.templatePackages,templatePackage:d,enableWebSocketTransport:o}))]);return u.a.createElement(Mr,null,u.a.createElement(Ar,null,"Build your app from one the popular templates below or",u.a.createElement("a",{onClick:()=>this.setState({createOwnModalVisible:!0})},"create your own")),u.a.createElement(M.a,{type:"flex",align:"top",gutter:24},h))}}var qr=Object(m.f)(Rr);const Lr=Object(h.b)();Lr.listen(e=>{var t;t=e,ht(Object(k.a)({event:"page"},t))}),d.a.render(u.a.createElement(m.c,{history:Lr},u.a.createElement(cr,null,u.a.createElement(m.b,{key:"index",exact:!0,path:"/",component:v}),u.a.createElement(m.b,{key:"build",path:"/build",component:An}),u.a.createElement(m.b,{key:"schema",path:"/schema",component:Gn}),u.a.createElement(m.b,{key:"dashboard",path:"/dashboard",component:Hn}),u.a.createElement(m.b,{key:"template-gallery",path:"/template-gallery",component:qr}))),document.getElementById("root"))},909:function(e,t,n){e.exports=n(2166)}});